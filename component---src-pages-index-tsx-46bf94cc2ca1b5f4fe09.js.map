{"version":3,"file":"component---src-pages-index-tsx-46bf94cc2ca1b5f4fe09.js","mappings":"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","sources":["webpack://my-gatsby-site/./node_modules/@firebase/database/node_modules/@firebase/util/dist/index.esm2017.js","webpack://my-gatsby-site/./src/images/profile2.jpg","webpack://my-gatsby-site/./src/components/common/AccordionItem.tsx","webpack://my-gatsby-site/./src/components/main-web/Web.tsx","webpack://my-gatsby-site/./src/components/main-my-info/Info.tsx","webpack://my-gatsby-site/./src/components/main-introduce/Introduce.tsx","webpack://my-gatsby-site/./src/components/main-desktop/Desktop.tsx","webpack://my-gatsby-site/./src/utils/firebase.ts","webpack://my-gatsby-site/./src/utils/common.ts","webpack://my-gatsby-site/./src/components/main-guestbook/components/TraceBasic.tsx","webpack://my-gatsby-site/./src/components/main-guestbook/organisms/TraceList.tsx","webpack://my-gatsby-site/./src/components/main-guestbook/template/TraceMainView.tsx","webpack://my-gatsby-site/./src/components/main-guestbook/index.tsx","webpack://my-gatsby-site/./src/components/main-blog/components/BlogContent.tsx","webpack://my-gatsby-site/./src/components/main-blog/organisms/BlogContentList.tsx","webpack://my-gatsby-site/./src/components/main-blog/template/BlogMainView.tsx","webpack://my-gatsby-site/./src/components/main-blog/index.tsx","webpack://my-gatsby-site/./src/components/main-blog/template/BlogWriteView.tsx","webpack://my-gatsby-site/./src/components/main-blog/write.tsx","webpack://my-gatsby-site/./src/components/main-guestbook/template/TraceWriteView.tsx","webpack://my-gatsby-site/./src/components/main-guestbook/write.tsx","webpack://my-gatsby-site/./src/pages/index.tsx","webpack://my-gatsby-site/./node_modules/next/dist/client/normalize-trailing-slash.js","webpack://my-gatsby-site/./node_modules/next/dist/client/request-idle-callback.js","webpack://my-gatsby-site/./node_modules/next/dist/client/route-loader.js","webpack://my-gatsby-site/./node_modules/next/dist/client/router.js","webpack://my-gatsby-site/./node_modules/next/dist/client/with-router.js","webpack://my-gatsby-site/./node_modules/next/dist/compiled/path-to-regexp/index.js","webpack://my-gatsby-site/./node_modules/next/dist/lib/is-error.js","webpack://my-gatsby-site/./node_modules/next/dist/server/denormalize-page-path.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/escape-regexp.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/i18n/detect-domain-locale.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/i18n/normalize-locale-path.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/is-plain-object.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/mitt.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router-context.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/router.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/utils/format-url.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/utils/get-asset-path-from-route.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/utils/get-middleware-regex.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/utils/index.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/utils/is-dynamic.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/utils/parse-relative-url.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/utils/parse-url.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/utils/path-match.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/utils/prepare-destination.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/utils/querystring.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/utils/resolve-rewrites.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/utils/route-matcher.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/utils/route-regex.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/router/utils/sorted-routes.js","webpack://my-gatsby-site/./node_modules/next/dist/shared/lib/utils.js","webpack://my-gatsby-site/./node_modules/next/router.js","webpack://my-gatsby-site/./node_modules/@firebase/util/dist/index.esm2017.js","webpack://my-gatsby-site/./node_modules/@firebase/component/dist/esm/index.esm2017.js","webpack://my-gatsby-site/./node_modules/@firebase/logger/dist/esm/index.esm2017.js","webpack://my-gatsby-site/./node_modules/idb/build/wrap-idb-value.js","webpack://my-gatsby-site/./node_modules/idb/build/index.js","webpack://my-gatsby-site/./node_modules/@firebase/app/dist/esm/index.esm2017.js","webpack://my-gatsby-site/./node_modules/@firebase/database/node_modules/@firebase/component/dist/esm/index.esm2017.js","webpack://my-gatsby-site/./node_modules/@firebase/database/node_modules/@firebase/logger/dist/esm/index.esm2017.js"],"sourcesContent":["/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\r\n */\r\nconst CONSTANTS = {\r\n    /**\r\n     * @define {boolean} Whether this is the client Node.js SDK.\r\n     */\r\n    NODE_CLIENT: false,\r\n    /**\r\n     * @define {boolean} Whether this is the Admin Node.js SDK.\r\n     */\r\n    NODE_ADMIN: false,\r\n    /**\r\n     * Firebase SDK Version\r\n     */\r\n    SDK_VERSION: '${JSCORE_VERSION}'\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Throws an error if the provided assertion is falsy\r\n */\r\nconst assert = function (assertion, message) {\r\n    if (!assertion) {\r\n        throw assertionError(message);\r\n    }\r\n};\r\n/**\r\n * Returns an Error object suitable for throwing.\r\n */\r\nconst assertionError = function (message) {\r\n    return new Error('Firebase Database (' +\r\n        CONSTANTS.SDK_VERSION +\r\n        ') INTERNAL ASSERT FAILED: ' +\r\n        message);\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst stringToByteArray$1 = function (str) {\r\n    // TODO(user): Use native implementations if/when available\r\n    const out = [];\r\n    let p = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        let c = str.charCodeAt(i);\r\n        if (c < 128) {\r\n            out[p++] = c;\r\n        }\r\n        else if (c < 2048) {\r\n            out[p++] = (c >> 6) | 192;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else if ((c & 0xfc00) === 0xd800 &&\r\n            i + 1 < str.length &&\r\n            (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00) {\r\n            // Surrogate Pair\r\n            c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\r\n            out[p++] = (c >> 18) | 240;\r\n            out[p++] = ((c >> 12) & 63) | 128;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else {\r\n            out[p++] = (c >> 12) | 224;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n    }\r\n    return out;\r\n};\r\n/**\r\n * Turns an array of numbers into the string given by the concatenation of the\r\n * characters to which the numbers correspond.\r\n * @param bytes Array of numbers representing characters.\r\n * @return Stringification of the array.\r\n */\r\nconst byteArrayToString = function (bytes) {\r\n    // TODO(user): Use native implementations if/when available\r\n    const out = [];\r\n    let pos = 0, c = 0;\r\n    while (pos < bytes.length) {\r\n        const c1 = bytes[pos++];\r\n        if (c1 < 128) {\r\n            out[c++] = String.fromCharCode(c1);\r\n        }\r\n        else if (c1 > 191 && c1 < 224) {\r\n            const c2 = bytes[pos++];\r\n            out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\r\n        }\r\n        else if (c1 > 239 && c1 < 365) {\r\n            // Surrogate Pair\r\n            const c2 = bytes[pos++];\r\n            const c3 = bytes[pos++];\r\n            const c4 = bytes[pos++];\r\n            const u = (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\r\n                0x10000;\r\n            out[c++] = String.fromCharCode(0xd800 + (u >> 10));\r\n            out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\r\n        }\r\n        else {\r\n            const c2 = bytes[pos++];\r\n            const c3 = bytes[pos++];\r\n            out[c++] = String.fromCharCode(((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n        }\r\n    }\r\n    return out.join('');\r\n};\r\n// We define it as an object literal instead of a class because a class compiled down to es5 can't\r\n// be treeshaked. https://github.com/rollup/rollup/issues/1691\r\n// Static lookup maps, lazily populated by init_()\r\nconst base64 = {\r\n    /**\r\n     * Maps bytes to characters.\r\n     */\r\n    byteToCharMap_: null,\r\n    /**\r\n     * Maps characters to bytes.\r\n     */\r\n    charToByteMap_: null,\r\n    /**\r\n     * Maps bytes to websafe characters.\r\n     * @private\r\n     */\r\n    byteToCharMapWebSafe_: null,\r\n    /**\r\n     * Maps websafe characters to bytes.\r\n     * @private\r\n     */\r\n    charToByteMapWebSafe_: null,\r\n    /**\r\n     * Our default alphabet, shared between\r\n     * ENCODED_VALS and ENCODED_VALS_WEBSAFE\r\n     */\r\n    ENCODED_VALS_BASE: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\r\n    /**\r\n     * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\r\n     */\r\n    get ENCODED_VALS() {\r\n        return this.ENCODED_VALS_BASE + '+/=';\r\n    },\r\n    /**\r\n     * Our websafe alphabet.\r\n     */\r\n    get ENCODED_VALS_WEBSAFE() {\r\n        return this.ENCODED_VALS_BASE + '-_.';\r\n    },\r\n    /**\r\n     * Whether this browser supports the atob and btoa functions. This extension\r\n     * started at Mozilla but is now implemented by many browsers. We use the\r\n     * ASSUME_* variables to avoid pulling in the full useragent detection library\r\n     * but still allowing the standard per-browser compilations.\r\n     *\r\n     */\r\n    HAS_NATIVE_SUPPORT: typeof atob === 'function',\r\n    /**\r\n     * Base64-encode an array of bytes.\r\n     *\r\n     * @param input An array of bytes (numbers with\r\n     *     value in [0, 255]) to encode.\r\n     * @param webSafe Boolean indicating we should use the\r\n     *     alternative alphabet.\r\n     * @return The base64 encoded string.\r\n     */\r\n    encodeByteArray(input, webSafe) {\r\n        if (!Array.isArray(input)) {\r\n            throw Error('encodeByteArray takes an array as a parameter');\r\n        }\r\n        this.init_();\r\n        const byteToCharMap = webSafe\r\n            ? this.byteToCharMapWebSafe_\r\n            : this.byteToCharMap_;\r\n        const output = [];\r\n        for (let i = 0; i < input.length; i += 3) {\r\n            const byte1 = input[i];\r\n            const haveByte2 = i + 1 < input.length;\r\n            const byte2 = haveByte2 ? input[i + 1] : 0;\r\n            const haveByte3 = i + 2 < input.length;\r\n            const byte3 = haveByte3 ? input[i + 2] : 0;\r\n            const outByte1 = byte1 >> 2;\r\n            const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\r\n            let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\r\n            let outByte4 = byte3 & 0x3f;\r\n            if (!haveByte3) {\r\n                outByte4 = 64;\r\n                if (!haveByte2) {\r\n                    outByte3 = 64;\r\n                }\r\n            }\r\n            output.push(byteToCharMap[outByte1], byteToCharMap[outByte2], byteToCharMap[outByte3], byteToCharMap[outByte4]);\r\n        }\r\n        return output.join('');\r\n    },\r\n    /**\r\n     * Base64-encode a string.\r\n     *\r\n     * @param input A string to encode.\r\n     * @param webSafe If true, we should use the\r\n     *     alternative alphabet.\r\n     * @return The base64 encoded string.\r\n     */\r\n    encodeString(input, webSafe) {\r\n        // Shortcut for Mozilla browsers that implement\r\n        // a native base64 encoder in the form of \"btoa/atob\"\r\n        if (this.HAS_NATIVE_SUPPORT && !webSafe) {\r\n            return btoa(input);\r\n        }\r\n        return this.encodeByteArray(stringToByteArray$1(input), webSafe);\r\n    },\r\n    /**\r\n     * Base64-decode a string.\r\n     *\r\n     * @param input to decode.\r\n     * @param webSafe True if we should use the\r\n     *     alternative alphabet.\r\n     * @return string representing the decoded value.\r\n     */\r\n    decodeString(input, webSafe) {\r\n        // Shortcut for Mozilla browsers that implement\r\n        // a native base64 encoder in the form of \"btoa/atob\"\r\n        if (this.HAS_NATIVE_SUPPORT && !webSafe) {\r\n            return atob(input);\r\n        }\r\n        return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\r\n    },\r\n    /**\r\n     * Base64-decode a string.\r\n     *\r\n     * In base-64 decoding, groups of four characters are converted into three\r\n     * bytes.  If the encoder did not apply padding, the input length may not\r\n     * be a multiple of 4.\r\n     *\r\n     * In this case, the last group will have fewer than 4 characters, and\r\n     * padding will be inferred.  If the group has one or two characters, it decodes\r\n     * to one byte.  If the group has three characters, it decodes to two bytes.\r\n     *\r\n     * @param input Input to decode.\r\n     * @param webSafe True if we should use the web-safe alphabet.\r\n     * @return bytes representing the decoded value.\r\n     */\r\n    decodeStringToByteArray(input, webSafe) {\r\n        this.init_();\r\n        const charToByteMap = webSafe\r\n            ? this.charToByteMapWebSafe_\r\n            : this.charToByteMap_;\r\n        const output = [];\r\n        for (let i = 0; i < input.length;) {\r\n            const byte1 = charToByteMap[input.charAt(i++)];\r\n            const haveByte2 = i < input.length;\r\n            const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\r\n            ++i;\r\n            const haveByte3 = i < input.length;\r\n            const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\r\n            ++i;\r\n            const haveByte4 = i < input.length;\r\n            const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\r\n            ++i;\r\n            if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\r\n                throw new DecodeBase64StringError();\r\n            }\r\n            const outByte1 = (byte1 << 2) | (byte2 >> 4);\r\n            output.push(outByte1);\r\n            if (byte3 !== 64) {\r\n                const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\r\n                output.push(outByte2);\r\n                if (byte4 !== 64) {\r\n                    const outByte3 = ((byte3 << 6) & 0xc0) | byte4;\r\n                    output.push(outByte3);\r\n                }\r\n            }\r\n        }\r\n        return output;\r\n    },\r\n    /**\r\n     * Lazy static initialization function. Called before\r\n     * accessing any of the static map variables.\r\n     * @private\r\n     */\r\n    init_() {\r\n        if (!this.byteToCharMap_) {\r\n            this.byteToCharMap_ = {};\r\n            this.charToByteMap_ = {};\r\n            this.byteToCharMapWebSafe_ = {};\r\n            this.charToByteMapWebSafe_ = {};\r\n            // We want quick mappings back and forth, so we precompute two maps.\r\n            for (let i = 0; i < this.ENCODED_VALS.length; i++) {\r\n                this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\r\n                this.charToByteMap_[this.byteToCharMap_[i]] = i;\r\n                this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\r\n                this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\r\n                // Be forgiving when decoding and correctly decode both encodings.\r\n                if (i >= this.ENCODED_VALS_BASE.length) {\r\n                    this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\r\n                    this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n/**\r\n * An error encountered while decoding base64 string.\r\n */\r\nclass DecodeBase64StringError extends Error {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = 'DecodeBase64StringError';\r\n    }\r\n}\r\n/**\r\n * URL-safe base64 encoding\r\n */\r\nconst base64Encode = function (str) {\r\n    const utf8Bytes = stringToByteArray$1(str);\r\n    return base64.encodeByteArray(utf8Bytes, true);\r\n};\r\n/**\r\n * URL-safe base64 encoding (without \".\" padding in the end).\r\n * e.g. Used in JSON Web Token (JWT) parts.\r\n */\r\nconst base64urlEncodeWithoutPadding = function (str) {\r\n    // Use base64url encoding and remove padding in the end (dot characters).\r\n    return base64Encode(str).replace(/\\./g, '');\r\n};\r\n/**\r\n * URL-safe base64 decoding\r\n *\r\n * NOTE: DO NOT use the global atob() function - it does NOT support the\r\n * base64Url variant encoding.\r\n *\r\n * @param str To be decoded\r\n * @return Decoded result, if possible\r\n */\r\nconst base64Decode = function (str) {\r\n    try {\r\n        return base64.decodeString(str, true);\r\n    }\r\n    catch (e) {\r\n        console.error('base64Decode failed: ', e);\r\n    }\r\n    return null;\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Do a deep-copy of basic JavaScript Objects or Arrays.\r\n */\r\nfunction deepCopy(value) {\r\n    return deepExtend(undefined, value);\r\n}\r\n/**\r\n * Copy properties from source to target (recursively allows extension\r\n * of Objects and Arrays).  Scalar values in the target are over-written.\r\n * If target is undefined, an object of the appropriate type will be created\r\n * (and returned).\r\n *\r\n * We recursively copy all child properties of plain Objects in the source- so\r\n * that namespace- like dictionaries are merged.\r\n *\r\n * Note that the target can be a function, in which case the properties in\r\n * the source Object are copied onto it as static properties of the Function.\r\n *\r\n * Note: we don't merge __proto__ to prevent prototype pollution\r\n */\r\nfunction deepExtend(target, source) {\r\n    if (!(source instanceof Object)) {\r\n        return source;\r\n    }\r\n    switch (source.constructor) {\r\n        case Date:\r\n            // Treat Dates like scalars; if the target date object had any child\r\n            // properties - they will be lost!\r\n            const dateValue = source;\r\n            return new Date(dateValue.getTime());\r\n        case Object:\r\n            if (target === undefined) {\r\n                target = {};\r\n            }\r\n            break;\r\n        case Array:\r\n            // Always copy the array source and overwrite the target.\r\n            target = [];\r\n            break;\r\n        default:\r\n            // Not a plain Object - treat it as a scalar.\r\n            return source;\r\n    }\r\n    for (const prop in source) {\r\n        // use isValidKey to guard against prototype pollution. See https://snyk.io/vuln/SNYK-JS-LODASH-450202\r\n        if (!source.hasOwnProperty(prop) || !isValidKey(prop)) {\r\n            continue;\r\n        }\r\n        target[prop] = deepExtend(target[prop], source[prop]);\r\n    }\r\n    return target;\r\n}\r\nfunction isValidKey(key) {\r\n    return key !== '__proto__';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2022 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Polyfill for `globalThis` object.\r\n * @returns the `globalThis` object for the given environment.\r\n * @public\r\n */\r\nfunction getGlobal() {\r\n    if (typeof self !== 'undefined') {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined') {\r\n        return window;\r\n    }\r\n    if (typeof global !== 'undefined') {\r\n        return global;\r\n    }\r\n    throw new Error('Unable to locate global object.');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2022 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst getDefaultsFromGlobal = () => getGlobal().__FIREBASE_DEFAULTS__;\r\n/**\r\n * Attempt to read defaults from a JSON string provided to\r\n * process(.)env(.)__FIREBASE_DEFAULTS__ or a JSON file whose path is in\r\n * process(.)env(.)__FIREBASE_DEFAULTS_PATH__\r\n * The dots are in parens because certain compilers (Vite?) cannot\r\n * handle seeing that variable in comments.\r\n * See https://github.com/firebase/firebase-js-sdk/issues/6838\r\n */\r\nconst getDefaultsFromEnvVariable = () => {\r\n    if (typeof process === 'undefined' || typeof process.env === 'undefined') {\r\n        return;\r\n    }\r\n    const defaultsJsonString = process.env.__FIREBASE_DEFAULTS__;\r\n    if (defaultsJsonString) {\r\n        return JSON.parse(defaultsJsonString);\r\n    }\r\n};\r\nconst getDefaultsFromCookie = () => {\r\n    if (typeof document === 'undefined') {\r\n        return;\r\n    }\r\n    let match;\r\n    try {\r\n        match = document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/);\r\n    }\r\n    catch (e) {\r\n        // Some environments such as Angular Universal SSR have a\r\n        // `document` object but error on accessing `document.cookie`.\r\n        return;\r\n    }\r\n    const decoded = match && base64Decode(match[1]);\r\n    return decoded && JSON.parse(decoded);\r\n};\r\n/**\r\n * Get the __FIREBASE_DEFAULTS__ object. It checks in order:\r\n * (1) if such an object exists as a property of `globalThis`\r\n * (2) if such an object was provided on a shell environment variable\r\n * (3) if such an object exists in a cookie\r\n * @public\r\n */\r\nconst getDefaults = () => {\r\n    try {\r\n        return (getDefaultsFromGlobal() ||\r\n            getDefaultsFromEnvVariable() ||\r\n            getDefaultsFromCookie());\r\n    }\r\n    catch (e) {\r\n        /**\r\n         * Catch-all for being unable to get __FIREBASE_DEFAULTS__ due\r\n         * to any environment case we have not accounted for. Log to\r\n         * info instead of swallowing so we can find these unknown cases\r\n         * and add paths for them if needed.\r\n         */\r\n        console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);\r\n        return;\r\n    }\r\n};\r\n/**\r\n * Returns emulator host stored in the __FIREBASE_DEFAULTS__ object\r\n * for the given product.\r\n * @returns a URL host formatted like `127.0.0.1:9999` or `[::1]:4000` if available\r\n * @public\r\n */\r\nconst getDefaultEmulatorHost = (productName) => { var _a, _b; return (_b = (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a.emulatorHosts) === null || _b === void 0 ? void 0 : _b[productName]; };\r\n/**\r\n * Returns emulator hostname and port stored in the __FIREBASE_DEFAULTS__ object\r\n * for the given product.\r\n * @returns a pair of hostname and port like `[\"::1\", 4000]` if available\r\n * @public\r\n */\r\nconst getDefaultEmulatorHostnameAndPort = (productName) => {\r\n    const host = getDefaultEmulatorHost(productName);\r\n    if (!host) {\r\n        return undefined;\r\n    }\r\n    const separatorIndex = host.lastIndexOf(':'); // Finding the last since IPv6 addr also has colons.\r\n    if (separatorIndex <= 0 || separatorIndex + 1 === host.length) {\r\n        throw new Error(`Invalid host ${host} with no separate hostname and port!`);\r\n    }\r\n    // eslint-disable-next-line no-restricted-globals\r\n    const port = parseInt(host.substring(separatorIndex + 1), 10);\r\n    if (host[0] === '[') {\r\n        // Bracket-quoted `[ipv6addr]:port` => return \"ipv6addr\" (without brackets).\r\n        return [host.substring(1, separatorIndex - 1), port];\r\n    }\r\n    else {\r\n        return [host.substring(0, separatorIndex), port];\r\n    }\r\n};\r\n/**\r\n * Returns Firebase app config stored in the __FIREBASE_DEFAULTS__ object.\r\n * @public\r\n */\r\nconst getDefaultAppConfig = () => { var _a; return (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a.config; };\r\n/**\r\n * Returns an experimental setting on the __FIREBASE_DEFAULTS__ object (properties\r\n * prefixed by \"_\")\r\n * @public\r\n */\r\nconst getExperimentalSetting = (name) => { var _a; return (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a[`_${name}`]; };\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass Deferred {\r\n    constructor() {\r\n        this.reject = () => { };\r\n        this.resolve = () => { };\r\n        this.promise = new Promise((resolve, reject) => {\r\n            this.resolve = resolve;\r\n            this.reject = reject;\r\n        });\r\n    }\r\n    /**\r\n     * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\r\n     * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\r\n     * and returns a node-style callback which will resolve or reject the Deferred's promise.\r\n     */\r\n    wrapCallback(callback) {\r\n        return (error, value) => {\r\n            if (error) {\r\n                this.reject(error);\r\n            }\r\n            else {\r\n                this.resolve(value);\r\n            }\r\n            if (typeof callback === 'function') {\r\n                // Attaching noop handler just in case developer wasn't expecting\r\n                // promises\r\n                this.promise.catch(() => { });\r\n                // Some of our callbacks don't expect a value and our own tests\r\n                // assert that the parameter length is 1\r\n                if (callback.length === 1) {\r\n                    callback(error);\r\n                }\r\n                else {\r\n                    callback(error, value);\r\n                }\r\n            }\r\n        };\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction createMockUserToken(token, projectId) {\r\n    if (token.uid) {\r\n        throw new Error('The \"uid\" field is no longer supported by mockUserToken. Please use \"sub\" instead for Firebase Auth User ID.');\r\n    }\r\n    // Unsecured JWTs use \"none\" as the algorithm.\r\n    const header = {\r\n        alg: 'none',\r\n        type: 'JWT'\r\n    };\r\n    const project = projectId || 'demo-project';\r\n    const iat = token.iat || 0;\r\n    const sub = token.sub || token.user_id;\r\n    if (!sub) {\r\n        throw new Error(\"mockUserToken must contain 'sub' or 'user_id' field!\");\r\n    }\r\n    const payload = Object.assign({ \r\n        // Set all required fields to decent defaults\r\n        iss: `https://securetoken.google.com/${project}`, aud: project, iat, exp: iat + 3600, auth_time: iat, sub, user_id: sub, firebase: {\r\n            sign_in_provider: 'custom',\r\n            identities: {}\r\n        } }, token);\r\n    // Unsecured JWTs use the empty string as a signature.\r\n    const signature = '';\r\n    return [\r\n        base64urlEncodeWithoutPadding(JSON.stringify(header)),\r\n        base64urlEncodeWithoutPadding(JSON.stringify(payload)),\r\n        signature\r\n    ].join('.');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns navigator.userAgent string or '' if it's not defined.\r\n * @return user agent string\r\n */\r\nfunction getUA() {\r\n    if (typeof navigator !== 'undefined' &&\r\n        typeof navigator['userAgent'] === 'string') {\r\n        return navigator['userAgent'];\r\n    }\r\n    else {\r\n        return '';\r\n    }\r\n}\r\n/**\r\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\r\n *\r\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\r\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\r\n * wait for a callback.\r\n */\r\nfunction isMobileCordova() {\r\n    return (typeof window !== 'undefined' &&\r\n        // @ts-ignore Setting up an broadly applicable index signature for Window\r\n        // just to deal with this case would probably be a bad idea.\r\n        !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\r\n        /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA()));\r\n}\r\n/**\r\n * Detect Node.js.\r\n *\r\n * @return true if Node.js environment is detected or specified.\r\n */\r\n// Node detection logic from: https://github.com/iliakan/detect-node/\r\nfunction isNode() {\r\n    var _a;\r\n    const forceEnvironment = (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a.forceEnvironment;\r\n    if (forceEnvironment === 'node') {\r\n        return true;\r\n    }\r\n    else if (forceEnvironment === 'browser') {\r\n        return false;\r\n    }\r\n    try {\r\n        return (Object.prototype.toString.call(global.process) === '[object process]');\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Detect Browser Environment\r\n */\r\nfunction isBrowser() {\r\n    return typeof window !== 'undefined' || isWebWorker();\r\n}\r\n/**\r\n * Detect Web Worker context\r\n */\r\nfunction isWebWorker() {\r\n    return (typeof WorkerGlobalScope !== 'undefined' &&\r\n        typeof self !== 'undefined' &&\r\n        self instanceof WorkerGlobalScope);\r\n}\r\nfunction isBrowserExtension() {\r\n    const runtime = typeof chrome === 'object'\r\n        ? chrome.runtime\r\n        : typeof browser === 'object'\r\n            ? browser.runtime\r\n            : undefined;\r\n    return typeof runtime === 'object' && runtime.id !== undefined;\r\n}\r\n/**\r\n * Detect React Native.\r\n *\r\n * @return true if ReactNative environment is detected.\r\n */\r\nfunction isReactNative() {\r\n    return (typeof navigator === 'object' && navigator['product'] === 'ReactNative');\r\n}\r\n/** Detects Electron apps. */\r\nfunction isElectron() {\r\n    return getUA().indexOf('Electron/') >= 0;\r\n}\r\n/** Detects Internet Explorer. */\r\nfunction isIE() {\r\n    const ua = getUA();\r\n    return ua.indexOf('MSIE ') >= 0 || ua.indexOf('Trident/') >= 0;\r\n}\r\n/** Detects Universal Windows Platform apps. */\r\nfunction isUWP() {\r\n    return getUA().indexOf('MSAppHost/') >= 0;\r\n}\r\n/**\r\n * Detect whether the current SDK build is the Node version.\r\n *\r\n * @return true if it's the Node SDK build.\r\n */\r\nfunction isNodeSdk() {\r\n    return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\r\n}\r\n/** Returns true if we are running in Safari. */\r\nfunction isSafari() {\r\n    return (!isNode() &&\r\n        !!navigator.userAgent &&\r\n        navigator.userAgent.includes('Safari') &&\r\n        !navigator.userAgent.includes('Chrome'));\r\n}\r\n/**\r\n * This method checks if indexedDB is supported by current browser/service worker context\r\n * @return true if indexedDB is supported by current browser/service worker context\r\n */\r\nfunction isIndexedDBAvailable() {\r\n    try {\r\n        return typeof indexedDB === 'object';\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * This method validates browser/sw context for indexedDB by opening a dummy indexedDB database and reject\r\n * if errors occur during the database open operation.\r\n *\r\n * @throws exception if current browser/sw context can't run idb.open (ex: Safari iframe, Firefox\r\n * private browsing)\r\n */\r\nfunction validateIndexedDBOpenable() {\r\n    return new Promise((resolve, reject) => {\r\n        try {\r\n            let preExist = true;\r\n            const DB_CHECK_NAME = 'validate-browser-context-for-indexeddb-analytics-module';\r\n            const request = self.indexedDB.open(DB_CHECK_NAME);\r\n            request.onsuccess = () => {\r\n                request.result.close();\r\n                // delete database only when it doesn't pre-exist\r\n                if (!preExist) {\r\n                    self.indexedDB.deleteDatabase(DB_CHECK_NAME);\r\n                }\r\n                resolve(true);\r\n            };\r\n            request.onupgradeneeded = () => {\r\n                preExist = false;\r\n            };\r\n            request.onerror = () => {\r\n                var _a;\r\n                reject(((_a = request.error) === null || _a === void 0 ? void 0 : _a.message) || '');\r\n            };\r\n        }\r\n        catch (error) {\r\n            reject(error);\r\n        }\r\n    });\r\n}\r\n/**\r\n *\r\n * This method checks whether cookie is enabled within current browser\r\n * @return true if cookie is enabled within current browser\r\n */\r\nfunction areCookiesEnabled() {\r\n    if (typeof navigator === 'undefined' || !navigator.cookieEnabled) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Standardized Firebase Error.\r\n *\r\n * Usage:\r\n *\r\n *   // Typescript string literals for type-safe codes\r\n *   type Err =\r\n *     'unknown' |\r\n *     'object-not-found'\r\n *     ;\r\n *\r\n *   // Closure enum for type-safe error codes\r\n *   // at-enum {string}\r\n *   var Err = {\r\n *     UNKNOWN: 'unknown',\r\n *     OBJECT_NOT_FOUND: 'object-not-found',\r\n *   }\r\n *\r\n *   let errors: Map<Err, string> = {\r\n *     'generic-error': \"Unknown error\",\r\n *     'file-not-found': \"Could not find file: {$file}\",\r\n *   };\r\n *\r\n *   // Type-safe function - must pass a valid error code as param.\r\n *   let error = new ErrorFactory<Err>('service', 'Service', errors);\r\n *\r\n *   ...\r\n *   throw error.create(Err.GENERIC);\r\n *   ...\r\n *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});\r\n *   ...\r\n *   // Service: Could not file file: foo.txt (service/file-not-found).\r\n *\r\n *   catch (e) {\r\n *     assert(e.message === \"Could not find file: foo.txt.\");\r\n *     if ((e as FirebaseError)?.code === 'service/file-not-found') {\r\n *       console.log(\"Could not read file: \" + e['file']);\r\n *     }\r\n *   }\r\n */\r\nconst ERROR_NAME = 'FirebaseError';\r\n// Based on code from:\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\r\nclass FirebaseError extends Error {\r\n    constructor(\r\n    /** The error code for this error. */\r\n    code, message, \r\n    /** Custom data for this error. */\r\n    customData) {\r\n        super(message);\r\n        this.code = code;\r\n        this.customData = customData;\r\n        /** The custom name for all FirebaseErrors. */\r\n        this.name = ERROR_NAME;\r\n        // Fix For ES5\r\n        // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\r\n        Object.setPrototypeOf(this, FirebaseError.prototype);\r\n        // Maintains proper stack trace for where our error was thrown.\r\n        // Only available on V8.\r\n        if (Error.captureStackTrace) {\r\n            Error.captureStackTrace(this, ErrorFactory.prototype.create);\r\n        }\r\n    }\r\n}\r\nclass ErrorFactory {\r\n    constructor(service, serviceName, errors) {\r\n        this.service = service;\r\n        this.serviceName = serviceName;\r\n        this.errors = errors;\r\n    }\r\n    create(code, ...data) {\r\n        const customData = data[0] || {};\r\n        const fullCode = `${this.service}/${code}`;\r\n        const template = this.errors[code];\r\n        const message = template ? replaceTemplate(template, customData) : 'Error';\r\n        // Service Name: Error message (service/code).\r\n        const fullMessage = `${this.serviceName}: ${message} (${fullCode}).`;\r\n        const error = new FirebaseError(fullCode, fullMessage, customData);\r\n        return error;\r\n    }\r\n}\r\nfunction replaceTemplate(template, data) {\r\n    return template.replace(PATTERN, (_, key) => {\r\n        const value = data[key];\r\n        return value != null ? String(value) : `<${key}?>`;\r\n    });\r\n}\r\nconst PATTERN = /\\{\\$([^}]+)}/g;\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Evaluates a JSON string into a javascript object.\r\n *\r\n * @param {string} str A string containing JSON.\r\n * @return {*} The javascript object representing the specified JSON.\r\n */\r\nfunction jsonEval(str) {\r\n    return JSON.parse(str);\r\n}\r\n/**\r\n * Returns JSON representing a javascript object.\r\n * @param {*} data Javascript object to be stringified.\r\n * @return {string} The JSON contents of the object.\r\n */\r\nfunction stringify(data) {\r\n    return JSON.stringify(data);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Decodes a Firebase auth. token into constituent parts.\r\n *\r\n * Notes:\r\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst decode = function (token) {\r\n    let header = {}, claims = {}, data = {}, signature = '';\r\n    try {\r\n        const parts = token.split('.');\r\n        header = jsonEval(base64Decode(parts[0]) || '');\r\n        claims = jsonEval(base64Decode(parts[1]) || '');\r\n        signature = parts[2];\r\n        data = claims['d'] || {};\r\n        delete claims['d'];\r\n    }\r\n    catch (e) { }\r\n    return {\r\n        header,\r\n        claims,\r\n        data,\r\n        signature\r\n    };\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\r\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst isValidTimestamp = function (token) {\r\n    const claims = decode(token).claims;\r\n    const now = Math.floor(new Date().getTime() / 1000);\r\n    let validSince = 0, validUntil = 0;\r\n    if (typeof claims === 'object') {\r\n        if (claims.hasOwnProperty('nbf')) {\r\n            validSince = claims['nbf'];\r\n        }\r\n        else if (claims.hasOwnProperty('iat')) {\r\n            validSince = claims['iat'];\r\n        }\r\n        if (claims.hasOwnProperty('exp')) {\r\n            validUntil = claims['exp'];\r\n        }\r\n        else {\r\n            // token will expire after 24h by default\r\n            validUntil = validSince + 86400;\r\n        }\r\n    }\r\n    return (!!now &&\r\n        !!validSince &&\r\n        !!validUntil &&\r\n        now >= validSince &&\r\n        now <= validUntil);\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\r\n *\r\n * Notes:\r\n * - May return null if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst issuedAtTime = function (token) {\r\n    const claims = decode(token).claims;\r\n    if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {\r\n        return claims['iat'];\r\n    }\r\n    return null;\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst isValidFormat = function (token) {\r\n    const decoded = decode(token), claims = decoded.claims;\r\n    return !!claims && typeof claims === 'object' && claims.hasOwnProperty('iat');\r\n};\r\n/**\r\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst isAdmin = function (token) {\r\n    const claims = decode(token).claims;\r\n    return typeof claims === 'object' && claims['admin'] === true;\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction contains(obj, key) {\r\n    return Object.prototype.hasOwnProperty.call(obj, key);\r\n}\r\nfunction safeGet(obj, key) {\r\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n        return obj[key];\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nfunction isEmpty(obj) {\r\n    for (const key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction map(obj, fn, contextObj) {\r\n    const res = {};\r\n    for (const key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            res[key] = fn.call(contextObj, obj[key], key, obj);\r\n        }\r\n    }\r\n    return res;\r\n}\r\n/**\r\n * Deep equal two objects. Support Arrays and Objects.\r\n */\r\nfunction deepEqual(a, b) {\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    const aKeys = Object.keys(a);\r\n    const bKeys = Object.keys(b);\r\n    for (const k of aKeys) {\r\n        if (!bKeys.includes(k)) {\r\n            return false;\r\n        }\r\n        const aProp = a[k];\r\n        const bProp = b[k];\r\n        if (isObject(aProp) && isObject(bProp)) {\r\n            if (!deepEqual(aProp, bProp)) {\r\n                return false;\r\n            }\r\n        }\r\n        else if (aProp !== bProp) {\r\n            return false;\r\n        }\r\n    }\r\n    for (const k of bKeys) {\r\n        if (!aKeys.includes(k)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction isObject(thing) {\r\n    return thing !== null && typeof thing === 'object';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2022 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Rejects if the given promise doesn't resolve in timeInMS milliseconds.\r\n * @internal\r\n */\r\nfunction promiseWithTimeout(promise, timeInMS = 2000) {\r\n    const deferredPromise = new Deferred();\r\n    setTimeout(() => deferredPromise.reject('timeout!'), timeInMS);\r\n    promise.then(deferredPromise.resolve, deferredPromise.reject);\r\n    return deferredPromise.promise;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a\r\n * params object (e.g. {arg: 'val', arg2: 'val2'})\r\n * Note: You must prepend it with ? when adding it to a URL.\r\n */\r\nfunction querystring(querystringParams) {\r\n    const params = [];\r\n    for (const [key, value] of Object.entries(querystringParams)) {\r\n        if (Array.isArray(value)) {\r\n            value.forEach(arrayVal => {\r\n                params.push(encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal));\r\n            });\r\n        }\r\n        else {\r\n            params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\r\n        }\r\n    }\r\n    return params.length ? '&' + params.join('&') : '';\r\n}\r\n/**\r\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object\r\n * (e.g. {arg: 'val', arg2: 'val2'})\r\n */\r\nfunction querystringDecode(querystring) {\r\n    const obj = {};\r\n    const tokens = querystring.replace(/^\\?/, '').split('&');\r\n    tokens.forEach(token => {\r\n        if (token) {\r\n            const [key, value] = token.split('=');\r\n            obj[decodeURIComponent(key)] = decodeURIComponent(value);\r\n        }\r\n    });\r\n    return obj;\r\n}\r\n/**\r\n * Extract the query string part of a URL, including the leading question mark (if present).\r\n */\r\nfunction extractQuerystring(url) {\r\n    const queryStart = url.indexOf('?');\r\n    if (!queryStart) {\r\n        return '';\r\n    }\r\n    const fragmentStart = url.indexOf('#', queryStart);\r\n    return url.substring(queryStart, fragmentStart > 0 ? fragmentStart : undefined);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview SHA-1 cryptographic hash.\r\n * Variable names follow the notation in FIPS PUB 180-3:\r\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\r\n *\r\n * Usage:\r\n *   var sha1 = new sha1();\r\n *   sha1.update(bytes);\r\n *   var hash = sha1.digest();\r\n *\r\n * Performance:\r\n *   Chrome 23:   ~400 Mbit/s\r\n *   Firefox 16:  ~250 Mbit/s\r\n *\r\n */\r\n/**\r\n * SHA-1 cryptographic hash constructor.\r\n *\r\n * The properties declared here are discussed in the above algorithm document.\r\n * @constructor\r\n * @final\r\n * @struct\r\n */\r\nclass Sha1 {\r\n    constructor() {\r\n        /**\r\n         * Holds the previous values of accumulated variables a-e in the compress_\r\n         * function.\r\n         * @private\r\n         */\r\n        this.chain_ = [];\r\n        /**\r\n         * A buffer holding the partially computed hash result.\r\n         * @private\r\n         */\r\n        this.buf_ = [];\r\n        /**\r\n         * An array of 80 bytes, each a part of the message to be hashed.  Referred to\r\n         * as the message schedule in the docs.\r\n         * @private\r\n         */\r\n        this.W_ = [];\r\n        /**\r\n         * Contains data needed to pad messages less than 64 bytes.\r\n         * @private\r\n         */\r\n        this.pad_ = [];\r\n        /**\r\n         * @private {number}\r\n         */\r\n        this.inbuf_ = 0;\r\n        /**\r\n         * @private {number}\r\n         */\r\n        this.total_ = 0;\r\n        this.blockSize = 512 / 8;\r\n        this.pad_[0] = 128;\r\n        for (let i = 1; i < this.blockSize; ++i) {\r\n            this.pad_[i] = 0;\r\n        }\r\n        this.reset();\r\n    }\r\n    reset() {\r\n        this.chain_[0] = 0x67452301;\r\n        this.chain_[1] = 0xefcdab89;\r\n        this.chain_[2] = 0x98badcfe;\r\n        this.chain_[3] = 0x10325476;\r\n        this.chain_[4] = 0xc3d2e1f0;\r\n        this.inbuf_ = 0;\r\n        this.total_ = 0;\r\n    }\r\n    /**\r\n     * Internal compress helper function.\r\n     * @param buf Block to compress.\r\n     * @param offset Offset of the block in the buffer.\r\n     * @private\r\n     */\r\n    compress_(buf, offset) {\r\n        if (!offset) {\r\n            offset = 0;\r\n        }\r\n        const W = this.W_;\r\n        // get 16 big endian words\r\n        if (typeof buf === 'string') {\r\n            for (let i = 0; i < 16; i++) {\r\n                // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\r\n                // have a bug that turns the post-increment ++ operator into pre-increment\r\n                // during JIT compilation.  We have code that depends heavily on SHA-1 for\r\n                // correctness and which is affected by this bug, so I've removed all uses\r\n                // of post-increment ++ in which the result value is used.  We can revert\r\n                // this change once the Safari bug\r\n                // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\r\n                // most clients have been updated.\r\n                W[i] =\r\n                    (buf.charCodeAt(offset) << 24) |\r\n                        (buf.charCodeAt(offset + 1) << 16) |\r\n                        (buf.charCodeAt(offset + 2) << 8) |\r\n                        buf.charCodeAt(offset + 3);\r\n                offset += 4;\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0; i < 16; i++) {\r\n                W[i] =\r\n                    (buf[offset] << 24) |\r\n                        (buf[offset + 1] << 16) |\r\n                        (buf[offset + 2] << 8) |\r\n                        buf[offset + 3];\r\n                offset += 4;\r\n            }\r\n        }\r\n        // expand to 80 words\r\n        for (let i = 16; i < 80; i++) {\r\n            const t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\r\n            W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;\r\n        }\r\n        let a = this.chain_[0];\r\n        let b = this.chain_[1];\r\n        let c = this.chain_[2];\r\n        let d = this.chain_[3];\r\n        let e = this.chain_[4];\r\n        let f, k;\r\n        // TODO(user): Try to unroll this loop to speed up the computation.\r\n        for (let i = 0; i < 80; i++) {\r\n            if (i < 40) {\r\n                if (i < 20) {\r\n                    f = d ^ (b & (c ^ d));\r\n                    k = 0x5a827999;\r\n                }\r\n                else {\r\n                    f = b ^ c ^ d;\r\n                    k = 0x6ed9eba1;\r\n                }\r\n            }\r\n            else {\r\n                if (i < 60) {\r\n                    f = (b & c) | (d & (b | c));\r\n                    k = 0x8f1bbcdc;\r\n                }\r\n                else {\r\n                    f = b ^ c ^ d;\r\n                    k = 0xca62c1d6;\r\n                }\r\n            }\r\n            const t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;\r\n            e = d;\r\n            d = c;\r\n            c = ((b << 30) | (b >>> 2)) & 0xffffffff;\r\n            b = a;\r\n            a = t;\r\n        }\r\n        this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;\r\n        this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;\r\n        this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;\r\n        this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;\r\n        this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;\r\n    }\r\n    update(bytes, length) {\r\n        // TODO(johnlenz): tighten the function signature and remove this check\r\n        if (bytes == null) {\r\n            return;\r\n        }\r\n        if (length === undefined) {\r\n            length = bytes.length;\r\n        }\r\n        const lengthMinusBlock = length - this.blockSize;\r\n        let n = 0;\r\n        // Using local instead of member variables gives ~5% speedup on Firefox 16.\r\n        const buf = this.buf_;\r\n        let inbuf = this.inbuf_;\r\n        // The outer while loop should execute at most twice.\r\n        while (n < length) {\r\n            // When we have no data in the block to top up, we can directly process the\r\n            // input buffer (assuming it contains sufficient data). This gives ~25%\r\n            // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\r\n            // the data is provided in large chunks (or in multiples of 64 bytes).\r\n            if (inbuf === 0) {\r\n                while (n <= lengthMinusBlock) {\r\n                    this.compress_(bytes, n);\r\n                    n += this.blockSize;\r\n                }\r\n            }\r\n            if (typeof bytes === 'string') {\r\n                while (n < length) {\r\n                    buf[inbuf] = bytes.charCodeAt(n);\r\n                    ++inbuf;\r\n                    ++n;\r\n                    if (inbuf === this.blockSize) {\r\n                        this.compress_(buf);\r\n                        inbuf = 0;\r\n                        // Jump to the outer loop so we use the full-block optimization.\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                while (n < length) {\r\n                    buf[inbuf] = bytes[n];\r\n                    ++inbuf;\r\n                    ++n;\r\n                    if (inbuf === this.blockSize) {\r\n                        this.compress_(buf);\r\n                        inbuf = 0;\r\n                        // Jump to the outer loop so we use the full-block optimization.\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.inbuf_ = inbuf;\r\n        this.total_ += length;\r\n    }\r\n    /** @override */\r\n    digest() {\r\n        const digest = [];\r\n        let totalBits = this.total_ * 8;\r\n        // Add pad 0x80 0x00*.\r\n        if (this.inbuf_ < 56) {\r\n            this.update(this.pad_, 56 - this.inbuf_);\r\n        }\r\n        else {\r\n            this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\r\n        }\r\n        // Add # bits.\r\n        for (let i = this.blockSize - 1; i >= 56; i--) {\r\n            this.buf_[i] = totalBits & 255;\r\n            totalBits /= 256; // Don't use bit-shifting here!\r\n        }\r\n        this.compress_(this.buf_);\r\n        let n = 0;\r\n        for (let i = 0; i < 5; i++) {\r\n            for (let j = 24; j >= 0; j -= 8) {\r\n                digest[n] = (this.chain_[i] >> j) & 255;\r\n                ++n;\r\n            }\r\n        }\r\n        return digest;\r\n    }\r\n}\n\n/**\r\n * Helper to make a Subscribe function (just like Promise helps make a\r\n * Thenable).\r\n *\r\n * @param executor Function which can make calls to a single Observer\r\n *     as a proxy.\r\n * @param onNoObservers Callback when count of Observers goes to zero.\r\n */\r\nfunction createSubscribe(executor, onNoObservers) {\r\n    const proxy = new ObserverProxy(executor, onNoObservers);\r\n    return proxy.subscribe.bind(proxy);\r\n}\r\n/**\r\n * Implement fan-out for any number of Observers attached via a subscribe\r\n * function.\r\n */\r\nclass ObserverProxy {\r\n    /**\r\n     * @param executor Function which can make calls to a single Observer\r\n     *     as a proxy.\r\n     * @param onNoObservers Callback when count of Observers goes to zero.\r\n     */\r\n    constructor(executor, onNoObservers) {\r\n        this.observers = [];\r\n        this.unsubscribes = [];\r\n        this.observerCount = 0;\r\n        // Micro-task scheduling by calling task.then().\r\n        this.task = Promise.resolve();\r\n        this.finalized = false;\r\n        this.onNoObservers = onNoObservers;\r\n        // Call the executor asynchronously so subscribers that are called\r\n        // synchronously after the creation of the subscribe function\r\n        // can still receive the very first value generated in the executor.\r\n        this.task\r\n            .then(() => {\r\n            executor(this);\r\n        })\r\n            .catch(e => {\r\n            this.error(e);\r\n        });\r\n    }\r\n    next(value) {\r\n        this.forEachObserver((observer) => {\r\n            observer.next(value);\r\n        });\r\n    }\r\n    error(error) {\r\n        this.forEachObserver((observer) => {\r\n            observer.error(error);\r\n        });\r\n        this.close(error);\r\n    }\r\n    complete() {\r\n        this.forEachObserver((observer) => {\r\n            observer.complete();\r\n        });\r\n        this.close();\r\n    }\r\n    /**\r\n     * Subscribe function that can be used to add an Observer to the fan-out list.\r\n     *\r\n     * - We require that no event is sent to a subscriber sychronously to their\r\n     *   call to subscribe().\r\n     */\r\n    subscribe(nextOrObserver, error, complete) {\r\n        let observer;\r\n        if (nextOrObserver === undefined &&\r\n            error === undefined &&\r\n            complete === undefined) {\r\n            throw new Error('Missing Observer.');\r\n        }\r\n        // Assemble an Observer object when passed as callback functions.\r\n        if (implementsAnyMethods(nextOrObserver, [\r\n            'next',\r\n            'error',\r\n            'complete'\r\n        ])) {\r\n            observer = nextOrObserver;\r\n        }\r\n        else {\r\n            observer = {\r\n                next: nextOrObserver,\r\n                error,\r\n                complete\r\n            };\r\n        }\r\n        if (observer.next === undefined) {\r\n            observer.next = noop;\r\n        }\r\n        if (observer.error === undefined) {\r\n            observer.error = noop;\r\n        }\r\n        if (observer.complete === undefined) {\r\n            observer.complete = noop;\r\n        }\r\n        const unsub = this.unsubscribeOne.bind(this, this.observers.length);\r\n        // Attempt to subscribe to a terminated Observable - we\r\n        // just respond to the Observer with the final error or complete\r\n        // event.\r\n        if (this.finalized) {\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            this.task.then(() => {\r\n                try {\r\n                    if (this.finalError) {\r\n                        observer.error(this.finalError);\r\n                    }\r\n                    else {\r\n                        observer.complete();\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // nothing\r\n                }\r\n                return;\r\n            });\r\n        }\r\n        this.observers.push(observer);\r\n        return unsub;\r\n    }\r\n    // Unsubscribe is synchronous - we guarantee that no events are sent to\r\n    // any unsubscribed Observer.\r\n    unsubscribeOne(i) {\r\n        if (this.observers === undefined || this.observers[i] === undefined) {\r\n            return;\r\n        }\r\n        delete this.observers[i];\r\n        this.observerCount -= 1;\r\n        if (this.observerCount === 0 && this.onNoObservers !== undefined) {\r\n            this.onNoObservers(this);\r\n        }\r\n    }\r\n    forEachObserver(fn) {\r\n        if (this.finalized) {\r\n            // Already closed by previous event....just eat the additional values.\r\n            return;\r\n        }\r\n        // Since sendOne calls asynchronously - there is no chance that\r\n        // this.observers will become undefined.\r\n        for (let i = 0; i < this.observers.length; i++) {\r\n            this.sendOne(i, fn);\r\n        }\r\n    }\r\n    // Call the Observer via one of it's callback function. We are careful to\r\n    // confirm that the observe has not been unsubscribed since this asynchronous\r\n    // function had been queued.\r\n    sendOne(i, fn) {\r\n        // Execute the callback asynchronously\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this.task.then(() => {\r\n            if (this.observers !== undefined && this.observers[i] !== undefined) {\r\n                try {\r\n                    fn(this.observers[i]);\r\n                }\r\n                catch (e) {\r\n                    // Ignore exceptions raised in Observers or missing methods of an\r\n                    // Observer.\r\n                    // Log error to console. b/31404806\r\n                    if (typeof console !== 'undefined' && console.error) {\r\n                        console.error(e);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    close(err) {\r\n        if (this.finalized) {\r\n            return;\r\n        }\r\n        this.finalized = true;\r\n        if (err !== undefined) {\r\n            this.finalError = err;\r\n        }\r\n        // Proxy is no longer needed - garbage collect references\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this.task.then(() => {\r\n            this.observers = undefined;\r\n            this.onNoObservers = undefined;\r\n        });\r\n    }\r\n}\r\n/** Turn synchronous function into one called asynchronously. */\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nfunction async(fn, onError) {\r\n    return (...args) => {\r\n        Promise.resolve(true)\r\n            .then(() => {\r\n            fn(...args);\r\n        })\r\n            .catch((error) => {\r\n            if (onError) {\r\n                onError(error);\r\n            }\r\n        });\r\n    };\r\n}\r\n/**\r\n * Return true if the object passed in implements any of the named methods.\r\n */\r\nfunction implementsAnyMethods(obj, methods) {\r\n    if (typeof obj !== 'object' || obj === null) {\r\n        return false;\r\n    }\r\n    for (const method of methods) {\r\n        if (method in obj && typeof obj[method] === 'function') {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction noop() {\r\n    // do nothing\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Check to make sure the appropriate number of arguments are provided for a public function.\r\n * Throws an error if it fails.\r\n *\r\n * @param fnName The function name\r\n * @param minCount The minimum number of arguments to allow for the function call\r\n * @param maxCount The maximum number of argument to allow for the function call\r\n * @param argCount The actual number of arguments provided.\r\n */\r\nconst validateArgCount = function (fnName, minCount, maxCount, argCount) {\r\n    let argError;\r\n    if (argCount < minCount) {\r\n        argError = 'at least ' + minCount;\r\n    }\r\n    else if (argCount > maxCount) {\r\n        argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\r\n    }\r\n    if (argError) {\r\n        const error = fnName +\r\n            ' failed: Was called with ' +\r\n            argCount +\r\n            (argCount === 1 ? ' argument.' : ' arguments.') +\r\n            ' Expects ' +\r\n            argError +\r\n            '.';\r\n        throw new Error(error);\r\n    }\r\n};\r\n/**\r\n * Generates a string to prefix an error message about failed argument validation\r\n *\r\n * @param fnName The function name\r\n * @param argName The name of the argument\r\n * @return The prefix to add to the error thrown for validation.\r\n */\r\nfunction errorPrefix(fnName, argName) {\r\n    return `${fnName} failed: ${argName} argument `;\r\n}\r\n/**\r\n * @param fnName\r\n * @param argumentNumber\r\n * @param namespace\r\n * @param optional\r\n */\r\nfunction validateNamespace(fnName, namespace, optional) {\r\n    if (optional && !namespace) {\r\n        return;\r\n    }\r\n    if (typeof namespace !== 'string') {\r\n        //TODO: I should do more validation here. We only allow certain chars in namespaces.\r\n        throw new Error(errorPrefix(fnName, 'namespace') + 'must be a valid firebase namespace.');\r\n    }\r\n}\r\nfunction validateCallback(fnName, argumentName, \r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\ncallback, optional) {\r\n    if (optional && !callback) {\r\n        return;\r\n    }\r\n    if (typeof callback !== 'function') {\r\n        throw new Error(errorPrefix(fnName, argumentName) + 'must be a valid function.');\r\n    }\r\n}\r\nfunction validateContextObject(fnName, argumentName, context, optional) {\r\n    if (optional && !context) {\r\n        return;\r\n    }\r\n    if (typeof context !== 'object' || context === null) {\r\n        throw new Error(errorPrefix(fnName, argumentName) + 'must be a valid context object.');\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\r\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\r\n// so it's been modified.\r\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\r\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\r\n// use 2 characters in Javascript.  All 4-byte UTF-8 characters begin with a first\r\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\r\n// pair).\r\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\r\n/**\r\n * @param {string} str\r\n * @return {Array}\r\n */\r\nconst stringToByteArray = function (str) {\r\n    const out = [];\r\n    let p = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        let c = str.charCodeAt(i);\r\n        // Is this the lead surrogate in a surrogate pair?\r\n        if (c >= 0xd800 && c <= 0xdbff) {\r\n            const high = c - 0xd800; // the high 10 bits.\r\n            i++;\r\n            assert(i < str.length, 'Surrogate pair missing trail surrogate.');\r\n            const low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\r\n            c = 0x10000 + (high << 10) + low;\r\n        }\r\n        if (c < 128) {\r\n            out[p++] = c;\r\n        }\r\n        else if (c < 2048) {\r\n            out[p++] = (c >> 6) | 192;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else if (c < 65536) {\r\n            out[p++] = (c >> 12) | 224;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else {\r\n            out[p++] = (c >> 18) | 240;\r\n            out[p++] = ((c >> 12) & 63) | 128;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n    }\r\n    return out;\r\n};\r\n/**\r\n * Calculate length without actually converting; useful for doing cheaper validation.\r\n * @param {string} str\r\n * @return {number}\r\n */\r\nconst stringLength = function (str) {\r\n    let p = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        const c = str.charCodeAt(i);\r\n        if (c < 128) {\r\n            p++;\r\n        }\r\n        else if (c < 2048) {\r\n            p += 2;\r\n        }\r\n        else if (c >= 0xd800 && c <= 0xdbff) {\r\n            // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\r\n            p += 4;\r\n            i++; // skip trail surrogate.\r\n        }\r\n        else {\r\n            p += 3;\r\n        }\r\n    }\r\n    return p;\r\n};\n\n/**\r\n * @license\r\n * Copyright 2022 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Copied from https://stackoverflow.com/a/2117523\r\n * Generates a new uuid.\r\n * @public\r\n */\r\nconst uuidv4 = function () {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n        const r = (Math.random() * 16) | 0, v = c === 'x' ? r : (r & 0x3) | 0x8;\r\n        return v.toString(16);\r\n    });\r\n};\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The amount of milliseconds to exponentially increase.\r\n */\r\nconst DEFAULT_INTERVAL_MILLIS = 1000;\r\n/**\r\n * The factor to backoff by.\r\n * Should be a number greater than 1.\r\n */\r\nconst DEFAULT_BACKOFF_FACTOR = 2;\r\n/**\r\n * The maximum milliseconds to increase to.\r\n *\r\n * <p>Visible for testing\r\n */\r\nconst MAX_VALUE_MILLIS = 4 * 60 * 60 * 1000; // Four hours, like iOS and Android.\r\n/**\r\n * The percentage of backoff time to randomize by.\r\n * See\r\n * http://go/safe-client-behavior#step-1-determine-the-appropriate-retry-interval-to-handle-spike-traffic\r\n * for context.\r\n *\r\n * <p>Visible for testing\r\n */\r\nconst RANDOM_FACTOR = 0.5;\r\n/**\r\n * Based on the backoff method from\r\n * https://github.com/google/closure-library/blob/master/closure/goog/math/exponentialbackoff.js.\r\n * Extracted here so we don't need to pass metadata and a stateful ExponentialBackoff object around.\r\n */\r\nfunction calculateBackoffMillis(backoffCount, intervalMillis = DEFAULT_INTERVAL_MILLIS, backoffFactor = DEFAULT_BACKOFF_FACTOR) {\r\n    // Calculates an exponentially increasing value.\r\n    // Deviation: calculates value from count and a constant interval, so we only need to save value\r\n    // and count to restore state.\r\n    const currBaseValue = intervalMillis * Math.pow(backoffFactor, backoffCount);\r\n    // A random \"fuzz\" to avoid waves of retries.\r\n    // Deviation: randomFactor is required.\r\n    const randomWait = Math.round(\r\n    // A fraction of the backoff value to add/subtract.\r\n    // Deviation: changes multiplication order to improve readability.\r\n    RANDOM_FACTOR *\r\n        currBaseValue *\r\n        // A random float (rounded to int by Math.round above) in the range [-1, 1]. Determines\r\n        // if we add or subtract.\r\n        (Math.random() - 0.5) *\r\n        2);\r\n    // Limits backoff to max to avoid effectively permanent backoff.\r\n    return Math.min(MAX_VALUE_MILLIS, currBaseValue + randomWait);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provide English ordinal letters after a number\r\n */\r\nfunction ordinal(i) {\r\n    if (!Number.isFinite(i)) {\r\n        return `${i}`;\r\n    }\r\n    return i + indicator(i);\r\n}\r\nfunction indicator(i) {\r\n    i = Math.abs(i);\r\n    const cent = i % 100;\r\n    if (cent >= 10 && cent <= 20) {\r\n        return 'th';\r\n    }\r\n    const dec = i % 10;\r\n    if (dec === 1) {\r\n        return 'st';\r\n    }\r\n    if (dec === 2) {\r\n        return 'nd';\r\n    }\r\n    if (dec === 3) {\r\n        return 'rd';\r\n    }\r\n    return 'th';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getModularInstance(service) {\r\n    if (service && service._delegate) {\r\n        return service._delegate;\r\n    }\r\n    else {\r\n        return service;\r\n    }\r\n}\n\nexport { CONSTANTS, DecodeBase64StringError, Deferred, ErrorFactory, FirebaseError, MAX_VALUE_MILLIS, RANDOM_FACTOR, Sha1, areCookiesEnabled, assert, assertionError, async, base64, base64Decode, base64Encode, base64urlEncodeWithoutPadding, calculateBackoffMillis, contains, createMockUserToken, createSubscribe, decode, deepCopy, deepEqual, deepExtend, errorPrefix, extractQuerystring, getDefaultAppConfig, getDefaultEmulatorHost, getDefaultEmulatorHostnameAndPort, getDefaults, getExperimentalSetting, getGlobal, getModularInstance, getUA, isAdmin, isBrowser, isBrowserExtension, isElectron, isEmpty, isIE, isIndexedDBAvailable, isMobileCordova, isNode, isNodeSdk, isReactNative, isSafari, isUWP, isValidFormat, isValidTimestamp, isWebWorker, issuedAtTime, jsonEval, map, ordinal, promiseWithTimeout, querystring, querystringDecode, safeGet, stringLength, stringToByteArray, stringify, uuidv4, validateArgCount, validateCallback, validateContextObject, validateIndexedDBOpenable, validateNamespace };\n//# sourceMappingURL=index.esm2017.js.map\n","export default __webpack_public_path__ + \"static/profile2-1a4fccd05f315783340d7877b0379a61.jpg\";","import React from \"react\";\nimport { content } from \"../../types\";\nconst AccordionItem = ({\n  title,\n  children,\n  index,\n  currentTab,\n  accodionClickHandler,\n}: {\n  title: string;\n  children: content[];\n  index: number;\n  currentTab: number;\n  accodionClickHandler: (index: number) => void;\n}) => {\n  return (\n    <div className=\"accordion-item\">\n      <h5 className=\"accordion-header m-0\" id=\"headingProjectFour\">\n        <button\n          onClick={(e) => {\n            accodionClickHandler(index);\n          }}\n          className={`accordion-button fw-semibold ${\n            currentTab !== index ? \"collapsed\" : \"\"\n          }`}\n          type=\"button\"\n          data-bs-toggle=\"collapse\"\n          data-bs-target=\"#collapseProjectFour\"\n          aria-expanded=\"false\"\n          aria-controls=\"collapseProjectFour\"\n        >\n          {title}\n        </button>\n      </h5>\n      <div\n        id=\"collapseProjectFour\"\n        className={`accordion-collapse collapse ${\n          currentTab === index ? \"show\" : \"\"\n        }`}\n        aria-labelledby=\"headingProjectFour\"\n        data-bs-parent=\"#accordionFront\"\n      >\n        <div className=\"accordion-body\">\n          <ul>\n            {children &&\n              children.length > 0 &&\n              children.map((child, index) => {\n                return (\n                  <li key={index}>\n                    {child.link ? (\n                      <a href={child.link}>{child.content}</a>\n                    ) : (\n                      child.content\n                    )}\n                  </li>\n                );\n              })}\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AccordionItem;\n","import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { content, tab } from \"../../types\";\nimport AccordionItem from \"../common/AccordionItem\";\n\nconst Web = () => {\n  const [hosturl, setHosturl] = useState(\"\");\n  const [epubUrl, setEpubFile] = useState(\"\");\n  const [pdfUrl, setPdfFile] = useState(\"\");\n\n  const [currentTab, setCurrentTab] = useState(-1);\n\n  const [tabList, setTabList] = useState<tab[]>([]);\n  useEffect(() => {\n    if (window) {\n      setHosturl(window.location.host);\n    }\n\n    setTabList([\n      {\n        title: \" \",\n        contentList: [\n          {\n            content: \"epub\",\n            link:\n              hosturl +\n              \"/EbookViewer/epub/web/desktop-viewer.html?epub=\" +\n              epubUrl,\n          },\n          {\n            content: \"pdf\",\n            link:\n              hosturl + \"/EbookViewer/pdf/web/pdf-viewer.html?file=\" + pdfUrl,\n          },\n        ],\n      },\n\n      {\n        title: \"   (Web view)\",\n        contentList: [\n          {\n            content: \" -     (80%)\",\n          },\n          {\n            content:\n              \" - () (javascript ,.NET5 , MSSQL, Azure SignalR) (60%)\",\n          },\n        ],\n      },\n\n      {\n        title: \"Du.Plus  (nextjs)\",\n        contentList: [\n          {\n            content: \"du.plus E-Book PC  [EPUB, PDF] (100%)\",\n          },\n          {\n            content: \"App(Web View)   [EPUB, PDF] (50%)\",\n          },\n          {\n            content: \"(next.js)   (20%)\",\n          },\n        ],\n      },\n\n      {\n        title: \"OOZI  \",\n        contentList: [\n          {\n            content: \"OOZI   (API ) .NET REST API (80%)\",\n          },\n        ],\n      },\n    ]);\n  }, []);\n\n  const accodionClickHandler = (e: any) => {\n    setCurrentTab(e === currentTab ? -1 : e);\n  };\n\n  return (\n    <div className=\"tab-pane p-3 active\" id=\"front\" role=\"tabpanel\">\n      <div className=\"row\">\n        <div className=\"col-12\">\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h6 className=\"font-15 fw-bold d-block mt-1 mb-1\">\n                 \n              </h6>\n            </div>\n            <div className=\"card-body\">\n              <div className=\"accordion\" id=\"accordionFront\">\n                {tabList &&\n                  tabList.length > 0 &&\n                  tabList.map((tab, index) => {\n                    return (\n                      <AccordionItem\n                        title={tab.title}\n                        children={tab.contentList}\n                        accodionClickHandler={accodionClickHandler}\n                        index={index}\n                        key={index}\n                        currentTab={currentTab}\n                      />\n                    );\n                  })}\n                {/* <div className=\"accordion-item\">\n                  <h5 className=\"accordion-header m-0\" id=\"headingProjectOne\">\n                    <button\n                      onClick={(e) => {\n                        accodionClickHandler(0);\n                      }}\n                      className={`accordion-button fw-semibold ${\n                        currentTab !== 0 ? \"collapsed\" : \"\"\n                      }`}\n                      type=\"button\"\n                      data-bs-toggle=\"collapse\"\n                      data-bs-target=\"#collapseProjectOne\"\n                      aria-expanded=\"false\"\n                      aria-controls=\"collapseProjectOne\"\n                    >\n                       \n                    </button>\n                  </h5>\n                  {hosturl && (\n                    <div\n                      id=\"collapseProjectOne\"\n                      className={`accordion-collapse collapse ${\n                        currentTab === 0 ? \"show\" : \"\"\n                      }`}\n                      aria-labelledby=\"headingProjectOne\"\n                      data-bs-parent=\"#accordionFront\"\n                    >\n                      <div className=\"accordion-body\">\n                        <ul>\n                          <li>\n                            epub :{\" \"}\n                            <a\n                              href={\n                                hosturl +\n                                \"/EbookViewer/epub/web/desktop-viewer.html?epub=\" +\n                                epubUrl\n                              }\n                            >\n                              {\" \"}\n                               \n                            </a>\n                          </li>\n                          <li>\n                            PDF :{\" \"}\n                            <a\n                              href={\n                                hosturl +\n                                \"/EbookViewer/pdf/web/pdf-viewer.html?file=\" +\n                                pdfUrl\n                              }\n                            >\n                              {\" \"}\n                               \n                            </a>\n                          </li>\n                        </ul>\n                      </div>\n                    </div>\n                  )}\n                </div>\n                <div className=\"accordion-item\">\n                  <h5 className=\"accordion-header m-0\" id=\"headingProjectTwo\">\n                    <button\n                      onClick={(e) => {\n                        accodionClickHandler(1);\n                      }}\n                      className={`accordion-button fw-semibold ${\n                        currentTab !== 1 ? \"collapsed\" : \"\"\n                      }`}\n                      type=\"button\"\n                      data-bs-toggle=\"collapse\"\n                      data-bs-target=\"#collapseProjectTwo\"\n                      aria-expanded=\"false\"\n                      aria-controls=\"collapseProjectTwo\"\n                    >\n                         (Web View)\n                    </button>\n                  </h5>\n                  <div\n                    id=\"collapseProjectTwo\"\n                    className={`accordion-collapse collapse ${\n                      currentTab === 1 ? \"show\" : \"\"\n                    }`}\n                    aria-labelledby=\"headingProjectTwo\"\n                    data-bs-parent=\"#accordionFront\"\n                  >\n                    <div className=\"accordion-body\">\n                      <ul>\n                        <li> -     (80%)</li>\n                        <li>\n                           - () (javascript ,.NET5 ,\n                          MSSQL, Azure SignalR) (60%)\n                        </li>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"accordion-item\">\n                  <h5 className=\"accordion-header m-0\" id=\"headingProjectThree\">\n                    <button\n                      onClick={(e) => {\n                        accodionClickHandler(2);\n                      }}\n                      className={`accordion-button fw-semibold ${\n                        currentTab !== 2 ? \"collapsed\" : \"\"\n                      }`}\n                      type=\"button\"\n                      data-bs-toggle=\"collapse\"\n                      data-bs-target=\"#collapseProjectThree\"\n                      aria-expanded=\"false\"\n                      aria-controls=\"collapseProjectThree\"\n                    >\n                      Du.Plus  (nextjs)\n                    </button>\n                  </h5>\n                  <div\n                    id=\"collapseProjectThree\"\n                    className={`accordion-collapse collapse ${\n                      currentTab === 2 ? \"show\" : \"\"\n                    }`}\n                    aria-labelledby=\"headingProjectThree\"\n                    data-bs-parent=\"#accordionFront\"\n                  >\n                    <div className=\"accordion-body\">\n                      <ul>\n                        <li>du.plus E-Book PC  [EPUB, PDF] (100%)</li>\n                        <li>App(Web View)   [EPUB, PDF] (50%)</li>\n                        <li>(next.js)   (20%)</li>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"accordion-item\">\n                  <h5 className=\"accordion-header m-0\" id=\"headingProjectFour\">\n                    <button\n                      onClick={(e) => {\n                        accodionClickHandler(3);\n                      }}\n                      className={`accordion-button fw-semibold ${\n                        currentTab !== 3 ? \"collapsed\" : \"\"\n                      }`}\n                      type=\"button\"\n                      data-bs-toggle=\"collapse\"\n                      data-bs-target=\"#collapseProjectFour\"\n                      aria-expanded=\"false\"\n                      aria-controls=\"collapseProjectFour\"\n                    >\n                      OOZI  \n                    </button>\n                  </h5>\n                  <div\n                    id=\"collapseProjectFour\"\n                    className={`accordion-collapse collapse ${\n                      currentTab === 3 ? \"show\" : \"\"\n                    }`}\n                    aria-labelledby=\"headingProjectFour\"\n                    data-bs-parent=\"#accordionFront\"\n                  >\n                    <div className=\"accordion-body\">\n                      <ul>\n                        <li>\n                          OOZI   (API ) .NET REST API (80%)\n                        </li>\n                      </ul>\n                    </div>\n                  </div>\n                </div> */}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Web;\n","import React, { useEffect, useState } from \"react\";\ndeclare const naver: any;\n\nconst Info = () => {\n  const [highSchoolMap, setHighSchoolMap] = useState<any>(null);\n  const [universityMap, setUniversityMap] = useState<any>(null);\n  useEffect(() => {\n    const script = document.createElement(\"script\");\n    script.src =\n      \"https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=b15q7nzk9p\";\n    script.async = true;\n    document.body.appendChild(script);\n\n    script.onload = () => {\n      if (!naver) {\n        return;\n      }\n      setHighSchoolMap(\n        new naver.maps.Map(\"mapHighSchool\", {\n          center: new naver.maps.LatLng(36.7935697, 126.4587419),\n          zoom: 15,\n        })\n      );\n      setUniversityMap(\n        new naver.maps.Map(\"mapUniversity\", {\n          center: new naver.maps.LatLng(36.8374266, 127.1687229),\n          zoom: 15,\n        })\n      );\n    };\n    return () => {\n      if (script) {\n        document.body.removeChild(script);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!highSchoolMap || !universityMap || !naver) {\n      return;\n    }\n    new naver.maps.Marker({\n      position: new naver.maps.LatLng(36.7935697, 126.4587419),\n      map: highSchoolMap,\n    });\n    new naver.maps.Marker({\n      position: new naver.maps.LatLng(36.8374266, 127.1687229),\n      map: universityMap,\n    });\n  }, [highSchoolMap, universityMap]);\n\n  return (\n    <div className=\"tab-pane p-3 active\" role=\"tabpanel\">\n      <div className=\"row\">\n        <div className=\"col-12\">\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h6 className=\"font-15 fw-bold d-block mt-1 mb-1\">\n                  \n              </h6>\n            </div>\n            <div className=\"card-body\">\n              <div className=\"accordion\" id=\"accordionSchool\">\n                <div className=\"row\">\n                  <div className=\"accordion-item col-6\">\n                    <h5\n                      className=\"accordion-header checkout-accordion m-0\"\n                      id=\"headingSchoolTwo\"\n                    >\n                      <button\n                        className=\"accordion-button fw-semibold\"\n                        type=\"button\"\n                        data-bs-toggle=\"collapse\"\n                        data-bs-target=\"#collapseSchoolTwo\"\n                        aria-expanded=\"false\"\n                        aria-controls=\"collapseSchoolTwo\"\n                      >\n                        ()\n                      </button>\n                    </h5>\n                    <div\n                      id=\"collapseSchoolTwo\"\n                      className=\"accordion-collapse collapse show\"\n                      aria-labelledby=\"headingSchoolTwo\"\n                      data-bs-parent=\"#accordionSchool\"\n                    >\n                      <div className=\"accordion-body\">\n                         : <br></br>\n                        <div\n                          id=\"mapUniversity\"\n                          className=\"gmaps\"\n                          style={{\n                            position: \"relative\",\n                            overflow: \"hidden\",\n                            width: \"30vw\",\n                          }}\n                        ></div>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"accordion-item col-6\">\n                    <h5\n                      className=\"accordion-header checkout-accordion m-0\"\n                      id=\"headingSchoolOne\"\n                    >\n                      <button\n                        className=\"accordion-button fw-semibold\"\n                        type=\"button\"\n                        data-bs-toggle=\"collapse\"\n                        data-bs-target=\"#collapseSchoolOne\"\n                        aria-expanded=\"false\"\n                        aria-controls=\"collapseSchoolOne\"\n                      >\n                         \n                      </button>\n                    </h5>\n                    <div\n                      id=\"collapseSchoolOne\"\n                      className=\"accordion-collapse show\"\n                      aria-labelledby=\"headingSchoolOne\"\n                      data-bs-parent=\"#accordionSchool\"\n                    >\n                      <div className=\"accordion-body\">\n                         : <br></br>\n                        <div\n                          id=\"mapHighSchool\"\n                          className=\"gmaps\"\n                          style={{\n                            position: \"relative\",\n                            overflow: \"hidden\",\n                            width: \"30vw\",\n                          }}\n                        ></div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      {/*    */}\n\n      {/*   ! */}\n      <div className=\"row\">\n        <div className=\"col-12\">\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h6 className=\"font-15 fw-bold d-block mt-1 mb-1\">\n                  \n              </h6>\n            </div>\n            <div className=\"card-body\">\n              <div className=\"accordion\" id=\"accordionCertificate\">\n                <div className=\"accordion-item\">\n                  <h5\n                    className=\"accordion-header m-0 checkout-accordion\"\n                    id=\"headingCertificateOne\"\n                  >\n                    <button\n                      className=\"accordion-button fw-semibold collapsed\"\n                      type=\"button\"\n                      data-bs-toggle=\"collapse\"\n                      data-bs-target=\"#collapseCertificateOne\"\n                      aria-expanded=\"false\"\n                      aria-controls=\"collapseCertificateOne\"\n                    >\n                      \n                    </button>\n                  </h5>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      {/*   !  */}\n    </div>\n  );\n};\n\nexport default Info;\n","import React from \"react\";\nconst Introduce = () => {\n  return (\n    <div className=\"tab-pane p-3 active\" id=\"intro\" role=\"tabpanel\">\n      <div className=\"row\">\n        <div className=\"col-12\">\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h6 className=\"font-15 fw-bold d-block mt-1 mb-1\">\n                  \n              </h6>\n            </div>\n            <div className=\"card-body\">\n              <p className=\"font-15 mt-4\">\n                WPF   C#      \n                       WPF \n                    . 2020    .NET\n                Core     (AMOS) .\n                AMOS      OOZI  API \n                 Du.Plus   EPUB, PDF  \n                   , NextJs  \n                .     \n                 , (   )   \n                      .\n              </p>\n            </div>\n          </div>\n\n          <div className=\"row\">\n            <div className=\"col-6\">\n              <div className=\"card\">\n                <div className=\"card-header\">\n                  <h6 className=\"font-15 fw-bold d-block mt-1 mb-1\">\n                     \n                  </h6>\n                </div>\n                <div className=\"card-body\">\n                  <p className=\"font-14 text-muted ms-3\"></p>\n\n                  <p className=\"font-14 text-muted ms-3\"></p>\n\n                  <p className=\"font-14 text-muted ms-3\"></p>\n                </div>\n              </div>\n            </div>\n            <div className=\"col-6\">\n              <div className=\"card\">\n                <div className=\"card-header\">\n                  <h6 className=\"font-15 fw-bold d-block mt-1 mb-1\">\n                     \n                  </h6>\n                </div>\n                <div className=\"card-body\">\n                  <p className=\"font-14 text-muted ms-3\"></p>\n                  <p className=\"font-14 text-muted ms-3\"></p>\n                  <p className=\"font-14 text-muted ms-3\"></p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Introduce;\n","import React, { useEffect, useState } from \"react\";\nimport { tab } from \"../../types\";\nimport AccordionItem from \"../common/AccordionItem\";\n\nconst Dekstop = () => {\n  const [currentTab, setCurrentTab] = useState(-1);\n\n  const [tabList, setTabList] = useState<tab[]>([]);\n  useEffect(() => {\n    setTabList([\n      {\n        title: \" \",\n        contentList: [\n          {\n            content:\n              \"WPF        (100%)\",\n          },\n          {\n            content:\n              \"  API    ,    (100%)\",\n          },\n        ],\n      },\n\n      {\n        title:\n          \"BeeCast(  ) Network Monitoring System \",\n        contentList: [\n          {\n            content: \"BeeCast   (WPF) (100%)\",\n          },\n        ],\n      },\n    ]);\n  }, []);\n\n  const accodionClickHandler = (e: any) => {\n    setCurrentTab(e === currentTab ? -1 : e);\n  };\n\n  return (\n    <div className=\"tab-pane p-3 active\" role=\"tabpanel\">\n      <div className=\"row\">\n        <div className=\"col-12\">\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h6 className=\"font-15 fw-bold d-block mt-1 mb-1\">\n                 \n              </h6>\n            </div>\n            <div className=\"card-body\">\n              <div className=\"accordion\" id=\"accordionDesktop\">\n                {tabList &&\n                  tabList.length > 0 &&\n                  tabList.map((tab, index) => {\n                    return (\n                      <AccordionItem\n                        title={tab.title}\n                        children={tab.contentList}\n                        accodionClickHandler={accodionClickHandler}\n                        index={index}\n                        key={index}\n                        currentTab={currentTab}\n                      />\n                    );\n                  })}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dekstop;\n","//db address : https://bhproject-305102-default-rtdb.asia-southeast1.firebasedatabase.app/\n\nimport { getDatabase, set, ref, get, child, push } from \"@firebase/database\";\nimport { initializeApp } from \"@firebase/app\";\n\n// TODO: Replace the following with your app's Firebase project configuration\n// See: https://firebase.google.com/docs/web/learn-more#config-object\nconst firebaseConfig = {\n  // ...\n  // The value of `databaseURL` depends on the location of the database\n  databaseURL:\n    \"https://bhproject-305102-default-rtdb.asia-southeast1.firebasedatabase.app/\",\n};\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\nexport function setFirebaseData(path: string, data: any) {\n  const nowDate = new Date();\n\n  const database = getDatabase(app);\n  const result = set(ref(database, path + nowDate.getTime()), data);\n  return result;\n}\n\nexport function pushFirebaseData(path: string, data: any) {\n  // Create a new post reference with an auto-generated id\n  const db = getDatabase(app);\n  const postListRef = ref(db, path);\n  const newPostRef = push(postListRef);\n  return set(newPostRef, data);\n}\n\nexport function getFirebaseData(path: string) {\n  const promise = new Promise((resolve, reject) => {\n    const dbRef = ref(getDatabase(app));\n    get(child(dbRef, `${path}`))\n      .then((snapshot) => {\n        if (snapshot.exists()) {\n          resolve({ success: true, data: snapshot.val() });\n          // console.log(snapshot.val());\n          // return snapshot.val();\n        } else {\n          // console.log(\"No data available\");\n          reject({ success: false, data: snapshot.val() });\n        }\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  });\n\n  return promise;\n}\n\nexport function deleteFirebaseData(path: string) {\n  const database = getDatabase(app);\n  const result = set(ref(database, path), null);\n  return result;\n}\n","export function commonIsAdmin() {\n  const cookies = document.cookie;\n  if (cookies.includes(\"qudgus\")) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport default function fetcher(url: string) {\n  return fetch(url).then((r) => r.json());\n}\n\nexport function getBase64(file: File): Promise<string> {\n  let promise: Promise<string> = new Promise((resolve, reject) => {\n    var reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => {\n      if (typeof reader.result !== \"string\") {\n        reject(\"base64  \");\n      } else {\n        return resolve(reader.result);\n      }\n    };\n    reader.onerror = reject;\n  });\n\n  return promise;\n}\n","import { useEffect, useState } from \"react\";\nimport {\n  setFirebaseData,\n  getFirebaseData,\n  pushFirebaseData,\n  deleteFirebaseData,\n} from \"../../../utils/firebase\";\nimport { commonIsAdmin } from \"../../../utils/common\";\nimport React from \"react\";\nexport default function TraceBasic({ Name, Contents, Date, key }: any) {\n  const deleteTrace = () => {\n    deleteFirebaseData(\"/traces/\" + key);\n  };\n\n  const [isAdmin, setIsAdmin] = useState(false);\n  useEffect(() => {\n    setIsAdmin(commonIsAdmin());\n  }, []);\n\n  return (\n    <>\n      <div\n        className=\"alert alert-primary alert-dismissible fade show border-0 b-round\"\n        role=\"alert\"\n      >\n        <strong>{Name ? Name : \"unknown\"}</strong> : {Contents} | {Date}\n        {isAdmin && (\n          <button\n            type=\"button\"\n            className=\"btn-close\"\n            aria-label=\"Close\"\n            onClick={(e) => {\n              deleteTrace();\n            }}\n          ></button>\n        )}\n      </div>\n    </>\n  );\n}\n","import React from \"react\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport {\n  setFirebaseData,\n  getFirebaseData,\n  pushFirebaseData,\n  deleteFirebaseData,\n} from \"../../../utils/firebase\";\nimport TraceBasic from \"../components/TraceBasic\";\nexport default function TraceList() {\n  const [data, setData] = useState<any>([]);\n  useEffect(() => {\n    const traceData = getFirebaseData(\"traces/\").then((res: any) => {\n      if (res && res.success) {\n        let keys = Object.keys(res.data);\n        let data = Object.values(res.data);\n        let tempData = [];\n        let index = 0;\n        for (let item of data as any) {\n          item.key = keys[index];\n          tempData.push(item);\n          index++;\n        }\n        setData(tempData);\n      }\n    });\n  }, []);\n\n  return (\n    <>\n      <div className=\"row\" style={{ marginTop: \"10px\" }}>\n        <div className=\"col-lg-12\">\n          <div className=\"card\">\n            <div className=\"card-body\">\n              {data &&\n                data.length > 0 &&\n                data.map((item: any) => {\n                  return (\n                    <TraceBasic\n                      Name={item.name}\n                      Contents={item.contents}\n                      Date={item.date}\n                      key={item.key}\n                    ></TraceBasic>\n                  );\n                })}\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","import React from \"react\";\nimport TraceHeader from \"../organisms/TraceHeader\";\nimport TraceList from \"../organisms/TraceList\";\nexport default function TraceMainView() {\n  return (\n    <>\n      {/* <TraceHeader></TraceHeader> */}\n      <TraceList></TraceList>\n    </>\n  );\n}\n","import React from \"react\";\nimport TraceMainView from \"./template/TraceMainView\";\n\nexport default function TraceIndexPage() {\n  return <TraceMainView></TraceMainView>;\n}\n","import { useEffect, useState } from \"react\";\nimport React from \"react\";\nimport {\n  setFirebaseData,\n  getFirebaseData,\n  pushFirebaseData,\n  deleteFirebaseData,\n} from \"../../../utils/firebase\";\nimport { commonIsAdmin } from \"../../../utils/common\";\nexport default function BlogContent({ data }: any) {\n  const [isAdmin, setIsAdmin] = useState(false);\n  useEffect(() => {\n    setIsAdmin(commonIsAdmin());\n  }, []);\n\n  const deleteBlog = (key: string) => {\n    deleteFirebaseData(\"/blogs/\" + key);\n  };\n  return (\n    <>\n      <div className=\"col-lg-4\">\n        <div className=\"card\">\n          <div className=\"card-body\">\n            <div className=\"blog-card\">\n              <img\n                src={data.image ? data.image : \"/images/profile.png\"}\n                alt=\"\"\n                className=\"img-fluid rounded\"\n                style={{ height: \"250px\", margin: \"0 auto\" }}\n              ></img>\n              <h4 className=\"my-3\">\n                <a href=\"\" className=\"\">\n                  {data.subject}\n                </a>\n              </h4>\n              <p className=\"text-muted\">{data.description}</p>\n              {/* <hr className=\"hr-dashed\"></hr>\n                        <div className=\"d-flex justify-content-between\">\n                            <div className=\"meta-box\">\n                                <div className=\"media\">\n                                    <img src=\"assets/images/users/user-5.jpg\" alt=\"\" className=\"thumb-sm rounded-circle me-2\"></img>\n                                    <div className=\"media-body align-self-center text-truncate\">\n                                        <h6 className=\"m-0 text-dark\">Donald Gardner</h6>\n                                        <ul className=\"p-0 list-inline mb-0\">\n                                            <li className=\"list-inline-item\">26 mars 2020</li>\n                                            <li className=\"list-inline-item\">by <a href=\"\">admin</a></li>\n                                        </ul>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"align-self-center\">\n                                <a href=\"#\" className=\"text-dark\">Read more <i className=\"fas fa-long-arrow-alt-right\"></i></a>\n                            </div>\n                        </div> */}\n              {isAdmin && (\n                <button\n                  type=\"button\"\n                  className=\"btn-close\"\n                  aria-label=\"Close\"\n                  onClick={(e) => {\n                    deleteBlog(data.key);\n                  }}\n                ></button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport React from \"react\";\nimport { getFirebaseData } from \"../../../utils/firebase\";\nimport BlogContent from \"../components/BlogContent\";\n\nexport default function BlogContentList() {\n  const [data, setData] = useState<any>([]);\n  useEffect(() => {\n    const blogData = getFirebaseData(\"blogs/\").then((res: any) => {\n      if (res && res.success) {\n        let data = Object.values(res.data);\n        let keys = Object.keys(res.data);\n        let tempData = [];\n        let resultData = [];\n        let index = 0;\n        for (let item of data as any) {\n          item.key = keys[index];\n          tempData.push(item);\n          index++;\n\n          if (tempData.length == 3) {\n            resultData.push(tempData);\n            tempData = [];\n          }\n          if (index == data.length && tempData.length > 0) {\n            resultData.push(tempData);\n          }\n        }\n        setData(resultData);\n      }\n    });\n    // readFile(\"blog.json\").then((res) => {\n    //     if (res && res.length > 0) {\n    //         let tempData = [];\n    //         let resultData = [];\n    //         let index = 0;\n    //         for (let item of res) {\n    //             tempData.push(item);\n    //             index++;\n\n    //             if (tempData.length == 3) {\n    //                 resultData.push(tempData);\n    //                 tempData = [];\n    //             }\n    //             if (index == res.length && tempData.length > 0) {\n    //                 resultData.push(tempData);\n    //             }\n    //         }\n    //         setData(resultData);\n    //     }\n    // });\n  }, []);\n\n  return (\n    <div style={{ marginTop: \"10px\" }}>\n      {data &&\n        data.length > 0 &&\n        data.map((rowItem: any, rowIndex: number) => {\n          return (\n            <div key={rowIndex} className=\"row\">\n              {rowItem.map((item: any, itemIndex: number) => {\n                return <BlogContent data={item} key={itemIndex}></BlogContent>;\n              })}\n            </div>\n          );\n        })}\n    </div>\n  );\n}\n","import React from \"react\";\nimport BlogHeader from \"../organisms/BlogHeader\";\nimport BlogContentList from \"../organisms/BlogContentList\";\nexport default function BlogMainView() {\n  return (\n    <>\n      <BlogContentList></BlogContentList>\n    </>\n  );\n}\n","import React from \"react\";\nimport BlogMainView from \"./template/BlogMainView\";\n\nexport default function BlogIndexPage() {\n  return (\n    <>\n      <BlogMainView></BlogMainView>\n    </>\n  );\n}\n","import React from \"react\";\nimport { useState } from \"react\";\nimport { getBase64 } from \"../../../utils/common\";\nimport { useRouter } from \"next/router\";\nimport {\n  setFirebaseData,\n  getFirebaseData,\n  pushFirebaseData,\n} from \"../../../utils/firebase\";\nexport default function BlogWriteView() {\n  const [imgSrc, setImgSrc] = useState(\"\");\n  const [subject, setSubject] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n\n  const router = useRouter();\n\n  const handleChange = (e: any) => {\n    let file = e.target.files[0];\n    let reader = getBase64(file);\n    reader.then((result) => {\n      setImgSrc(result);\n    });\n  };\n\n  const writeComplete = () => {\n    pushFirebaseData(\"blogs/\", {\n      subject: subject,\n      description: description,\n      image: imgSrc,\n    }).then((res) => {\n    });\n  };\n  return (\n    <div className=\"row\">\n      <div className=\"card\">\n        <div className=\"card-header\">\n          <div className=\"float-end\">\n            {/* <ol className=\"breadcrumb\">\n                            <li className=\"breadcrumb-item active\">Blogs</li>\n                        </ol> */}\n            <button\n              type=\"button\"\n              className=\"btn btn-de-dark\"\n              onClick={writeComplete}\n            >\n              \n            </button>\n          </div>\n          <h4\n            className=\"card-title\"\n            style={{ fontSize: \"30px\", marginTop: \"10px\" }}\n          >\n             \n          </h4>\n          {/* <p className=\"text-muted mb-0\"></p> */}\n        </div>\n\n        <div className=\"card-body\">\n          <form>\n            <div className=\"mb-3\">\n              <label htmlFor=\"exampleFormControlInput1\"></label>\n              <input\n                type=\"\"\n                className=\"form-control\"\n                id=\"exampleFormControlInput1\"\n                onChange={(e) => {\n                  setSubject(e.target.value);\n                }}\n              ></input>\n            </div>\n            {/* <div className=\"mb-3\">\n                                <label htmlFor=\"exampleFormControlSelect1\"></label>\n                                <select className=\"form-select\" id=\"exampleFormControlSelect1\">\n                                    <option>1</option>\n                                    <option>2</option>\n                                    <option>3</option>\n                                    <option>4</option>\n                                    <option>5</option>\n                                </select>\n                            </div>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"exampleFormControlSelect2\">Example multiple select</label>\n                                <select multiple=\"\" className=\"form-select\" id=\"exampleFormControlSelect2\">\n                                    <option>1</option>\n                                    <option>2</option>\n                                    <option>3</option>\n                                    <option>4</option>\n                                    <option>5</option>\n                                </select>\n                            </div> */}\n            <div className=\"\">\n              <label htmlFor=\"exampleFormControlTextarea1\"></label>\n              <textarea\n                onChange={(e) => {\n                  setDescription(e.target.value);\n                }}\n                className=\"form-control\"\n                id=\"exampleFormControlTextarea1\"\n                rows={3}\n              ></textarea>\n            </div>\n\n            <img style={{ maxWidth: \"400px\" }} src={imgSrc}></img>\n\n            <div className=\"d-grid\">\n              <div className=\"preview-box d-block justify-content-center rounded shadow overflow-hidden bg-light p-1\"></div>\n              <input\n                type=\"file\"\n                id=\"input-file\"\n                name=\"input-file\"\n                accept=\"image/*\"\n                onChange={handleChange}\n              ></input>\n              <label\n                className=\"btn-upload btn btn-primary mt-4\"\n                htmlFor=\"input-file\"\n              >\n                Upload Image\n              </label>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport BlogWriteView from \"./template/BlogWriteView\";\nexport default function BlogWritePage() {\n  return (\n    <>\n      <BlogWriteView></BlogWriteView>\n    </>\n  );\n}\n","import { useRouter } from \"next/router\";\nimport { useState } from \"react\";\nimport React from \"react\";\n\nimport {\n  setFirebaseData,\n  getFirebaseData,\n  pushFirebaseData,\n} from \"../../../utils/firebase\";\nimport { getBase64 } from \"../../../utils/common\";\nexport default function TraceWriteView() {\n  const [name, setName] = useState(\"\");\n  const [contents, setContents] = useState(\"\");\n  const [imgSrc, setImgSrc] = useState(\"\");\n  const router = useRouter();\n\n  const handleChange = (e: any) => {\n    let file = e.target.files[0];\n    let reader = getBase64(file);\n    reader.then((result: string) => {\n      setImgSrc(result);\n    });\n  };\n\n  const writeComplete = () => {\n    const today = new Date();\n    pushFirebaseData(\"traces/\", {\n      name: name,\n      contents: contents,\n      date: today.toLocaleString(),\n    }).then((res: any) => {\n    });\n  };\n  return (\n    <>\n      <div className=\"row\">\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <div className=\"float-end\">\n              {/* <ol className=\"breadcrumb\">\n                            <li className=\"breadcrumb-item active\">Blogs</li>\n                        </ol> */}\n              <button\n                type=\"button\"\n                className=\"btn btn-de-dark\"\n                onClick={writeComplete}\n              >\n                \n              </button>\n            </div>\n            <h4\n              className=\"card-title\"\n              style={{ fontSize: \"30px\", marginTop: \"10px\" }}\n            >\n               \n            </h4>\n            {/* <p className=\"text-muted mb-0\"></p> */}\n          </div>\n\n          <div className=\"card-body\">\n            <form>\n              <div className=\"mb-3\">\n                <label htmlFor=\"exampleFormControlInput1\"></label>\n                <input\n                  type=\"\"\n                  className=\"form-control\"\n                  id=\"exampleFormControlInput1\"\n                  onChange={(e) => {\n                    setName(e.target.value);\n                  }}\n                ></input>\n              </div>\n\n              <div className=\"\">\n                <label htmlFor=\"exampleFormControlTextarea1\"></label>\n                <textarea\n                  onChange={(e) => {\n                    setContents(e.target.value);\n                  }}\n                  className=\"form-control\"\n                  id=\"exampleFormControlTextarea1\"\n                  rows={3}\n                ></textarea>\n              </div>\n\n              {/* <img style={{ maxWidth: \"400px\" }} src={imgSrc}></img>\n\n                            <div className=\"d-grid\">\n                                <div className=\"preview-box d-block justify-content-center rounded shadow overflow-hidden bg-light p-1\"></div>\n                                <input type=\"file\" id=\"input-file\" name=\"input-file\" accept=\"image/*\" onChange={handleChange}></input>\n                                <label className=\"btn-upload btn btn-primary mt-4\" htmlFor=\"input-file\">Upload Image</label>\n                            </div> */}\n            </form>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","import React from \"react\";\nimport TraceWriteView from \"./template/TraceWriteView\";\n\nexport default function TraceWritePage() {\n  return (\n    <>\n      <TraceWriteView></TraceWriteView>\n    </>\n  );\n}\n","import React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport profile from \"../images/profile2.jpg\";\nimport Web from \"../components/main-web/Web\";\nimport Info from \"../components/main-my-info/Info\";\nimport Introduce from \"../components/main-introduce/Introduce\";\nimport Dekstop from \"../components/main-desktop/Desktop\";\nimport TraceIndexPage from \"../components/main-guestbook\";\nimport BlogIndexPage from \"../components/main-blog\";\nimport BlogWritePage from \"../components/main-blog/write\";\nimport TraceWritePage from \"../components/main-guestbook/write\";\ndeclare const naver: any;\n\nexport default function IndexPage() {\n  const [currentTab, setCurrentTab] = useState(\"web\");\n\n  return (\n    <div className=\"\">\n      <div className=\"page-content-tab\">\n        <div className=\"container-fluid\" style={{ marginTop: \"20px\" }}>\n          <div className=\"row\">\n            <div className=\"col-12\">\n              <div className=\"card\">\n                <div className=\"card-body\">\n                  <div className=\"met-profile\">\n                    <div className=\"row\">\n                      <div className=\"col-lg-6 align-self-center mb-3 mb-lg-0\">\n                        <div className=\"met-profile-main\">\n                          <div className=\"met-profile-main-pic\">\n                            <img\n                              src={profile}\n                              alt=\"\"\n                              height=\"110\"\n                              className=\"rounded-circle\"\n                            ></img>\n                          </div>\n                          <div className=\"met-profile_user-detail\">\n                            <h5 className=\"met-user-name\">  </h5>\n                            <p className=\"mb-0 met-user-name-post\">\n                              \n                            </p>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"col-lg-6 ms-auto align-self-center\">\n                        <ul className=\"list-unstyled personal-detail mb-0\">\n                          <li className=\"\">\n                            <i className=\"las la-phone mr-2 text-secondary font-22 align-middle\"></i>{\" \"}\n                            <b> phone </b> : 010-2835-3822\n                          </li>\n                          <li className=\"mt-2\">\n                            <i className=\"las la-envelope text-secondary font-22 align-middle mr-2\"></i>{\" \"}\n                            <b> Email </b> : qudgus3822@gmail.com\n                          </li>\n                        </ul>\n                      </div>\n                    </div>\n                  </div>\n                  {/* <button type=\"button\" className=\"btn btn-de-primary float-end\" onClick={() => { router.push(\"/games\") }}></button> */}\n                </div>\n\n                <div className=\"card-body p-0\">\n                  {currentTab === \"blog\" && (\n                    <button\n                      type=\"button\"\n                      className=\"btn btn-de-dark float-end\"\n                      onClick={() => {\n                        setCurrentTab(\"blog-write\");\n                      }}\n                    >\n                      \n                    </button>\n                  )}\n                  {currentTab === \"guestbook\" && (\n                    <button\n                      type=\"button\"\n                      className=\"btn btn-de-dark float-end\"\n                      onClick={() => {\n                        setCurrentTab(\"trace-write\");\n                      }}\n                    >\n                      \n                    </button>\n                  )}\n\n                  <ul className=\"nav nav-tabs\" role=\"tablist\">\n                    <li className=\"nav-item\">\n                      <a\n                        className={`nav-link ${\n                          currentTab === \"web\" ? \"active\" : \"\"\n                        }`}\n                        onClick={() => setCurrentTab(\"web\")}\n                        role=\"tab\"\n                        aria-selected={currentTab === \"web\"}\n                      >\n                        Web\n                      </a>\n                    </li>\n\n                    <li className=\"nav-item\">\n                      <a\n                        className={`nav-link ${\n                          currentTab === \"desktop\" ? \"active\" : \"\"\n                        }`}\n                        onClick={() => setCurrentTab(\"desktop\")}\n                        role=\"tab\"\n                        aria-selected={currentTab === \"desktop\"}\n                      >\n                        desktop\n                      </a>\n                    </li>\n\n                    <li className=\"nav-item\">\n                      <a\n                        className={`nav-link ${\n                          currentTab === \"introduce\" ? \"active\" : \"\"\n                        }`}\n                        onClick={() => setCurrentTab(\"introduce\")}\n                        role=\"tab\"\n                        aria-selected={currentTab === \"introduce\"}\n                      >\n                        \n                      </a>\n                    </li>\n\n                    <li className=\"nav-item\">\n                      <a\n                        className={`nav-link ${\n                          currentTab === \"info\" ? \"active\" : \"\"\n                        }`}\n                        onClick={() => setCurrentTab(\"info\")}\n                        role=\"tab\"\n                        aria-selected={currentTab === \"info\"}\n                      >\n                         \n                      </a>\n                    </li>\n\n                    <li className=\"nav-item\">\n                      <a\n                        className={`nav-link ${\n                          currentTab === \"blog\" ? \"active\" : \"\"\n                        }`}\n                        onClick={() => setCurrentTab(\"blog\")}\n                        role=\"tab\"\n                        aria-selected={currentTab === \"blog\"}\n                      >\n                        \n                      </a>\n                    </li>\n\n                    <li className=\"nav-item\">\n                      <a\n                        className={`nav-link ${\n                          currentTab === \"guestbook\" ? \"active\" : \"\"\n                        }`}\n                        onClick={() => setCurrentTab(\"guestbook\")}\n                        role=\"tab\"\n                        aria-selected={currentTab === \"guestbook\"}\n                      >\n                        \n                      </a>\n                    </li>\n                  </ul>\n                  <div className=\"tab-content\">\n                    {currentTab === \"web\" && <Web />}\n                    {currentTab === \"info\" && <Info />}\n                    {currentTab === \"introduce\" && <Introduce />}\n                    {currentTab === \"desktop\" && <Dekstop />}\n                    {currentTab === \"blog\" && <BlogIndexPage />}\n                    {currentTab === \"guestbook\" && <TraceIndexPage />}\n\n                    {currentTab === \"blog-write\" && <BlogWritePage />}\n                    {currentTab === \"trace-write\" && <TraceWritePage />}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.removePathTrailingSlash = removePathTrailingSlash;\nexports.normalizePathTrailingSlash = void 0;\nfunction removePathTrailingSlash(path) {\n    return path.endsWith('/') && path !== '/' ? path.slice(0, -1) : path;\n}\nconst normalizePathTrailingSlash = process.env.__NEXT_TRAILING_SLASH ? (path)=>{\n    if (/\\.[^/]+\\/?$/.test(path)) {\n        return removePathTrailingSlash(path);\n    } else if (path.endsWith('/')) {\n        return path;\n    } else {\n        return path + '/';\n    }\n} : removePathTrailingSlash;\nexports.normalizePathTrailingSlash = normalizePathTrailingSlash;\n\n//# sourceMappingURL=normalize-trailing-slash.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.cancelIdleCallback = exports.requestIdleCallback = void 0;\nconst requestIdleCallback = typeof self !== 'undefined' && self.requestIdleCallback && self.requestIdleCallback.bind(window) || function(cb) {\n    let start = Date.now();\n    return setTimeout(function() {\n        cb({\n            didTimeout: false,\n            timeRemaining: function() {\n                return Math.max(0, 50 - (Date.now() - start));\n            }\n        });\n    }, 1);\n};\nexports.requestIdleCallback = requestIdleCallback;\nconst cancelIdleCallback = typeof self !== 'undefined' && self.cancelIdleCallback && self.cancelIdleCallback.bind(window) || function(id) {\n    return clearTimeout(id);\n};\nexports.cancelIdleCallback = cancelIdleCallback;\n\n//# sourceMappingURL=request-idle-callback.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.markAssetError = markAssetError;\nexports.isAssetError = isAssetError;\nexports.getClientBuildManifest = getClientBuildManifest;\nexports.getMiddlewareManifest = getMiddlewareManifest;\nexports.createRouteLoader = createRouteLoader;\nvar _getAssetPathFromRoute = _interopRequireDefault(require(\"../shared/lib/router/utils/get-asset-path-from-route\"));\nvar _requestIdleCallback = require(\"./request-idle-callback\");\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n// 3.8s was arbitrarily chosen as it's what https://web.dev/interactive\n// considers as \"Good\" time-to-interactive. We must assume something went\n// wrong beyond this point, and then fall-back to a full page transition to\n// show the user something of value.\nconst MS_MAX_IDLE_DELAY = 3800;\nfunction withFuture(key, map, generator) {\n    let entry = map.get(key);\n    if (entry) {\n        if ('future' in entry) {\n            return entry.future;\n        }\n        return Promise.resolve(entry);\n    }\n    let resolver;\n    const prom = new Promise((resolve)=>{\n        resolver = resolve;\n    });\n    map.set(key, entry = {\n        resolve: resolver,\n        future: prom\n    });\n    return generator ? generator()// eslint-disable-next-line no-sequences\n    .then((value)=>(resolver(value), value)\n    ).catch((err)=>{\n        map.delete(key);\n        throw err;\n    }) : prom;\n}\nfunction hasPrefetch(link) {\n    try {\n        link = document.createElement('link');\n        return(// detect IE11 since it supports prefetch but isn't detected\n        // with relList.support\n        (!!window.MSInputMethodContext && !!document.documentMode) || link.relList.supports('prefetch'));\n    } catch (e) {\n        return false;\n    }\n}\nconst canPrefetch = hasPrefetch();\nfunction prefetchViaDom(href, as, link) {\n    return new Promise((res, rej)=>{\n        const selector = `\n      link[rel=\"prefetch\"][href^=\"${href}\"],\n      link[rel=\"preload\"][href^=\"${href}\"],\n      script[src^=\"${href}\"]`;\n        if (document.querySelector(selector)) {\n            return res();\n        }\n        link = document.createElement('link');\n        // The order of property assignment here is intentional:\n        if (as) link.as = as;\n        link.rel = `prefetch`;\n        link.crossOrigin = process.env.__NEXT_CROSS_ORIGIN;\n        link.onload = res;\n        link.onerror = rej;\n        // `href` should always be last:\n        link.href = href;\n        document.head.appendChild(link);\n    });\n}\nconst ASSET_LOAD_ERROR = Symbol('ASSET_LOAD_ERROR');\nfunction markAssetError(err) {\n    return Object.defineProperty(err, ASSET_LOAD_ERROR, {});\n}\nfunction isAssetError(err) {\n    return err && ASSET_LOAD_ERROR in err;\n}\nfunction appendScript(src, script) {\n    return new Promise((resolve, reject)=>{\n        script = document.createElement('script');\n        // The order of property assignment here is intentional.\n        // 1. Setup success/failure hooks in case the browser synchronously\n        //    executes when `src` is set.\n        script.onload = resolve;\n        script.onerror = ()=>reject(markAssetError(new Error(`Failed to load script: ${src}`)))\n        ;\n        // 2. Configure the cross-origin attribute before setting `src` in case the\n        //    browser begins to fetch.\n        script.crossOrigin = process.env.__NEXT_CROSS_ORIGIN;\n        // 3. Finally, set the source and inject into the DOM in case the child\n        //    must be appended for fetching to start.\n        script.src = src;\n        document.body.appendChild(script);\n    });\n}\n// We wait for pages to be built in dev before we start the route transition\n// timeout to prevent an un-necessary hard navigation in development.\nlet devBuildPromise;\n// Resolve a promise that times out after given amount of milliseconds.\nfunction resolvePromiseWithTimeout(p, ms, err) {\n    return new Promise((resolve, reject)=>{\n        let cancelled = false;\n        p.then((r)=>{\n            // Resolved, cancel the timeout\n            cancelled = true;\n            resolve(r);\n        }).catch(reject);\n        // We wrap these checks separately for better dead-code elimination in\n        // production bundles.\n        if (process.env.NODE_ENV === 'development') {\n            (devBuildPromise || Promise.resolve()).then(()=>{\n                (0, _requestIdleCallback).requestIdleCallback(()=>setTimeout(()=>{\n                        if (!cancelled) {\n                            reject(err);\n                        }\n                    }, ms)\n                );\n            });\n        }\n        if (process.env.NODE_ENV !== 'development') {\n            (0, _requestIdleCallback).requestIdleCallback(()=>setTimeout(()=>{\n                    if (!cancelled) {\n                        reject(err);\n                    }\n                }, ms)\n            );\n        }\n    });\n}\nfunction getClientBuildManifest() {\n    if (self.__BUILD_MANIFEST) {\n        return Promise.resolve(self.__BUILD_MANIFEST);\n    }\n    const onBuildManifest = new Promise((resolve)=>{\n        // Mandatory because this is not concurrent safe:\n        const cb = self.__BUILD_MANIFEST_CB;\n        self.__BUILD_MANIFEST_CB = ()=>{\n            resolve(self.__BUILD_MANIFEST);\n            cb && cb();\n        };\n    });\n    return resolvePromiseWithTimeout(onBuildManifest, MS_MAX_IDLE_DELAY, markAssetError(new Error('Failed to load client build manifest')));\n}\nfunction getMiddlewareManifest() {\n    if (self.__MIDDLEWARE_MANIFEST) {\n        return Promise.resolve(self.__MIDDLEWARE_MANIFEST);\n    }\n    const onMiddlewareManifest = new Promise((resolve)=>{\n        const cb = self.__MIDDLEWARE_MANIFEST_CB;\n        self.__MIDDLEWARE_MANIFEST_CB = ()=>{\n            resolve(self.__MIDDLEWARE_MANIFEST);\n            cb && cb();\n        };\n    });\n    return resolvePromiseWithTimeout(onMiddlewareManifest, MS_MAX_IDLE_DELAY, markAssetError(new Error('Failed to load client middleware manifest')));\n}\nfunction getFilesForRoute(assetPrefix, route) {\n    if (process.env.NODE_ENV === 'development') {\n        return Promise.resolve({\n            scripts: [\n                assetPrefix + '/_next/static/chunks/pages' + encodeURI((0, _getAssetPathFromRoute).default(route, '.js')), \n            ],\n            // Styles are handled by `style-loader` in development:\n            css: []\n        });\n    }\n    return getClientBuildManifest().then((manifest)=>{\n        if (!(route in manifest)) {\n            throw markAssetError(new Error(`Failed to lookup route: ${route}`));\n        }\n        const allFiles = manifest[route].map((entry)=>assetPrefix + '/_next/' + encodeURI(entry)\n        );\n        return {\n            scripts: allFiles.filter((v)=>v.endsWith('.js')\n            ),\n            css: allFiles.filter((v)=>v.endsWith('.css')\n            )\n        };\n    });\n}\nfunction createRouteLoader(assetPrefix) {\n    const entrypoints = new Map();\n    const loadedScripts = new Map();\n    const styleSheets = new Map();\n    const routes = new Map();\n    function maybeExecuteScript(src) {\n        // With HMR we might need to \"reload\" scripts when they are\n        // disposed and readded. Executing scripts twice has no functional\n        // differences\n        if (process.env.NODE_ENV !== 'development') {\n            let prom = loadedScripts.get(src);\n            if (prom) {\n                return prom;\n            }\n            // Skip executing script if it's already in the DOM:\n            if (document.querySelector(`script[src^=\"${src}\"]`)) {\n                return Promise.resolve();\n            }\n            loadedScripts.set(src, prom = appendScript(src));\n            return prom;\n        } else {\n            return appendScript(src);\n        }\n    }\n    function fetchStyleSheet(href) {\n        let prom = styleSheets.get(href);\n        if (prom) {\n            return prom;\n        }\n        styleSheets.set(href, prom = fetch(href).then((res)=>{\n            if (!res.ok) {\n                throw new Error(`Failed to load stylesheet: ${href}`);\n            }\n            return res.text().then((text)=>({\n                    href: href,\n                    content: text\n                })\n            );\n        }).catch((err)=>{\n            throw markAssetError(err);\n        }));\n        return prom;\n    }\n    return {\n        whenEntrypoint (route) {\n            return withFuture(route, entrypoints);\n        },\n        onEntrypoint (route, execute) {\n            (execute ? Promise.resolve().then(()=>execute()\n            ).then((exports)=>({\n                    component: exports && exports.default || exports,\n                    exports: exports\n                })\n            , (err)=>({\n                    error: err\n                })\n            ) : Promise.resolve(undefined)).then((input)=>{\n                const old = entrypoints.get(route);\n                if (old && 'resolve' in old) {\n                    if (input) {\n                        entrypoints.set(route, input);\n                        old.resolve(input);\n                    }\n                } else {\n                    if (input) {\n                        entrypoints.set(route, input);\n                    } else {\n                        entrypoints.delete(route);\n                    }\n                    // when this entrypoint has been resolved before\n                    // the route is outdated and we want to invalidate\n                    // this cache entry\n                    routes.delete(route);\n                }\n            });\n        },\n        loadRoute (route, prefetch) {\n            return withFuture(route, routes, ()=>{\n                let devBuildPromiseResolve;\n                if (process.env.NODE_ENV === 'development') {\n                    devBuildPromise = new Promise((resolve)=>{\n                        devBuildPromiseResolve = resolve;\n                    });\n                }\n                return resolvePromiseWithTimeout(getFilesForRoute(assetPrefix, route).then(({ scripts , css  })=>{\n                    return Promise.all([\n                        entrypoints.has(route) ? [] : Promise.all(scripts.map(maybeExecuteScript)),\n                        Promise.all(css.map(fetchStyleSheet)), \n                    ]);\n                }).then((res)=>{\n                    return this.whenEntrypoint(route).then((entrypoint)=>({\n                            entrypoint,\n                            styles: res[1]\n                        })\n                    );\n                }), MS_MAX_IDLE_DELAY, markAssetError(new Error(`Route did not complete loading: ${route}`))).then(({ entrypoint , styles  })=>{\n                    const res = Object.assign({\n                        styles: styles\n                    }, entrypoint);\n                    return 'error' in entrypoint ? entrypoint : res;\n                }).catch((err)=>{\n                    if (prefetch) {\n                        // we don't want to cache errors during prefetch\n                        throw err;\n                    }\n                    return {\n                        error: err\n                    };\n                }).finally(()=>{\n                    return devBuildPromiseResolve === null || devBuildPromiseResolve === void 0 ? void 0 : devBuildPromiseResolve();\n                });\n            });\n        },\n        prefetch (route) {\n            // https://github.com/GoogleChromeLabs/quicklink/blob/453a661fa1fa940e2d2e044452398e38c67a98fb/src/index.mjs#L115-L118\n            // License: Apache 2.0\n            let cn;\n            if (cn = navigator.connection) {\n                // Don't prefetch if using 2G or if Save-Data is enabled.\n                if (cn.saveData || /2g/.test(cn.effectiveType)) return Promise.resolve();\n            }\n            return getFilesForRoute(assetPrefix, route).then((output)=>Promise.all(canPrefetch ? output.scripts.map((script)=>prefetchViaDom(script, 'script')\n                ) : [])\n            ).then(()=>{\n                (0, _requestIdleCallback).requestIdleCallback(()=>this.loadRoute(route, true).catch(()=>{})\n                );\n            }).catch(// swallow prefetch errors\n            ()=>{});\n        }\n    };\n}\n\n//# sourceMappingURL=route-loader.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nObject.defineProperty(exports, \"Router\", {\n    enumerable: true,\n    get: function() {\n        return _router.default;\n    }\n});\nObject.defineProperty(exports, \"withRouter\", {\n    enumerable: true,\n    get: function() {\n        return _withRouter.default;\n    }\n});\nexports.useRouter = useRouter;\nexports.createRouter = createRouter;\nexports.makePublicRouterInstance = makePublicRouterInstance;\nexports.default = void 0;\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _router = _interopRequireDefault(require(\"../shared/lib/router/router\"));\nvar _routerContext = require(\"../shared/lib/router-context\");\nvar _isError = _interopRequireDefault(require(\"../lib/is-error\"));\nvar _withRouter = _interopRequireDefault(require(\"./with-router\"));\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\nconst singletonRouter = {\n    router: null,\n    readyCallbacks: [],\n    ready (cb) {\n        if (this.router) return cb();\n        if (typeof window !== 'undefined') {\n            this.readyCallbacks.push(cb);\n        }\n    }\n};\n// Create public properties and methods of the router in the singletonRouter\nconst urlPropertyFields = [\n    'pathname',\n    'route',\n    'query',\n    'asPath',\n    'components',\n    'isFallback',\n    'basePath',\n    'locale',\n    'locales',\n    'defaultLocale',\n    'isReady',\n    'isPreview',\n    'isLocaleDomain',\n    'domainLocales', \n];\nconst routerEvents = [\n    'routeChangeStart',\n    'beforeHistoryChange',\n    'routeChangeComplete',\n    'routeChangeError',\n    'hashChangeStart',\n    'hashChangeComplete', \n];\nconst coreMethodFields = [\n    'push',\n    'replace',\n    'reload',\n    'back',\n    'prefetch',\n    'beforePopState', \n];\n// Events is a static property on the router, the router doesn't have to be initialized to use it\nObject.defineProperty(singletonRouter, 'events', {\n    get () {\n        return _router.default.events;\n    }\n});\nurlPropertyFields.forEach((field)=>{\n    // Here we need to use Object.defineProperty because we need to return\n    // the property assigned to the actual router\n    // The value might get changed as we change routes and this is the\n    // proper way to access it\n    Object.defineProperty(singletonRouter, field, {\n        get () {\n            const router = getRouter();\n            return router[field];\n        }\n    });\n});\ncoreMethodFields.forEach((field)=>{\n    singletonRouter[field] = (...args)=>{\n        const router = getRouter();\n        return router[field](...args);\n    };\n});\nrouterEvents.forEach((event)=>{\n    singletonRouter.ready(()=>{\n        _router.default.events.on(event, (...args)=>{\n            const eventField = `on${event.charAt(0).toUpperCase()}${event.substring(1)}`;\n            const _singletonRouter = singletonRouter;\n            if (_singletonRouter[eventField]) {\n                try {\n                    _singletonRouter[eventField](...args);\n                } catch (err) {\n                    console.error(`Error when running the Router event: ${eventField}`);\n                    console.error((0, _isError).default(err) ? `${err.message}\\n${err.stack}` : err + '');\n                }\n            }\n        });\n    });\n});\nfunction getRouter() {\n    if (!singletonRouter.router) {\n        const message = 'No router instance found.\\n' + 'You should only use \"next/router\" on the client side of your app.\\n';\n        throw new Error(message);\n    }\n    return singletonRouter.router;\n}\nvar _default = singletonRouter;\nexports.default = _default;\nfunction useRouter() {\n    return _react.default.useContext(_routerContext.RouterContext);\n}\nfunction createRouter(...args) {\n    singletonRouter.router = new _router.default(...args);\n    singletonRouter.readyCallbacks.forEach((cb)=>cb()\n    );\n    singletonRouter.readyCallbacks = [];\n    return singletonRouter.router;\n}\nfunction makePublicRouterInstance(router) {\n    const scopedRouter = router;\n    const instance = {};\n    for (const property of urlPropertyFields){\n        if (typeof scopedRouter[property] === 'object') {\n            instance[property] = Object.assign(Array.isArray(scopedRouter[property]) ? [] : {}, scopedRouter[property]) // makes sure query is not stateful\n            ;\n            continue;\n        }\n        instance[property] = scopedRouter[property];\n    }\n    // Events is a static property on the router, the router doesn't have to be initialized to use it\n    instance.events = _router.default.events;\n    coreMethodFields.forEach((field)=>{\n        instance[field] = (...args)=>{\n            return scopedRouter[field](...args);\n        };\n    });\n    return instance;\n}\n\n//# sourceMappingURL=router.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = withRouter;\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _router = require(\"./router\");\nfunction withRouter(ComposedComponent) {\n    function WithRouterWrapper(props) {\n        return(/*#__PURE__*/ _react.default.createElement(ComposedComponent, Object.assign({\n            router: (0, _router).useRouter()\n        }, props)));\n    }\n    WithRouterWrapper.getInitialProps = ComposedComponent.getInitialProps;\n    WithRouterWrapper.origGetInitialProps = ComposedComponent.origGetInitialProps;\n    if (process.env.NODE_ENV !== 'production') {\n        const name = ComposedComponent.displayName || ComposedComponent.name || 'Unknown';\n        WithRouterWrapper.displayName = `withRouter(${name})`;\n    }\n    return WithRouterWrapper;\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n\n//# sourceMappingURL=with-router.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Tokenize input string.\n */\nfunction lexer(str) {\n    var tokens = [];\n    var i = 0;\n    while (i < str.length) {\n        var char = str[i];\n        if (char === \"*\" || char === \"+\" || char === \"?\") {\n            tokens.push({ type: \"MODIFIER\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \"\\\\\") {\n            tokens.push({ type: \"ESCAPED_CHAR\", index: i++, value: str[i++] });\n            continue;\n        }\n        if (char === \"{\") {\n            tokens.push({ type: \"OPEN\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \"}\") {\n            tokens.push({ type: \"CLOSE\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \":\") {\n            var name = \"\";\n            var j = i + 1;\n            while (j < str.length) {\n                var code = str.charCodeAt(j);\n                if (\n                // `0-9`\n                (code >= 48 && code <= 57) ||\n                    // `A-Z`\n                    (code >= 65 && code <= 90) ||\n                    // `a-z`\n                    (code >= 97 && code <= 122) ||\n                    // `_`\n                    code === 95) {\n                    name += str[j++];\n                    continue;\n                }\n                break;\n            }\n            if (!name)\n                throw new TypeError(\"Missing parameter name at \" + i);\n            tokens.push({ type: \"NAME\", index: i, value: name });\n            i = j;\n            continue;\n        }\n        if (char === \"(\") {\n            var count = 1;\n            var pattern = \"\";\n            var j = i + 1;\n            if (str[j] === \"?\") {\n                throw new TypeError(\"Pattern cannot start with \\\"?\\\" at \" + j);\n            }\n            while (j < str.length) {\n                if (str[j] === \"\\\\\") {\n                    pattern += str[j++] + str[j++];\n                    continue;\n                }\n                if (str[j] === \")\") {\n                    count--;\n                    if (count === 0) {\n                        j++;\n                        break;\n                    }\n                }\n                else if (str[j] === \"(\") {\n                    count++;\n                    if (str[j + 1] !== \"?\") {\n                        throw new TypeError(\"Capturing groups are not allowed at \" + j);\n                    }\n                }\n                pattern += str[j++];\n            }\n            if (count)\n                throw new TypeError(\"Unbalanced pattern at \" + i);\n            if (!pattern)\n                throw new TypeError(\"Missing pattern at \" + i);\n            tokens.push({ type: \"PATTERN\", index: i, value: pattern });\n            i = j;\n            continue;\n        }\n        tokens.push({ type: \"CHAR\", index: i, value: str[i++] });\n    }\n    tokens.push({ type: \"END\", index: i, value: \"\" });\n    return tokens;\n}\n/**\n * Parse a string for the raw tokens.\n */\nfunction parse(str, options) {\n    if (options === void 0) { options = {}; }\n    var tokens = lexer(str);\n    var _a = options.prefixes, prefixes = _a === void 0 ? \"./\" : _a;\n    var defaultPattern = \"[^\" + escapeString(options.delimiter || \"/#?\") + \"]+?\";\n    var result = [];\n    var key = 0;\n    var i = 0;\n    var path = \"\";\n    var tryConsume = function (type) {\n        if (i < tokens.length && tokens[i].type === type)\n            return tokens[i++].value;\n    };\n    var mustConsume = function (type) {\n        var value = tryConsume(type);\n        if (value !== undefined)\n            return value;\n        var _a = tokens[i], nextType = _a.type, index = _a.index;\n        throw new TypeError(\"Unexpected \" + nextType + \" at \" + index + \", expected \" + type);\n    };\n    var consumeText = function () {\n        var result = \"\";\n        var value;\n        // tslint:disable-next-line\n        while ((value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\"))) {\n            result += value;\n        }\n        return result;\n    };\n    while (i < tokens.length) {\n        var char = tryConsume(\"CHAR\");\n        var name = tryConsume(\"NAME\");\n        var pattern = tryConsume(\"PATTERN\");\n        if (name || pattern) {\n            var prefix = char || \"\";\n            if (prefixes.indexOf(prefix) === -1) {\n                path += prefix;\n                prefix = \"\";\n            }\n            if (path) {\n                result.push(path);\n                path = \"\";\n            }\n            result.push({\n                name: name || key++,\n                prefix: prefix,\n                suffix: \"\",\n                pattern: pattern || defaultPattern,\n                modifier: tryConsume(\"MODIFIER\") || \"\"\n            });\n            continue;\n        }\n        var value = char || tryConsume(\"ESCAPED_CHAR\");\n        if (value) {\n            path += value;\n            continue;\n        }\n        if (path) {\n            result.push(path);\n            path = \"\";\n        }\n        var open = tryConsume(\"OPEN\");\n        if (open) {\n            var prefix = consumeText();\n            var name_1 = tryConsume(\"NAME\") || \"\";\n            var pattern_1 = tryConsume(\"PATTERN\") || \"\";\n            var suffix = consumeText();\n            mustConsume(\"CLOSE\");\n            result.push({\n                name: name_1 || (pattern_1 ? key++ : \"\"),\n                pattern: name_1 && !pattern_1 ? defaultPattern : pattern_1,\n                prefix: prefix,\n                suffix: suffix,\n                modifier: tryConsume(\"MODIFIER\") || \"\"\n            });\n            continue;\n        }\n        mustConsume(\"END\");\n    }\n    return result;\n}\nexports.parse = parse;\n/**\n * Compile a string to a template function for the path.\n */\nfunction compile(str, options) {\n    return tokensToFunction(parse(str, options), options);\n}\nexports.compile = compile;\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction(tokens, options) {\n    if (options === void 0) { options = {}; }\n    var reFlags = flags(options);\n    var _a = options.encode, encode = _a === void 0 ? function (x) { return x; } : _a, _b = options.validate, validate = _b === void 0 ? true : _b;\n    // Compile all the tokens into regexps.\n    var matches = tokens.map(function (token) {\n        if (typeof token === \"object\") {\n            return new RegExp(\"^(?:\" + token.pattern + \")$\", reFlags);\n        }\n    });\n    return function (data) {\n        var path = \"\";\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            if (typeof token === \"string\") {\n                path += token;\n                continue;\n            }\n            var value = data ? data[token.name] : undefined;\n            var optional = token.modifier === \"?\" || token.modifier === \"*\";\n            var repeat = token.modifier === \"*\" || token.modifier === \"+\";\n            if (Array.isArray(value)) {\n                if (!repeat) {\n                    throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to not repeat, but got an array\");\n                }\n                if (value.length === 0) {\n                    if (optional)\n                        continue;\n                    throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to not be empty\");\n                }\n                for (var j = 0; j < value.length; j++) {\n                    var segment = encode(value[j], token);\n                    if (validate && !matches[i].test(segment)) {\n                        throw new TypeError(\"Expected all \\\"\" + token.name + \"\\\" to match \\\"\" + token.pattern + \"\\\", but got \\\"\" + segment + \"\\\"\");\n                    }\n                    path += token.prefix + segment + token.suffix;\n                }\n                continue;\n            }\n            if (typeof value === \"string\" || typeof value === \"number\") {\n                var segment = encode(String(value), token);\n                if (validate && !matches[i].test(segment)) {\n                    throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to match \\\"\" + token.pattern + \"\\\", but got \\\"\" + segment + \"\\\"\");\n                }\n                path += token.prefix + segment + token.suffix;\n                continue;\n            }\n            if (optional)\n                continue;\n            var typeOfMessage = repeat ? \"an array\" : \"a string\";\n            throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to be \" + typeOfMessage);\n        }\n        return path;\n    };\n}\nexports.tokensToFunction = tokensToFunction;\n/**\n * Create path match function from `path-to-regexp` spec.\n */\nfunction match(str, options) {\n    var keys = [];\n    var re = pathToRegexp(str, keys, options);\n    return regexpToFunction(re, keys, options);\n}\nexports.match = match;\n/**\n * Create a path match function from `path-to-regexp` output.\n */\nfunction regexpToFunction(re, keys, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.decode, decode = _a === void 0 ? function (x) { return x; } : _a;\n    return function (pathname) {\n        var m = re.exec(pathname);\n        if (!m)\n            return false;\n        var path = m[0], index = m.index;\n        var params = Object.create(null);\n        var _loop_1 = function (i) {\n            // tslint:disable-next-line\n            if (m[i] === undefined)\n                return \"continue\";\n            var key = keys[i - 1];\n            if (key.modifier === \"*\" || key.modifier === \"+\") {\n                params[key.name] = m[i].split(key.prefix + key.suffix).map(function (value) {\n                    return decode(value, key);\n                });\n            }\n            else {\n                params[key.name] = decode(m[i], key);\n            }\n        };\n        for (var i = 1; i < m.length; i++) {\n            _loop_1(i);\n        }\n        return { path: path, index: index, params: params };\n    };\n}\nexports.regexpToFunction = regexpToFunction;\n/**\n * Escape a regular expression string.\n */\nfunction escapeString(str) {\n    return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n/**\n * Get the flags for a regexp from the options.\n */\nfunction flags(options) {\n    return options && options.sensitive ? \"\" : \"i\";\n}\n/**\n * Pull out keys from a regexp.\n */\nfunction regexpToRegexp(path, keys) {\n    if (!keys)\n        return path;\n    // Use a negative lookahead to match only capturing groups.\n    var groups = path.source.match(/\\((?!\\?)/g);\n    if (groups) {\n        for (var i = 0; i < groups.length; i++) {\n            keys.push({\n                name: i,\n                prefix: \"\",\n                suffix: \"\",\n                modifier: \"\",\n                pattern: \"\"\n            });\n        }\n    }\n    return path;\n}\n/**\n * Transform an array into a regexp.\n */\nfunction arrayToRegexp(paths, keys, options) {\n    var parts = paths.map(function (path) { return pathToRegexp(path, keys, options).source; });\n    return new RegExp(\"(?:\" + parts.join(\"|\") + \")\", flags(options));\n}\n/**\n * Create a path regexp from string input.\n */\nfunction stringToRegexp(path, keys, options) {\n    return tokensToRegexp(parse(path, options), keys, options);\n}\n/**\n * Expose a function for taking tokens and returning a RegExp.\n */\nfunction tokensToRegexp(tokens, keys, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.strict, strict = _a === void 0 ? false : _a, _b = options.start, start = _b === void 0 ? true : _b, _c = options.end, end = _c === void 0 ? true : _c, _d = options.encode, encode = _d === void 0 ? function (x) { return x; } : _d;\n    var endsWith = \"[\" + escapeString(options.endsWith || \"\") + \"]|$\";\n    var delimiter = \"[\" + escapeString(options.delimiter || \"/#?\") + \"]\";\n    var route = start ? \"^\" : \"\";\n    // Iterate over the tokens and create our regexp string.\n    for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n        var token = tokens_1[_i];\n        if (typeof token === \"string\") {\n            route += escapeString(encode(token));\n        }\n        else {\n            var prefix = escapeString(encode(token.prefix));\n            var suffix = escapeString(encode(token.suffix));\n            if (token.pattern) {\n                if (keys)\n                    keys.push(token);\n                if (prefix || suffix) {\n                    if (token.modifier === \"+\" || token.modifier === \"*\") {\n                        var mod = token.modifier === \"*\" ? \"?\" : \"\";\n                        route += \"(?:\" + prefix + \"((?:\" + token.pattern + \")(?:\" + suffix + prefix + \"(?:\" + token.pattern + \"))*)\" + suffix + \")\" + mod;\n                    }\n                    else {\n                        route += \"(?:\" + prefix + \"(\" + token.pattern + \")\" + suffix + \")\" + token.modifier;\n                    }\n                }\n                else {\n                    route += \"(\" + token.pattern + \")\" + token.modifier;\n                }\n            }\n            else {\n                route += \"(?:\" + prefix + suffix + \")\" + token.modifier;\n            }\n        }\n    }\n    if (end) {\n        if (!strict)\n            route += delimiter + \"?\";\n        route += !options.endsWith ? \"$\" : \"(?=\" + endsWith + \")\";\n    }\n    else {\n        var endToken = tokens[tokens.length - 1];\n        var isEndDelimited = typeof endToken === \"string\"\n            ? delimiter.indexOf(endToken[endToken.length - 1]) > -1\n            : // tslint:disable-next-line\n                endToken === undefined;\n        if (!strict) {\n            route += \"(?:\" + delimiter + \"(?=\" + endsWith + \"))?\";\n        }\n        if (!isEndDelimited) {\n            route += \"(?=\" + delimiter + \"|\" + endsWith + \")\";\n        }\n    }\n    return new RegExp(route, flags(options));\n}\nexports.tokensToRegexp = tokensToRegexp;\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n */\nfunction pathToRegexp(path, keys, options) {\n    if (path instanceof RegExp)\n        return regexpToRegexp(path, keys);\n    if (Array.isArray(path))\n        return arrayToRegexp(path, keys, options);\n    return stringToRegexp(path, keys, options);\n}\nexports.pathToRegexp = pathToRegexp;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = isError;\nexports.getProperError = getProperError;\nvar _isPlainObject = require(\"../shared/lib/is-plain-object\");\nfunction isError(err) {\n    return typeof err === 'object' && err !== null && 'name' in err && 'message' in err;\n}\nfunction getProperError(err) {\n    if (isError(err)) {\n        return err;\n    }\n    if (process.env.NODE_ENV === 'development') {\n        // provide better error for case where `throw undefined`\n        // is called in development\n        if (typeof err === 'undefined') {\n            return new Error('An undefined error was thrown, ' + 'see here for more info: https://nextjs.org/docs/messages/threw-undefined');\n        }\n        if (err === null) {\n            return new Error('A null error was thrown, ' + 'see here for more info: https://nextjs.org/docs/messages/threw-undefined');\n        }\n    }\n    return new Error((0, _isPlainObject).isPlainObject(err) ? JSON.stringify(err) : err + '');\n}\n\n//# sourceMappingURL=is-error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.normalizePathSep = normalizePathSep;\nexports.denormalizePagePath = denormalizePagePath;\nvar _utils = require(\"../shared/lib/router/utils\");\nfunction normalizePathSep(path) {\n    return path.replace(/\\\\/g, '/');\n}\nfunction denormalizePagePath(page) {\n    page = normalizePathSep(page);\n    if (page.startsWith('/index/') && !(0, _utils).isDynamicRoute(page)) {\n        page = page.slice(6);\n    } else if (page === '/index') {\n        page = '/';\n    }\n    return page;\n}\n\n//# sourceMappingURL=denormalize-page-path.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.escapeStringRegexp = escapeStringRegexp;\nfunction escapeStringRegexp(str) {\n    return str.replace(/[|\\\\{}()[\\]^$+*?.-]/g, '\\\\$&');\n}\n\n//# sourceMappingURL=escape-regexp.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.detectDomainLocale = detectDomainLocale;\nfunction detectDomainLocale(domainItems, hostname, detectedLocale) {\n    let domainItem;\n    if (domainItems) {\n        if (detectedLocale) {\n            detectedLocale = detectedLocale.toLowerCase();\n        }\n        for (const item of domainItems){\n            var ref, ref1;\n            // remove port if present\n            const domainHostname = (ref = item.domain) === null || ref === void 0 ? void 0 : ref.split(':')[0].toLowerCase();\n            if (hostname === domainHostname || detectedLocale === item.defaultLocale.toLowerCase() || ((ref1 = item.locales) === null || ref1 === void 0 ? void 0 : ref1.some((locale)=>locale.toLowerCase() === detectedLocale\n            ))) {\n                domainItem = item;\n                break;\n            }\n        }\n    }\n    return domainItem;\n}\n\n//# sourceMappingURL=detect-domain-locale.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.normalizeLocalePath = normalizeLocalePath;\nfunction normalizeLocalePath(pathname, locales) {\n    let detectedLocale;\n    // first item will be empty string from splitting at first char\n    const pathnameParts = pathname.split('/');\n    (locales || []).some((locale)=>{\n        if (pathnameParts[1] && pathnameParts[1].toLowerCase() === locale.toLowerCase()) {\n            detectedLocale = locale;\n            pathnameParts.splice(1, 1);\n            pathname = pathnameParts.join('/') || '/';\n            return true;\n        }\n        return false;\n    });\n    return {\n        pathname,\n        detectedLocale\n    };\n}\n\n//# sourceMappingURL=normalize-locale-path.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getObjectClassLabel = getObjectClassLabel;\nexports.isPlainObject = isPlainObject;\nfunction getObjectClassLabel(value) {\n    return Object.prototype.toString.call(value);\n}\nfunction isPlainObject(value) {\n    if (getObjectClassLabel(value) !== '[object Object]') {\n        return false;\n    }\n    const prototype = Object.getPrototypeOf(value);\n    return prototype === null || prototype === Object.prototype;\n}\n\n//# sourceMappingURL=is-plain-object.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = mitt;\nfunction mitt() {\n    const all = Object.create(null);\n    return {\n        on (type, handler) {\n            (all[type] || (all[type] = [])).push(handler);\n        },\n        off (type, handler) {\n            if (all[type]) {\n                all[type].splice(all[type].indexOf(handler) >>> 0, 1);\n            }\n        },\n        emit (type, ...evts) {\n            (all[type] || []).slice().map((handler)=>{\n                handler(...evts);\n            });\n        }\n    };\n}\n\n//# sourceMappingURL=mitt.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.RouterContext = void 0;\nvar _react = _interopRequireDefault(require(\"react\"));\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\nconst RouterContext = _react.default.createContext(null);\nexports.RouterContext = RouterContext;\nif (process.env.NODE_ENV !== 'production') {\n    RouterContext.displayName = 'RouterContext';\n}\n\n//# sourceMappingURL=router-context.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getDomainLocale = getDomainLocale;\nexports.addLocale = addLocale;\nexports.delLocale = delLocale;\nexports.hasBasePath = hasBasePath;\nexports.addBasePath = addBasePath;\nexports.delBasePath = delBasePath;\nexports.isLocalURL = isLocalURL;\nexports.interpolateAs = interpolateAs;\nexports.resolveHref = resolveHref;\nexports.default = void 0;\nvar _normalizeTrailingSlash = require(\"../../../client/normalize-trailing-slash\");\nvar _routeLoader = require(\"../../../client/route-loader\");\nvar _isError = _interopRequireWildcard(require(\"../../../lib/is-error\"));\nvar _denormalizePagePath = require(\"../../../server/denormalize-page-path\");\nvar _normalizeLocalePath = require(\"../i18n/normalize-locale-path\");\nvar _mitt = _interopRequireDefault(require(\"../mitt\"));\nvar _utils = require(\"../utils\");\nvar _isDynamic = require(\"./utils/is-dynamic\");\nvar _parseRelativeUrl = require(\"./utils/parse-relative-url\");\nvar _querystring = require(\"./utils/querystring\");\nvar _resolveRewrites = _interopRequireDefault(require(\"./utils/resolve-rewrites\"));\nvar _routeMatcher = require(\"./utils/route-matcher\");\nvar _routeRegex = require(\"./utils/route-regex\");\nvar _getMiddlewareRegex = require(\"./utils/get-middleware-regex\");\nvar _formatUrl = require(\"./utils/format-url\");\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\nfunction _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n        return obj;\n    } else {\n        var newObj = {};\n        if (obj != null) {\n            for(var key in obj){\n                if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                    var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n                    if (desc.get || desc.set) {\n                        Object.defineProperty(newObj, key, desc);\n                    } else {\n                        newObj[key] = obj[key];\n                    }\n                }\n            }\n        }\n        newObj.default = obj;\n        return newObj;\n    }\n}\nlet detectDomainLocale;\nif (process.env.__NEXT_I18N_SUPPORT) {\n    detectDomainLocale = require('../i18n/detect-domain-locale').detectDomainLocale;\n}\nconst basePath = process.env.__NEXT_ROUTER_BASEPATH || '';\nfunction buildCancellationError() {\n    return Object.assign(new Error('Route Cancelled'), {\n        cancelled: true\n    });\n}\nfunction addPathPrefix(path, prefix) {\n    if (!path.startsWith('/') || !prefix) {\n        return path;\n    }\n    const pathname = pathNoQueryHash(path);\n    return (0, _normalizeTrailingSlash).normalizePathTrailingSlash(`${prefix}${pathname}`) + path.slice(pathname.length);\n}\nfunction getDomainLocale(path, locale, locales, domainLocales) {\n    if (process.env.__NEXT_I18N_SUPPORT) {\n        locale = locale || (0, _normalizeLocalePath).normalizeLocalePath(path, locales).detectedLocale;\n        const detectedDomain = detectDomainLocale(domainLocales, undefined, locale);\n        if (detectedDomain) {\n            return `http${detectedDomain.http ? '' : 's'}://${detectedDomain.domain}${basePath || ''}${locale === detectedDomain.defaultLocale ? '' : `/${locale}`}${path}`;\n        }\n        return false;\n    } else {\n        return false;\n    }\n}\nfunction addLocale(path, locale, defaultLocale) {\n    if (process.env.__NEXT_I18N_SUPPORT) {\n        const pathname = pathNoQueryHash(path);\n        const pathLower = pathname.toLowerCase();\n        const localeLower = locale && locale.toLowerCase();\n        return locale && locale !== defaultLocale && !pathLower.startsWith('/' + localeLower + '/') && pathLower !== '/' + localeLower ? addPathPrefix(path, '/' + locale) : path;\n    }\n    return path;\n}\nfunction delLocale(path, locale) {\n    if (process.env.__NEXT_I18N_SUPPORT) {\n        const pathname = pathNoQueryHash(path);\n        const pathLower = pathname.toLowerCase();\n        const localeLower = locale && locale.toLowerCase();\n        return locale && (pathLower.startsWith('/' + localeLower + '/') || pathLower === '/' + localeLower) ? (pathname.length === locale.length + 1 ? '/' : '') + path.slice(locale.length + 1) : path;\n    }\n    return path;\n}\nfunction pathNoQueryHash(path) {\n    const queryIndex = path.indexOf('?');\n    const hashIndex = path.indexOf('#');\n    if (queryIndex > -1 || hashIndex > -1) {\n        path = path.substring(0, queryIndex > -1 ? queryIndex : hashIndex);\n    }\n    return path;\n}\nfunction hasBasePath(path) {\n    path = pathNoQueryHash(path);\n    return path === basePath || path.startsWith(basePath + '/');\n}\nfunction addBasePath(path) {\n    // we only add the basepath on relative urls\n    return addPathPrefix(path, basePath);\n}\nfunction delBasePath(path) {\n    path = path.slice(basePath.length);\n    if (!path.startsWith('/')) path = `/${path}`;\n    return path;\n}\nfunction isLocalURL(url) {\n    // prevent a hydration mismatch on href for url with anchor refs\n    if (url.startsWith('/') || url.startsWith('#') || url.startsWith('?')) return true;\n    try {\n        // absolute urls can be local if they are on the same origin\n        const locationOrigin = (0, _utils).getLocationOrigin();\n        const resolved = new URL(url, locationOrigin);\n        return resolved.origin === locationOrigin && hasBasePath(resolved.pathname);\n    } catch (_) {\n        return false;\n    }\n}\nfunction interpolateAs(route, asPathname, query) {\n    let interpolatedRoute = '';\n    const dynamicRegex = (0, _routeRegex).getRouteRegex(route);\n    const dynamicGroups = dynamicRegex.groups;\n    const dynamicMatches = // Try to match the dynamic route against the asPath\n    (asPathname !== route ? (0, _routeMatcher).getRouteMatcher(dynamicRegex)(asPathname) : '') || // Fall back to reading the values from the href\n    // TODO: should this take priority; also need to change in the router.\n    query;\n    interpolatedRoute = route;\n    const params = Object.keys(dynamicGroups);\n    if (!params.every((param)=>{\n        let value = dynamicMatches[param] || '';\n        const { repeat , optional  } = dynamicGroups[param];\n        // support single-level catch-all\n        // TODO: more robust handling for user-error (passing `/`)\n        let replaced = `[${repeat ? '...' : ''}${param}]`;\n        if (optional) {\n            replaced = `${!value ? '/' : ''}[${replaced}]`;\n        }\n        if (repeat && !Array.isArray(value)) value = [\n            value\n        ];\n        return (optional || param in dynamicMatches) && // Interpolate group into data URL if present\n        (interpolatedRoute = interpolatedRoute.replace(replaced, repeat ? value.map(// these values should be fully encoded instead of just\n        // path delimiter escaped since they are being inserted\n        // into the URL and we expect URL encoded segments\n        // when parsing dynamic route params\n        (segment)=>encodeURIComponent(segment)\n        ).join('/') : encodeURIComponent(value)) || '/');\n    })) {\n        interpolatedRoute = '' // did not satisfy all requirements\n        ;\n    // n.b. We ignore this error because we handle warning for this case in\n    // development in the `<Link>` component directly.\n    }\n    return {\n        params,\n        result: interpolatedRoute\n    };\n}\nfunction omitParmsFromQuery(query, params) {\n    const filteredQuery = {};\n    Object.keys(query).forEach((key)=>{\n        if (!params.includes(key)) {\n            filteredQuery[key] = query[key];\n        }\n    });\n    return filteredQuery;\n}\nfunction resolveHref(router, href, resolveAs) {\n    // we use a dummy base url for relative urls\n    let base;\n    let urlAsString = typeof href === 'string' ? href : (0, _formatUrl).formatWithValidation(href);\n    // repeated slashes and backslashes in the URL are considered\n    // invalid and will never match a Next.js page/file\n    const urlProtoMatch = urlAsString.match(/^[a-zA-Z]{1,}:\\/\\//);\n    const urlAsStringNoProto = urlProtoMatch ? urlAsString.slice(urlProtoMatch[0].length) : urlAsString;\n    const urlParts = urlAsStringNoProto.split('?');\n    if ((urlParts[0] || '').match(/(\\/\\/|\\\\)/)) {\n        console.error(`Invalid href passed to next/router: ${urlAsString}, repeated forward-slashes (//) or backslashes \\\\ are not valid in the href`);\n        const normalizedUrl = (0, _utils).normalizeRepeatedSlashes(urlAsStringNoProto);\n        urlAsString = (urlProtoMatch ? urlProtoMatch[0] : '') + normalizedUrl;\n    }\n    // Return because it cannot be routed by the Next.js router\n    if (!isLocalURL(urlAsString)) {\n        return resolveAs ? [\n            urlAsString\n        ] : urlAsString;\n    }\n    try {\n        base = new URL(urlAsString.startsWith('#') ? router.asPath : router.pathname, 'http://n');\n    } catch (_) {\n        // fallback to / for invalid asPath values e.g. //\n        base = new URL('/', 'http://n');\n    }\n    try {\n        const finalUrl = new URL(urlAsString, base);\n        finalUrl.pathname = (0, _normalizeTrailingSlash).normalizePathTrailingSlash(finalUrl.pathname);\n        let interpolatedAs = '';\n        if ((0, _isDynamic).isDynamicRoute(finalUrl.pathname) && finalUrl.searchParams && resolveAs) {\n            const query = (0, _querystring).searchParamsToUrlQuery(finalUrl.searchParams);\n            const { result , params  } = interpolateAs(finalUrl.pathname, finalUrl.pathname, query);\n            if (result) {\n                interpolatedAs = (0, _formatUrl).formatWithValidation({\n                    pathname: result,\n                    hash: finalUrl.hash,\n                    query: omitParmsFromQuery(query, params)\n                });\n            }\n        }\n        // if the origin didn't change, it means we received a relative href\n        const resolvedHref = finalUrl.origin === base.origin ? finalUrl.href.slice(finalUrl.origin.length) : finalUrl.href;\n        return resolveAs ? [\n            resolvedHref,\n            interpolatedAs || resolvedHref\n        ] : resolvedHref;\n    } catch (_1) {\n        return resolveAs ? [\n            urlAsString\n        ] : urlAsString;\n    }\n}\nfunction stripOrigin(url) {\n    const origin = (0, _utils).getLocationOrigin();\n    return url.startsWith(origin) ? url.substring(origin.length) : url;\n}\nfunction prepareUrlAs(router, url, as) {\n    // If url and as provided as an object representation,\n    // we'll format them into the string version here.\n    let [resolvedHref, resolvedAs] = resolveHref(router, url, true);\n    const origin = (0, _utils).getLocationOrigin();\n    const hrefHadOrigin = resolvedHref.startsWith(origin);\n    const asHadOrigin = resolvedAs && resolvedAs.startsWith(origin);\n    resolvedHref = stripOrigin(resolvedHref);\n    resolvedAs = resolvedAs ? stripOrigin(resolvedAs) : resolvedAs;\n    const preparedUrl = hrefHadOrigin ? resolvedHref : addBasePath(resolvedHref);\n    const preparedAs = as ? stripOrigin(resolveHref(router, as)) : resolvedAs || resolvedHref;\n    return {\n        url: preparedUrl,\n        as: asHadOrigin ? preparedAs : addBasePath(preparedAs)\n    };\n}\nfunction resolveDynamicRoute(pathname, pages) {\n    const cleanPathname = (0, _normalizeTrailingSlash).removePathTrailingSlash((0, _denormalizePagePath).denormalizePagePath(pathname));\n    if (cleanPathname === '/404' || cleanPathname === '/_error') {\n        return pathname;\n    }\n    // handle resolving href for dynamic routes\n    if (!pages.includes(cleanPathname)) {\n        // eslint-disable-next-line array-callback-return\n        pages.some((page)=>{\n            if ((0, _isDynamic).isDynamicRoute(page) && (0, _routeRegex).getRouteRegex(page).re.test(cleanPathname)) {\n                pathname = page;\n                return true;\n            }\n        });\n    }\n    return (0, _normalizeTrailingSlash).removePathTrailingSlash(pathname);\n}\nconst manualScrollRestoration = process.env.__NEXT_SCROLL_RESTORATION && typeof window !== 'undefined' && 'scrollRestoration' in window.history && !!function() {\n    try {\n        let v = '__next';\n        // eslint-disable-next-line no-sequences\n        return sessionStorage.setItem(v, v), sessionStorage.removeItem(v), true;\n    } catch (n) {}\n}();\nconst SSG_DATA_NOT_FOUND = Symbol('SSG_DATA_NOT_FOUND');\nfunction fetchRetry(url, attempts, opts) {\n    return fetch(url, {\n        // Cookies are required to be present for Next.js' SSG \"Preview Mode\".\n        // Cookies may also be required for `getServerSideProps`.\n        //\n        // > `fetch` wont send cookies, unless you set the credentials init\n        // > option.\n        // https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\n        //\n        // > For maximum browser compatibility when it comes to sending &\n        // > receiving cookies, always supply the `credentials: 'same-origin'`\n        // > option instead of relying on the default.\n        // https://github.com/github/fetch#caveats\n        credentials: 'same-origin'\n    }).then((res)=>{\n        if (!res.ok) {\n            if (attempts > 1 && res.status >= 500) {\n                return fetchRetry(url, attempts - 1, opts);\n            }\n            if (res.status === 404) {\n                return res.json().then((data)=>{\n                    if (data.notFound) {\n                        return {\n                            notFound: SSG_DATA_NOT_FOUND\n                        };\n                    }\n                    throw new Error(`Failed to load static props`);\n                });\n            }\n            throw new Error(`Failed to load static props`);\n        }\n        return opts.text ? res.text() : res.json();\n    });\n}\nfunction fetchNextData(dataHref, isServerRender, text, inflightCache, persistCache) {\n    const { href: cacheKey  } = new URL(dataHref, window.location.href);\n    if (inflightCache[cacheKey] !== undefined) {\n        return inflightCache[cacheKey];\n    }\n    return inflightCache[cacheKey] = fetchRetry(dataHref, isServerRender ? 3 : 1, {\n        text\n    }).catch((err)=>{\n        // We should only trigger a server-side transition if this was caused\n        // on a client-side transition. Otherwise, we'd get into an infinite\n        // loop.\n        if (!isServerRender) {\n            (0, _routeLoader).markAssetError(err);\n        }\n        throw err;\n    }).then((data)=>{\n        if (!persistCache || process.env.NODE_ENV !== 'production') {\n            delete inflightCache[cacheKey];\n        }\n        return data;\n    }).catch((err)=>{\n        delete inflightCache[cacheKey];\n        throw err;\n    });\n}\nclass Router {\n    constructor(pathname1, query1, as1, { initialProps , pageLoader , App , wrapApp , Component , err , subscription , isFallback , locale , locales , defaultLocale , domainLocales , isPreview , isRsc  }){\n        // Static Data Cache\n        this.sdc = {};\n        // In-flight Server Data Requests, for deduping\n        this.sdr = {};\n        // In-flight middleware preflight requests\n        this.sde = {};\n        this._idx = 0;\n        this.onPopState = (e)=>{\n            const state = e.state;\n            if (!state) {\n                // We get state as undefined for two reasons.\n                //  1. With older safari (< 8) and older chrome (< 34)\n                //  2. When the URL changed with #\n                //\n                // In the both cases, we don't need to proceed and change the route.\n                // (as it's already changed)\n                // But we can simply replace the state with the new changes.\n                // Actually, for (1) we don't need to nothing. But it's hard to detect that event.\n                // So, doing the following for (1) does no harm.\n                const { pathname , query  } = this;\n                this.changeState('replaceState', (0, _formatUrl).formatWithValidation({\n                    pathname: addBasePath(pathname),\n                    query\n                }), (0, _utils).getURL());\n                return;\n            }\n            if (!state.__N) {\n                return;\n            }\n            let forcedScroll;\n            const { url , as , options , idx  } = state;\n            if (process.env.__NEXT_SCROLL_RESTORATION) {\n                if (manualScrollRestoration) {\n                    if (this._idx !== idx) {\n                        // Snapshot current scroll position:\n                        try {\n                            sessionStorage.setItem('__next_scroll_' + this._idx, JSON.stringify({\n                                x: self.pageXOffset,\n                                y: self.pageYOffset\n                            }));\n                        } catch  {}\n                        // Restore old scroll position:\n                        try {\n                            const v = sessionStorage.getItem('__next_scroll_' + idx);\n                            forcedScroll = JSON.parse(v);\n                        } catch  {\n                            forcedScroll = {\n                                x: 0,\n                                y: 0\n                            };\n                        }\n                    }\n                }\n            }\n            this._idx = idx;\n            const { pathname  } = (0, _parseRelativeUrl).parseRelativeUrl(url);\n            // Make sure we don't re-render on initial load,\n            // can be caused by navigating back from an external site\n            if (this.isSsr && as === addBasePath(this.asPath) && pathname === addBasePath(this.pathname)) {\n                return;\n            }\n            // If the downstream application returns falsy, return.\n            // They will then be responsible for handling the event.\n            if (this._bps && !this._bps(state)) {\n                return;\n            }\n            this.change('replaceState', url, as, Object.assign({}, options, {\n                shallow: options.shallow && this._shallow,\n                locale: options.locale || this.defaultLocale\n            }), forcedScroll);\n        };\n        // represents the current component key\n        const route = (0, _normalizeTrailingSlash).removePathTrailingSlash(pathname1);\n        // set up the component cache (by route keys)\n        this.components = {};\n        // We should not keep the cache, if there's an error\n        // Otherwise, this cause issues when when going back and\n        // come again to the errored page.\n        if (pathname1 !== '/_error') {\n            this.components[route] = {\n                Component,\n                initial: true,\n                props: initialProps,\n                err,\n                __N_SSG: initialProps && initialProps.__N_SSG,\n                __N_SSP: initialProps && initialProps.__N_SSP,\n                __N_RSC: !!isRsc\n            };\n        }\n        this.components['/_app'] = {\n            Component: App,\n            styleSheets: []\n        };\n        // Backwards compat for Router.router.events\n        // TODO: Should be remove the following major version as it was never documented\n        this.events = Router.events;\n        this.pageLoader = pageLoader;\n        // if auto prerendered and dynamic route wait to update asPath\n        // until after mount to prevent hydration mismatch\n        const autoExportDynamic = (0, _isDynamic).isDynamicRoute(pathname1) && self.__NEXT_DATA__.autoExport;\n        this.basePath = basePath;\n        this.sub = subscription;\n        this.clc = null;\n        this._wrapApp = wrapApp;\n        // make sure to ignore extra popState in safari on navigating\n        // back from external site\n        this.isSsr = true;\n        this.isLocaleDomain = false;\n        this.isReady = !!(self.__NEXT_DATA__.gssp || self.__NEXT_DATA__.gip || self.__NEXT_DATA__.appGip && !self.__NEXT_DATA__.gsp || !autoExportDynamic && !self.location.search && !process.env.__NEXT_HAS_REWRITES);\n        if (process.env.__NEXT_I18N_SUPPORT) {\n            this.locales = locales;\n            this.defaultLocale = defaultLocale;\n            this.domainLocales = domainLocales;\n            this.isLocaleDomain = !!detectDomainLocale(domainLocales, self.location.hostname);\n        }\n        this.state = {\n            route,\n            pathname: pathname1,\n            query: query1,\n            asPath: autoExportDynamic ? pathname1 : as1,\n            isPreview: !!isPreview,\n            locale: process.env.__NEXT_I18N_SUPPORT ? locale : undefined,\n            isFallback\n        };\n        if (typeof window !== 'undefined') {\n            // make sure \"as\" doesn't start with double slashes or else it can\n            // throw an error as it's considered invalid\n            if (!as1.startsWith('//')) {\n                // in order for `e.state` to work on the `onpopstate` event\n                // we have to register the initial route upon initialization\n                const options = {\n                    locale\n                };\n                options._shouldResolveHref = as1 !== pathname1;\n                this.changeState('replaceState', (0, _formatUrl).formatWithValidation({\n                    pathname: addBasePath(pathname1),\n                    query: query1\n                }), (0, _utils).getURL(), options);\n            }\n            window.addEventListener('popstate', this.onPopState);\n            // enable custom scroll restoration handling when available\n            // otherwise fallback to browser's default handling\n            if (process.env.__NEXT_SCROLL_RESTORATION) {\n                if (manualScrollRestoration) {\n                    window.history.scrollRestoration = 'manual';\n                }\n            }\n        }\n    }\n    reload() {\n        window.location.reload();\n    }\n    /**\n   * Go back in history\n   */ back() {\n        window.history.back();\n    }\n    /**\n   * Performs a `pushState` with arguments\n   * @param url of the route\n   * @param as masks `url` for the browser\n   * @param options object you can define `shallow` and other options\n   */ push(url, as, options = {}) {\n        if (process.env.__NEXT_SCROLL_RESTORATION) {\n            // TODO: remove in the future when we update history before route change\n            // is complete, as the popstate event should handle this capture.\n            if (manualScrollRestoration) {\n                try {\n                    // Snapshot scroll position right before navigating to a new page:\n                    sessionStorage.setItem('__next_scroll_' + this._idx, JSON.stringify({\n                        x: self.pageXOffset,\n                        y: self.pageYOffset\n                    }));\n                } catch  {}\n            }\n        }\n        ({ url , as  } = prepareUrlAs(this, url, as));\n        return this.change('pushState', url, as, options);\n    }\n    /**\n   * Performs a `replaceState` with arguments\n   * @param url of the route\n   * @param as masks `url` for the browser\n   * @param options object you can define `shallow` and other options\n   */ replace(url, as, options = {}) {\n        ({ url , as  } = prepareUrlAs(this, url, as));\n        return this.change('replaceState', url, as, options);\n    }\n    async change(method, url, as, options, forcedScroll) {\n        if (!isLocalURL(url)) {\n            window.location.href = url;\n            return false;\n        }\n        const shouldResolveHref = options._h || options._shouldResolveHref || pathNoQueryHash(url) === pathNoQueryHash(as);\n        const nextState = {\n            ...this.state\n        };\n        // for static pages with query params in the URL we delay\n        // marking the router ready until after the query is updated\n        if (options._h) {\n            this.isReady = true;\n        }\n        const prevLocale = nextState.locale;\n        if (process.env.__NEXT_I18N_SUPPORT) {\n            nextState.locale = options.locale === false ? this.defaultLocale : options.locale || nextState.locale;\n            if (typeof options.locale === 'undefined') {\n                options.locale = nextState.locale;\n            }\n            const parsedAs = (0, _parseRelativeUrl).parseRelativeUrl(hasBasePath(as) ? delBasePath(as) : as);\n            const localePathResult = (0, _normalizeLocalePath).normalizeLocalePath(parsedAs.pathname, this.locales);\n            if (localePathResult.detectedLocale) {\n                nextState.locale = localePathResult.detectedLocale;\n                parsedAs.pathname = addBasePath(parsedAs.pathname);\n                as = (0, _formatUrl).formatWithValidation(parsedAs);\n                url = addBasePath((0, _normalizeLocalePath).normalizeLocalePath(hasBasePath(url) ? delBasePath(url) : url, this.locales).pathname);\n            }\n            let didNavigate = false;\n            // we need to wrap this in the env check again since regenerator runtime\n            // moves this on its own due to the return\n            if (process.env.__NEXT_I18N_SUPPORT) {\n                var ref;\n                // if the locale isn't configured hard navigate to show 404 page\n                if (!((ref = this.locales) === null || ref === void 0 ? void 0 : ref.includes(nextState.locale))) {\n                    parsedAs.pathname = addLocale(parsedAs.pathname, nextState.locale);\n                    window.location.href = (0, _formatUrl).formatWithValidation(parsedAs);\n                    // this was previously a return but was removed in favor\n                    // of better dead code elimination with regenerator runtime\n                    didNavigate = true;\n                }\n            }\n            const detectedDomain = detectDomainLocale(this.domainLocales, undefined, nextState.locale);\n            // we need to wrap this in the env check again since regenerator runtime\n            // moves this on its own due to the return\n            if (process.env.__NEXT_I18N_SUPPORT) {\n                // if we are navigating to a domain locale ensure we redirect to the\n                // correct domain\n                if (!didNavigate && detectedDomain && this.isLocaleDomain && self.location.hostname !== detectedDomain.domain) {\n                    const asNoBasePath = delBasePath(as);\n                    window.location.href = `http${detectedDomain.http ? '' : 's'}://${detectedDomain.domain}${addBasePath(`${nextState.locale === detectedDomain.defaultLocale ? '' : `/${nextState.locale}`}${asNoBasePath === '/' ? '' : asNoBasePath}` || '/')}`;\n                    // this was previously a return but was removed in favor\n                    // of better dead code elimination with regenerator runtime\n                    didNavigate = true;\n                }\n            }\n            if (didNavigate) {\n                return new Promise(()=>{});\n            }\n        }\n        if (!options._h) {\n            this.isSsr = false;\n        }\n        // marking route changes as a navigation start entry\n        if (_utils.ST) {\n            performance.mark('routeChange');\n        }\n        const { shallow =false , scroll =true  } = options;\n        const routeProps = {\n            shallow\n        };\n        if (this._inFlightRoute) {\n            this.abortComponentLoad(this._inFlightRoute, routeProps);\n        }\n        as = addBasePath(addLocale(hasBasePath(as) ? delBasePath(as) : as, options.locale, this.defaultLocale));\n        const cleanedAs = delLocale(hasBasePath(as) ? delBasePath(as) : as, nextState.locale);\n        this._inFlightRoute = as;\n        let localeChange = prevLocale !== nextState.locale;\n        // If the url change is only related to a hash change\n        // We should not proceed. We should only change the state.\n        // WARNING: `_h` is an internal option for handing Next.js client-side\n        // hydration. Your app should _never_ use this property. It may change at\n        // any time without notice.\n        if (!options._h && this.onlyAHashChange(cleanedAs) && !localeChange) {\n            nextState.asPath = cleanedAs;\n            Router.events.emit('hashChangeStart', as, routeProps);\n            // TODO: do we need the resolved href when only a hash change?\n            this.changeState(method, url, as, {\n                ...options,\n                scroll: false\n            });\n            if (scroll) {\n                this.scrollToHash(cleanedAs);\n            }\n            this.set(nextState, this.components[nextState.route], null);\n            Router.events.emit('hashChangeComplete', as, routeProps);\n            return true;\n        }\n        let parsed = (0, _parseRelativeUrl).parseRelativeUrl(url);\n        let { pathname , query  } = parsed;\n        // The build manifest needs to be loaded before auto-static dynamic pages\n        // get their query parameters to allow ensuring they can be parsed properly\n        // when rewritten to\n        let pages, rewrites;\n        try {\n            [pages, { __rewrites: rewrites  }] = await Promise.all([\n                this.pageLoader.getPageList(),\n                (0, _routeLoader).getClientBuildManifest(),\n                this.pageLoader.getMiddlewareList(), \n            ]);\n        } catch (err) {\n            // If we fail to resolve the page list or client-build manifest, we must\n            // do a server-side transition:\n            window.location.href = as;\n            return false;\n        }\n        // If asked to change the current URL we should reload the current page\n        // (not location.reload() but reload getInitialProps and other Next.js stuffs)\n        // We also need to set the method = replaceState always\n        // as this should not go into the history (That's how browsers work)\n        // We should compare the new asPath to the current asPath, not the url\n        if (!this.urlIsNew(cleanedAs) && !localeChange) {\n            method = 'replaceState';\n        }\n        // we need to resolve the as value using rewrites for dynamic SSG\n        // pages to allow building the data URL correctly\n        let resolvedAs = as;\n        // url and as should always be prefixed with basePath by this\n        // point by either next/link or router.push/replace so strip the\n        // basePath from the pathname to match the pages dir 1-to-1\n        pathname = pathname ? (0, _normalizeTrailingSlash).removePathTrailingSlash(delBasePath(pathname)) : pathname;\n        if (shouldResolveHref && pathname !== '/_error') {\n            options._shouldResolveHref = true;\n            if (process.env.__NEXT_HAS_REWRITES && as.startsWith('/')) {\n                const rewritesResult = (0, _resolveRewrites).default(addBasePath(addLocale(cleanedAs, nextState.locale)), pages, rewrites, query, (p)=>resolveDynamicRoute(p, pages)\n                , this.locales);\n                if (rewritesResult.externalDest) {\n                    location.href = as;\n                    return true;\n                }\n                resolvedAs = rewritesResult.asPath;\n                if (rewritesResult.matchedPage && rewritesResult.resolvedHref) {\n                    // if this directly matches a page we need to update the href to\n                    // allow the correct page chunk to be loaded\n                    pathname = rewritesResult.resolvedHref;\n                    parsed.pathname = addBasePath(pathname);\n                    url = (0, _formatUrl).formatWithValidation(parsed);\n                }\n            } else {\n                parsed.pathname = resolveDynamicRoute(pathname, pages);\n                if (parsed.pathname !== pathname) {\n                    pathname = parsed.pathname;\n                    parsed.pathname = addBasePath(pathname);\n                    url = (0, _formatUrl).formatWithValidation(parsed);\n                }\n            }\n        }\n        if (!isLocalURL(as)) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error(`Invalid href: \"${url}\" and as: \"${as}\", received relative href and external as` + `\\nSee more info: https://nextjs.org/docs/messages/invalid-relative-url-external-as`);\n            }\n            window.location.href = as;\n            return false;\n        }\n        resolvedAs = delLocale(delBasePath(resolvedAs), nextState.locale);\n        /**\n     * If the route update was triggered for client-side hydration and\n     * the rendered route is not dynamic do not check the preflight\n     * request as it is not necessary.\n     */ if ((!options.shallow || options._h === 1) && (options._h !== 1 || (0, _isDynamic).isDynamicRoute((0, _normalizeTrailingSlash).removePathTrailingSlash(pathname)))) {\n            const effect = await this._preflightRequest({\n                as,\n                cache: process.env.NODE_ENV === 'production',\n                pages,\n                pathname,\n                query,\n                locale: nextState.locale,\n                isPreview: nextState.isPreview\n            });\n            if (effect.type === 'rewrite') {\n                query = {\n                    ...query,\n                    ...effect.parsedAs.query\n                };\n                resolvedAs = effect.asPath;\n                pathname = effect.resolvedHref;\n                parsed.pathname = effect.resolvedHref;\n                url = (0, _formatUrl).formatWithValidation(parsed);\n            } else if (effect.type === 'redirect' && effect.newAs) {\n                return this.change(method, effect.newUrl, effect.newAs, options);\n            } else if (effect.type === 'redirect' && effect.destination) {\n                window.location.href = effect.destination;\n                return new Promise(()=>{});\n            } else if (effect.type === 'refresh' && as !== window.location.pathname) {\n                window.location.href = as;\n                return new Promise(()=>{});\n            }\n        }\n        const route = (0, _normalizeTrailingSlash).removePathTrailingSlash(pathname);\n        if ((0, _isDynamic).isDynamicRoute(route)) {\n            const parsedAs = (0, _parseRelativeUrl).parseRelativeUrl(resolvedAs);\n            const asPathname = parsedAs.pathname;\n            const routeRegex = (0, _routeRegex).getRouteRegex(route);\n            const routeMatch = (0, _routeMatcher).getRouteMatcher(routeRegex)(asPathname);\n            const shouldInterpolate = route === asPathname;\n            const interpolatedAs = shouldInterpolate ? interpolateAs(route, asPathname, query) : {};\n            if (!routeMatch || shouldInterpolate && !interpolatedAs.result) {\n                const missingParams = Object.keys(routeRegex.groups).filter((param)=>!query[param]\n                );\n                if (missingParams.length > 0) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        console.warn(`${shouldInterpolate ? `Interpolating href` : `Mismatching \\`as\\` and \\`href\\``} failed to manually provide ` + `the params: ${missingParams.join(', ')} in the \\`href\\`'s \\`query\\``);\n                    }\n                    throw new Error((shouldInterpolate ? `The provided \\`href\\` (${url}) value is missing query values (${missingParams.join(', ')}) to be interpolated properly. ` : `The provided \\`as\\` value (${asPathname}) is incompatible with the \\`href\\` value (${route}). `) + `Read more: https://nextjs.org/docs/messages/${shouldInterpolate ? 'href-interpolation-failed' : 'incompatible-href-as'}`);\n                }\n            } else if (shouldInterpolate) {\n                as = (0, _formatUrl).formatWithValidation(Object.assign({}, parsedAs, {\n                    pathname: interpolatedAs.result,\n                    query: omitParmsFromQuery(query, interpolatedAs.params)\n                }));\n            } else {\n                // Merge params into `query`, overwriting any specified in search\n                Object.assign(query, routeMatch);\n            }\n        }\n        Router.events.emit('routeChangeStart', as, routeProps);\n        try {\n            var ref1, ref2;\n            let routeInfo = await this.getRouteInfo(route, pathname, query, as, resolvedAs, routeProps, nextState.locale, nextState.isPreview);\n            let { error , props , __N_SSG , __N_SSP  } = routeInfo;\n            // handle redirect on client-transition\n            if ((__N_SSG || __N_SSP) && props) {\n                if (props.pageProps && props.pageProps.__N_REDIRECT) {\n                    const destination = props.pageProps.__N_REDIRECT;\n                    // check if destination is internal (resolves to a page) and attempt\n                    // client-navigation if it is falling back to hard navigation if\n                    // it's not\n                    if (destination.startsWith('/') && props.pageProps.__N_REDIRECT_BASE_PATH !== false) {\n                        const parsedHref = (0, _parseRelativeUrl).parseRelativeUrl(destination);\n                        parsedHref.pathname = resolveDynamicRoute(parsedHref.pathname, pages);\n                        const { url: newUrl , as: newAs  } = prepareUrlAs(this, destination, destination);\n                        return this.change(method, newUrl, newAs, options);\n                    }\n                    window.location.href = destination;\n                    return new Promise(()=>{});\n                }\n                nextState.isPreview = !!props.__N_PREVIEW;\n                // handle SSG data 404\n                if (props.notFound === SSG_DATA_NOT_FOUND) {\n                    let notFoundRoute;\n                    try {\n                        await this.fetchComponent('/404');\n                        notFoundRoute = '/404';\n                    } catch (_) {\n                        notFoundRoute = '/_error';\n                    }\n                    routeInfo = await this.getRouteInfo(notFoundRoute, notFoundRoute, query, as, resolvedAs, {\n                        shallow: false\n                    }, nextState.locale, nextState.isPreview);\n                }\n            }\n            Router.events.emit('beforeHistoryChange', as, routeProps);\n            this.changeState(method, url, as, options);\n            if (options._h && pathname === '/_error' && ((ref1 = self.__NEXT_DATA__.props) === null || ref1 === void 0 ? void 0 : (ref2 = ref1.pageProps) === null || ref2 === void 0 ? void 0 : ref2.statusCode) === 500 && (props === null || props === void 0 ? void 0 : props.pageProps)) {\n                // ensure statusCode is still correct for static 500 page\n                // when updating query information\n                props.pageProps.statusCode = 500;\n            }\n            // shallow routing is only allowed for same page URL changes.\n            const isValidShallowRoute = options.shallow && nextState.route === route;\n            var _scroll;\n            const shouldScroll = (_scroll = options.scroll) !== null && _scroll !== void 0 ? _scroll : !isValidShallowRoute;\n            const resetScroll = shouldScroll ? {\n                x: 0,\n                y: 0\n            } : null;\n            await this.set({\n                ...nextState,\n                route,\n                pathname,\n                query,\n                asPath: cleanedAs,\n                isFallback: false\n            }, routeInfo, forcedScroll !== null && forcedScroll !== void 0 ? forcedScroll : resetScroll).catch((e)=>{\n                if (e.cancelled) error = error || e;\n                else throw e;\n            });\n            if (error) {\n                Router.events.emit('routeChangeError', error, cleanedAs, routeProps);\n                throw error;\n            }\n            if (process.env.__NEXT_I18N_SUPPORT) {\n                if (nextState.locale) {\n                    document.documentElement.lang = nextState.locale;\n                }\n            }\n            Router.events.emit('routeChangeComplete', as, routeProps);\n            return true;\n        } catch (err1) {\n            if ((0, _isError).default(err1) && err1.cancelled) {\n                return false;\n            }\n            throw err1;\n        }\n    }\n    changeState(method, url, as, options = {}) {\n        if (process.env.NODE_ENV !== 'production') {\n            if (typeof window.history === 'undefined') {\n                console.error(`Warning: window.history is not available.`);\n                return;\n            }\n            if (typeof window.history[method] === 'undefined') {\n                console.error(`Warning: window.history.${method} is not available`);\n                return;\n            }\n        }\n        if (method !== 'pushState' || (0, _utils).getURL() !== as) {\n            this._shallow = options.shallow;\n            window.history[method]({\n                url,\n                as,\n                options,\n                __N: true,\n                idx: this._idx = method !== 'pushState' ? this._idx : this._idx + 1\n            }, // Most browsers currently ignores this parameter, although they may use it in the future.\n            // Passing the empty string here should be safe against future changes to the method.\n            // https://developer.mozilla.org/en-US/docs/Web/API/History/replaceState\n            '', as);\n        }\n    }\n    async handleRouteInfoError(err, pathname, query, as, routeProps, loadErrorFail) {\n        if (err.cancelled) {\n            // bubble up cancellation errors\n            throw err;\n        }\n        if ((0, _routeLoader).isAssetError(err) || loadErrorFail) {\n            Router.events.emit('routeChangeError', err, as, routeProps);\n            // If we can't load the page it could be one of following reasons\n            //  1. Page doesn't exists\n            //  2. Page does exist in a different zone\n            //  3. Internal error while loading the page\n            // So, doing a hard reload is the proper way to deal with this.\n            window.location.href = as;\n            // Changing the URL doesn't block executing the current code path.\n            // So let's throw a cancellation error stop the routing logic.\n            throw buildCancellationError();\n        }\n        try {\n            let Component;\n            let styleSheets;\n            let props;\n            if (typeof Component === 'undefined' || typeof styleSheets === 'undefined') {\n                ({ page: Component , styleSheets  } = await this.fetchComponent('/_error'));\n            }\n            const routeInfo = {\n                props,\n                Component,\n                styleSheets,\n                err,\n                error: err\n            };\n            if (!routeInfo.props) {\n                try {\n                    routeInfo.props = await this.getInitialProps(Component, {\n                        err,\n                        pathname,\n                        query\n                    });\n                } catch (gipErr) {\n                    console.error('Error in error page `getInitialProps`: ', gipErr);\n                    routeInfo.props = {};\n                }\n            }\n            return routeInfo;\n        } catch (routeInfoErr) {\n            return this.handleRouteInfoError((0, _isError).default(routeInfoErr) ? routeInfoErr : new Error(routeInfoErr + ''), pathname, query, as, routeProps, true);\n        }\n    }\n    async getRouteInfo(route, pathname, query, as, resolvedAs, routeProps, locale, isPreview) {\n        try {\n            const existingRouteInfo = this.components[route];\n            if (routeProps.shallow && existingRouteInfo && this.route === route) {\n                return existingRouteInfo;\n            }\n            let cachedRouteInfo = undefined;\n            // can only use non-initial route info\n            // cannot reuse route info in development since it can change after HMR\n            if (process.env.NODE_ENV !== 'development' && existingRouteInfo && !('initial' in existingRouteInfo)) {\n                cachedRouteInfo = existingRouteInfo;\n            }\n            const routeInfo = cachedRouteInfo || await this.fetchComponent(route).then((res)=>({\n                    Component: res.page,\n                    styleSheets: res.styleSheets,\n                    __N_SSG: res.mod.__N_SSG,\n                    __N_SSP: res.mod.__N_SSP,\n                    __N_RSC: !!res.mod.__next_rsc__\n                })\n            );\n            const { Component , __N_SSG , __N_SSP , __N_RSC  } = routeInfo;\n            if (process.env.NODE_ENV !== 'production') {\n                const { isValidElementType  } = require('next/dist/compiled/react-is');\n                if (!isValidElementType(Component)) {\n                    throw new Error(`The default export is not a React Component in page: \"${pathname}\"`);\n                }\n            }\n            let dataHref;\n            if (__N_SSG || __N_SSP || __N_RSC) {\n                dataHref = this.pageLoader.getDataHref({\n                    href: (0, _formatUrl).formatWithValidation({\n                        pathname,\n                        query\n                    }),\n                    asPath: resolvedAs,\n                    ssg: __N_SSG,\n                    rsc: __N_RSC,\n                    locale\n                });\n            }\n            const props = await this._getData(()=>__N_SSG || __N_SSP ? fetchNextData(dataHref, this.isSsr, false, __N_SSG ? this.sdc : this.sdr, !!__N_SSG && !isPreview) : this.getInitialProps(Component, // we provide AppTree later so this needs to be `any`\n                {\n                    pathname,\n                    query,\n                    asPath: as,\n                    locale,\n                    locales: this.locales,\n                    defaultLocale: this.defaultLocale\n                })\n            );\n            if (__N_RSC) {\n                const { fresh , data  } = await this._getData(()=>this._getFlightData(dataHref)\n                );\n                props.pageProps = Object.assign(props.pageProps, {\n                    __flight_serialized__: data,\n                    __flight_fresh__: fresh\n                });\n            }\n            routeInfo.props = props;\n            this.components[route] = routeInfo;\n            return routeInfo;\n        } catch (err) {\n            return this.handleRouteInfoError((0, _isError).getProperError(err), pathname, query, as, routeProps);\n        }\n    }\n    set(state, data, resetScroll) {\n        this.state = state;\n        return this.sub(data, this.components['/_app'].Component, resetScroll);\n    }\n    /**\n   * Callback to execute before replacing router state\n   * @param cb callback to be executed\n   */ beforePopState(cb) {\n        this._bps = cb;\n    }\n    onlyAHashChange(as) {\n        if (!this.asPath) return false;\n        const [oldUrlNoHash, oldHash] = this.asPath.split('#');\n        const [newUrlNoHash, newHash] = as.split('#');\n        // Makes sure we scroll to the provided hash if the url/hash are the same\n        if (newHash && oldUrlNoHash === newUrlNoHash && oldHash === newHash) {\n            return true;\n        }\n        // If the urls are change, there's more than a hash change\n        if (oldUrlNoHash !== newUrlNoHash) {\n            return false;\n        }\n        // If the hash has changed, then it's a hash only change.\n        // This check is necessary to handle both the enter and\n        // leave hash === '' cases. The identity case falls through\n        // and is treated as a next reload.\n        return oldHash !== newHash;\n    }\n    scrollToHash(as) {\n        const [, hash = ''] = as.split('#');\n        // Scroll to top if the hash is just `#` with no value or `#top`\n        // To mirror browsers\n        if (hash === '' || hash === 'top') {\n            window.scrollTo(0, 0);\n            return;\n        }\n        // First we check if the element by id is found\n        const idEl = document.getElementById(hash);\n        if (idEl) {\n            idEl.scrollIntoView();\n            return;\n        }\n        // If there's no element with the id, we check the `name` property\n        // To mirror browsers\n        const nameEl = document.getElementsByName(hash)[0];\n        if (nameEl) {\n            nameEl.scrollIntoView();\n        }\n    }\n    urlIsNew(asPath) {\n        return this.asPath !== asPath;\n    }\n    /**\n   * Prefetch page code, you may wait for the data during page rendering.\n   * This feature only works in production!\n   * @param url the href of prefetched page\n   * @param asPath the as path of the prefetched page\n   */ async prefetch(url, asPath = url, options = {}) {\n        let parsed = (0, _parseRelativeUrl).parseRelativeUrl(url);\n        let { pathname , query  } = parsed;\n        if (process.env.__NEXT_I18N_SUPPORT) {\n            if (options.locale === false) {\n                pathname = (0, _normalizeLocalePath).normalizeLocalePath(pathname, this.locales).pathname;\n                parsed.pathname = pathname;\n                url = (0, _formatUrl).formatWithValidation(parsed);\n                let parsedAs = (0, _parseRelativeUrl).parseRelativeUrl(asPath);\n                const localePathResult = (0, _normalizeLocalePath).normalizeLocalePath(parsedAs.pathname, this.locales);\n                parsedAs.pathname = localePathResult.pathname;\n                options.locale = localePathResult.detectedLocale || this.defaultLocale;\n                asPath = (0, _formatUrl).formatWithValidation(parsedAs);\n            }\n        }\n        const pages = await this.pageLoader.getPageList();\n        let resolvedAs = asPath;\n        if (process.env.__NEXT_HAS_REWRITES && asPath.startsWith('/')) {\n            let rewrites;\n            ({ __rewrites: rewrites  } = await (0, _routeLoader).getClientBuildManifest());\n            const rewritesResult = (0, _resolveRewrites).default(addBasePath(addLocale(asPath, this.locale)), pages, rewrites, parsed.query, (p)=>resolveDynamicRoute(p, pages)\n            , this.locales);\n            if (rewritesResult.externalDest) {\n                return;\n            }\n            resolvedAs = delLocale(delBasePath(rewritesResult.asPath), this.locale);\n            if (rewritesResult.matchedPage && rewritesResult.resolvedHref) {\n                // if this directly matches a page we need to update the href to\n                // allow the correct page chunk to be loaded\n                pathname = rewritesResult.resolvedHref;\n                parsed.pathname = pathname;\n                url = (0, _formatUrl).formatWithValidation(parsed);\n            }\n        } else {\n            parsed.pathname = resolveDynamicRoute(parsed.pathname, pages);\n            if (parsed.pathname !== pathname) {\n                pathname = parsed.pathname;\n                parsed.pathname = pathname;\n                url = (0, _formatUrl).formatWithValidation(parsed);\n            }\n        }\n        // Prefetch is not supported in development mode because it would trigger on-demand-entries\n        if (process.env.NODE_ENV !== 'production') {\n            return;\n        }\n        const effects = await this._preflightRequest({\n            as: addBasePath(asPath),\n            cache: true,\n            pages,\n            pathname,\n            query,\n            locale: this.locale,\n            isPreview: this.isPreview\n        });\n        if (effects.type === 'rewrite') {\n            parsed.pathname = effects.resolvedHref;\n            pathname = effects.resolvedHref;\n            query = {\n                ...query,\n                ...effects.parsedAs.query\n            };\n            resolvedAs = effects.asPath;\n            url = (0, _formatUrl).formatWithValidation(parsed);\n        }\n        const route = (0, _normalizeTrailingSlash).removePathTrailingSlash(pathname);\n        await Promise.all([\n            this.pageLoader._isSsg(route).then((isSsg)=>{\n                return isSsg ? fetchNextData(this.pageLoader.getDataHref({\n                    href: url,\n                    asPath: resolvedAs,\n                    ssg: true,\n                    locale: typeof options.locale !== 'undefined' ? options.locale : this.locale\n                }), false, false, this.sdc, true) : false;\n            }),\n            this.pageLoader[options.priority ? 'loadPage' : 'prefetch'](route), \n        ]);\n    }\n    async fetchComponent(route) {\n        let cancelled = false;\n        const cancel = this.clc = ()=>{\n            cancelled = true;\n        };\n        const handleCancelled = ()=>{\n            if (cancelled) {\n                const error = new Error(`Abort fetching component for route: \"${route}\"`);\n                error.cancelled = true;\n                throw error;\n            }\n            if (cancel === this.clc) {\n                this.clc = null;\n            }\n        };\n        try {\n            const componentResult = await this.pageLoader.loadPage(route);\n            handleCancelled();\n            return componentResult;\n        } catch (err) {\n            handleCancelled();\n            throw err;\n        }\n    }\n    _getData(fn) {\n        let cancelled = false;\n        const cancel = ()=>{\n            cancelled = true;\n        };\n        this.clc = cancel;\n        return fn().then((data)=>{\n            if (cancel === this.clc) {\n                this.clc = null;\n            }\n            if (cancelled) {\n                const err = new Error('Loading initial props cancelled');\n                err.cancelled = true;\n                throw err;\n            }\n            return data;\n        });\n    }\n    _getFlightData(dataHref) {\n        // Do not cache RSC flight response since it's not a static resource\n        return fetchNextData(dataHref, true, true, this.sdc, false).then((serialized)=>{\n            return {\n                fresh: true,\n                data: serialized\n            };\n        });\n    }\n    async _preflightRequest(options) {\n        const asPathname = pathNoQueryHash(options.as);\n        const cleanedAs = delLocale(hasBasePath(asPathname) ? delBasePath(asPathname) : asPathname, options.locale);\n        const fns = await this.pageLoader.getMiddlewareList();\n        const requiresPreflight = fns.some(([middleware, isSSR])=>{\n            return (0, _routeMatcher).getRouteMatcher((0, _getMiddlewareRegex).getMiddlewareRegex(middleware, !isSSR))(cleanedAs);\n        });\n        if (!requiresPreflight) {\n            return {\n                type: 'next'\n            };\n        }\n        let preflight;\n        try {\n            preflight = await this._getPreflightData({\n                preflightHref: options.as,\n                shouldCache: options.cache,\n                isPreview: options.isPreview\n            });\n        } catch (err) {\n            // If preflight request fails, we need to do a hard-navigation.\n            return {\n                type: 'redirect',\n                destination: options.as\n            };\n        }\n        if (preflight.rewrite) {\n            // for external rewrites we need to do a hard navigation\n            // to the resource\n            if (!preflight.rewrite.startsWith('/')) {\n                return {\n                    type: 'redirect',\n                    destination: options.as\n                };\n            }\n            const parsed = (0, _parseRelativeUrl).parseRelativeUrl((0, _normalizeLocalePath).normalizeLocalePath(hasBasePath(preflight.rewrite) ? delBasePath(preflight.rewrite) : preflight.rewrite, this.locales).pathname);\n            const fsPathname = (0, _normalizeTrailingSlash).removePathTrailingSlash(parsed.pathname);\n            let matchedPage;\n            let resolvedHref;\n            if (options.pages.includes(fsPathname)) {\n                matchedPage = true;\n                resolvedHref = fsPathname;\n            } else {\n                resolvedHref = resolveDynamicRoute(fsPathname, options.pages);\n                if (resolvedHref !== parsed.pathname && options.pages.includes(resolvedHref)) {\n                    matchedPage = true;\n                }\n            }\n            return {\n                type: 'rewrite',\n                asPath: parsed.pathname,\n                parsedAs: parsed,\n                matchedPage,\n                resolvedHref\n            };\n        }\n        if (preflight.redirect) {\n            if (preflight.redirect.startsWith('/')) {\n                const cleanRedirect = (0, _normalizeTrailingSlash).removePathTrailingSlash((0, _normalizeLocalePath).normalizeLocalePath(hasBasePath(preflight.redirect) ? delBasePath(preflight.redirect) : preflight.redirect, this.locales).pathname);\n                const { url: newUrl , as: newAs  } = prepareUrlAs(this, cleanRedirect, cleanRedirect);\n                return {\n                    type: 'redirect',\n                    newUrl,\n                    newAs\n                };\n            }\n            return {\n                type: 'redirect',\n                destination: preflight.redirect\n            };\n        }\n        // For SSR requests, they will be handled like normal pages.\n        if (preflight.refresh && !preflight.ssr) {\n            return {\n                type: 'refresh'\n            };\n        }\n        return {\n            type: 'next'\n        };\n    }\n    _getPreflightData(params) {\n        const { preflightHref , shouldCache =false , isPreview  } = params;\n        const { href: cacheKey  } = new URL(preflightHref, window.location.href);\n        if (process.env.NODE_ENV === 'production' && !isPreview && shouldCache && this.sde[cacheKey]) {\n            return Promise.resolve(this.sde[cacheKey]);\n        }\n        return fetch(preflightHref, {\n            method: 'HEAD',\n            credentials: 'same-origin',\n            headers: {\n                'x-middleware-preflight': '1'\n            }\n        }).then((res)=>{\n            if (!res.ok) {\n                throw new Error(`Failed to preflight request`);\n            }\n            return {\n                cache: res.headers.get('x-middleware-cache'),\n                redirect: res.headers.get('Location'),\n                refresh: res.headers.has('x-middleware-refresh'),\n                rewrite: res.headers.get('x-middleware-rewrite'),\n                ssr: !!res.headers.get('x-middleware-ssr')\n            };\n        }).then((data)=>{\n            if (shouldCache && data.cache !== 'no-cache') {\n                this.sde[cacheKey] = data;\n            }\n            return data;\n        }).catch((err)=>{\n            delete this.sde[cacheKey];\n            throw err;\n        });\n    }\n    getInitialProps(Component, ctx) {\n        const { Component: App  } = this.components['/_app'];\n        const AppTree = this._wrapApp(App);\n        ctx.AppTree = AppTree;\n        return (0, _utils).loadGetInitialProps(App, {\n            AppTree,\n            Component,\n            router: this,\n            ctx\n        });\n    }\n    abortComponentLoad(as, routeProps) {\n        if (this.clc) {\n            Router.events.emit('routeChangeError', buildCancellationError(), as, routeProps);\n            this.clc();\n            this.clc = null;\n        }\n    }\n    get route() {\n        return this.state.route;\n    }\n    get pathname() {\n        return this.state.pathname;\n    }\n    get query() {\n        return this.state.query;\n    }\n    get asPath() {\n        return this.state.asPath;\n    }\n    get locale() {\n        return this.state.locale;\n    }\n    get isFallback() {\n        return this.state.isFallback;\n    }\n    get isPreview() {\n        return this.state.isPreview;\n    }\n}\nexports.default = Router;\nRouter.events = (0, _mitt).default();\n\n//# sourceMappingURL=router.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.formatUrl = formatUrl;\nexports.formatWithValidation = formatWithValidation;\nexports.urlObjectKeys = void 0;\nvar querystring = _interopRequireWildcard(require(\"./querystring\"));\nfunction _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n        return obj;\n    } else {\n        var newObj = {};\n        if (obj != null) {\n            for(var key in obj){\n                if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                    var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n                    if (desc.get || desc.set) {\n                        Object.defineProperty(newObj, key, desc);\n                    } else {\n                        newObj[key] = obj[key];\n                    }\n                }\n            }\n        }\n        newObj.default = obj;\n        return newObj;\n    }\n}\nconst slashedProtocols = /https?|ftp|gopher|file/;\nfunction formatUrl(urlObj) {\n    let { auth , hostname  } = urlObj;\n    let protocol = urlObj.protocol || '';\n    let pathname = urlObj.pathname || '';\n    let hash = urlObj.hash || '';\n    let query = urlObj.query || '';\n    let host = false;\n    auth = auth ? encodeURIComponent(auth).replace(/%3A/i, ':') + '@' : '';\n    if (urlObj.host) {\n        host = auth + urlObj.host;\n    } else if (hostname) {\n        host = auth + (~hostname.indexOf(':') ? `[${hostname}]` : hostname);\n        if (urlObj.port) {\n            host += ':' + urlObj.port;\n        }\n    }\n    if (query && typeof query === 'object') {\n        query = String(querystring.urlQueryToSearchParams(query));\n    }\n    let search = urlObj.search || query && `?${query}` || '';\n    if (protocol && !protocol.endsWith(':')) protocol += ':';\n    if (urlObj.slashes || (!protocol || slashedProtocols.test(protocol)) && host !== false) {\n        host = '//' + (host || '');\n        if (pathname && pathname[0] !== '/') pathname = '/' + pathname;\n    } else if (!host) {\n        host = '';\n    }\n    if (hash && hash[0] !== '#') hash = '#' + hash;\n    if (search && search[0] !== '?') search = '?' + search;\n    pathname = pathname.replace(/[?#]/g, encodeURIComponent);\n    search = search.replace('#', '%23');\n    return `${protocol}${host}${pathname}${search}${hash}`;\n}\nconst urlObjectKeys = [\n    'auth',\n    'hash',\n    'host',\n    'hostname',\n    'href',\n    'path',\n    'pathname',\n    'port',\n    'protocol',\n    'query',\n    'search',\n    'slashes', \n];\nexports.urlObjectKeys = urlObjectKeys;\nfunction formatWithValidation(url) {\n    if (process.env.NODE_ENV === 'development') {\n        if (url !== null && typeof url === 'object') {\n            Object.keys(url).forEach((key)=>{\n                if (urlObjectKeys.indexOf(key) === -1) {\n                    console.warn(`Unknown key passed via urlObject into url.format: ${key}`);\n                }\n            });\n        }\n    }\n    return formatUrl(url);\n}\n\n//# sourceMappingURL=format-url.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = getAssetPathFromRoute;\nfunction getAssetPathFromRoute(route, ext = '') {\n    const path = route === '/' ? '/index' : /^\\/index(\\/|$)/.test(route) ? `/index${route}` : `${route}`;\n    return path + ext;\n}\n\n//# sourceMappingURL=get-asset-path-from-route.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getMiddlewareRegex = getMiddlewareRegex;\nvar _routeRegex = require(\"./route-regex\");\nfunction getMiddlewareRegex(normalizedRoute, catchAll = true) {\n    const result = (0, _routeRegex).getParametrizedRoute(normalizedRoute);\n    let catchAllRegex = catchAll ? '(?!_next).*' : '';\n    let catchAllGroupedRegex = catchAll ? '(?:(/.*)?)' : '';\n    if ('routeKeys' in result) {\n        if (result.parameterizedRoute === '/') {\n            return {\n                groups: {},\n                namedRegex: `^/${catchAllRegex}$`,\n                re: new RegExp(`^/${catchAllRegex}$`),\n                routeKeys: {}\n            };\n        }\n        return {\n            groups: result.groups,\n            namedRegex: `^${result.namedParameterizedRoute}${catchAllGroupedRegex}$`,\n            re: new RegExp(`^${result.parameterizedRoute}${catchAllGroupedRegex}$`),\n            routeKeys: result.routeKeys\n        };\n    }\n    if (result.parameterizedRoute === '/') {\n        return {\n            groups: {},\n            re: new RegExp(`^/${catchAllRegex}$`)\n        };\n    }\n    return {\n        groups: {},\n        re: new RegExp(`^${result.parameterizedRoute}${catchAllGroupedRegex}$`)\n    };\n}\n\n//# sourceMappingURL=get-middleware-regex.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nObject.defineProperty(exports, \"getMiddlewareRegex\", {\n    enumerable: true,\n    get: function() {\n        return _getMiddlewareRegex.getMiddlewareRegex;\n    }\n});\nObject.defineProperty(exports, \"getRouteMatcher\", {\n    enumerable: true,\n    get: function() {\n        return _routeMatcher.getRouteMatcher;\n    }\n});\nObject.defineProperty(exports, \"getRouteRegex\", {\n    enumerable: true,\n    get: function() {\n        return _routeRegex.getRouteRegex;\n    }\n});\nObject.defineProperty(exports, \"getSortedRoutes\", {\n    enumerable: true,\n    get: function() {\n        return _sortedRoutes.getSortedRoutes;\n    }\n});\nObject.defineProperty(exports, \"isDynamicRoute\", {\n    enumerable: true,\n    get: function() {\n        return _isDynamic.isDynamicRoute;\n    }\n});\nvar _getMiddlewareRegex = require(\"./get-middleware-regex\");\nvar _routeMatcher = require(\"./route-matcher\");\nvar _routeRegex = require(\"./route-regex\");\nvar _sortedRoutes = require(\"./sorted-routes\");\nvar _isDynamic = require(\"./is-dynamic\");\n\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.isDynamicRoute = isDynamicRoute;\n// Identify /[param]/ in route string\nconst TEST_ROUTE = /\\/\\[[^/]+?\\](?=\\/|$)/;\nfunction isDynamicRoute(route) {\n    return TEST_ROUTE.test(route);\n}\n\n//# sourceMappingURL=is-dynamic.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.parseRelativeUrl = parseRelativeUrl;\nvar _utils = require(\"../../utils\");\nvar _querystring = require(\"./querystring\");\nfunction parseRelativeUrl(url, base) {\n    const globalBase = new URL(typeof window === 'undefined' ? 'http://n' : (0, _utils).getLocationOrigin());\n    const resolvedBase = base ? new URL(base, globalBase) : globalBase;\n    const { pathname , searchParams , search , hash , href , origin  } = new URL(url, resolvedBase);\n    if (origin !== globalBase.origin) {\n        throw new Error(`invariant: invalid relative URL, router received ${url}`);\n    }\n    return {\n        pathname,\n        query: (0, _querystring).searchParamsToUrlQuery(searchParams),\n        search,\n        hash,\n        href: href.slice(globalBase.origin.length)\n    };\n}\n\n//# sourceMappingURL=parse-relative-url.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.parseUrl = parseUrl;\nvar _querystring = require(\"./querystring\");\nvar _parseRelativeUrl = require(\"./parse-relative-url\");\nfunction parseUrl(url) {\n    if (url.startsWith('/')) {\n        return (0, _parseRelativeUrl).parseRelativeUrl(url);\n    }\n    const parsedURL = new URL(url);\n    return {\n        hash: parsedURL.hash,\n        hostname: parsedURL.hostname,\n        href: parsedURL.href,\n        pathname: parsedURL.pathname,\n        port: parsedURL.port,\n        protocol: parsedURL.protocol,\n        query: (0, _querystring).searchParamsToUrlQuery(parsedURL.searchParams),\n        search: parsedURL.search\n    };\n}\n\n//# sourceMappingURL=parse-url.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = exports.customRouteMatcherOptions = exports.matcherOptions = exports.pathToRegexp = void 0;\nvar pathToRegexp = _interopRequireWildcard(require(\"next/dist/compiled/path-to-regexp\"));\nexports.pathToRegexp = pathToRegexp;\nfunction _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n        return obj;\n    } else {\n        var newObj = {};\n        if (obj != null) {\n            for(var key in obj){\n                if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                    var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n                    if (desc.get || desc.set) {\n                        Object.defineProperty(newObj, key, desc);\n                    } else {\n                        newObj[key] = obj[key];\n                    }\n                }\n            }\n        }\n        newObj.default = obj;\n        return newObj;\n    }\n}\nconst matcherOptions = {\n    sensitive: false,\n    delimiter: '/'\n};\nexports.matcherOptions = matcherOptions;\nconst customRouteMatcherOptions = {\n    ...matcherOptions,\n    strict: true\n};\nexports.customRouteMatcherOptions = customRouteMatcherOptions;\nvar _default = (customRoute = false)=>{\n    return (path, regexModifier)=>{\n        const keys = [];\n        let matcherRegex = pathToRegexp.pathToRegexp(path, keys, customRoute ? customRouteMatcherOptions : matcherOptions);\n        if (regexModifier) {\n            const regexSource = regexModifier(matcherRegex.source);\n            matcherRegex = new RegExp(regexSource, matcherRegex.flags);\n        }\n        const matcher = pathToRegexp.regexpToFunction(matcherRegex, keys);\n        return (pathname, params)=>{\n            const res = pathname == null ? false : matcher(pathname);\n            if (!res) {\n                return false;\n            }\n            if (customRoute) {\n                for (const key of keys){\n                    // unnamed params should be removed as they\n                    // are not allowed to be used in the destination\n                    if (typeof key.name === 'number') {\n                        delete res.params[key.name];\n                    }\n                }\n            }\n            return {\n                ...params,\n                ...res.params\n            };\n        };\n    };\n};\nexports.default = _default;\n\n//# sourceMappingURL=path-match.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.matchHas = matchHas;\nexports.compileNonPath = compileNonPath;\nexports.prepareDestination = prepareDestination;\nvar _pathToRegexp = require(\"next/dist/compiled/path-to-regexp\");\nvar _escapeRegexp = require(\"../../escape-regexp\");\nvar _parseUrl = require(\"./parse-url\");\nfunction matchHas(req, has, query) {\n    const params = {};\n    const allMatch = has.every((hasItem)=>{\n        let value;\n        let key = hasItem.key;\n        switch(hasItem.type){\n            case 'header':\n                {\n                    key = key.toLowerCase();\n                    value = req.headers[key];\n                    break;\n                }\n            case 'cookie':\n                {\n                    value = req.cookies[hasItem.key];\n                    break;\n                }\n            case 'query':\n                {\n                    value = query[key];\n                    break;\n                }\n            case 'host':\n                {\n                    const { host  } = (req === null || req === void 0 ? void 0 : req.headers) || {};\n                    // remove port from host if present\n                    const hostname = host === null || host === void 0 ? void 0 : host.split(':')[0].toLowerCase();\n                    value = hostname;\n                    break;\n                }\n            default:\n                {\n                    break;\n                }\n        }\n        if (!hasItem.value && value) {\n            params[getSafeParamName(key)] = value;\n            return true;\n        } else if (value) {\n            const matcher = new RegExp(`^${hasItem.value}$`);\n            const matches = Array.isArray(value) ? value.slice(-1)[0].match(matcher) : value.match(matcher);\n            if (matches) {\n                if (Array.isArray(matches)) {\n                    if (matches.groups) {\n                        Object.keys(matches.groups).forEach((groupKey)=>{\n                            params[groupKey] = matches.groups[groupKey];\n                        });\n                    } else if (hasItem.type === 'host' && matches[0]) {\n                        params.host = matches[0];\n                    }\n                }\n                return true;\n            }\n        }\n        return false;\n    });\n    if (allMatch) {\n        return params;\n    }\n    return false;\n}\nfunction compileNonPath(value, params) {\n    if (!value.includes(':')) {\n        return value;\n    }\n    for (const key of Object.keys(params)){\n        if (value.includes(`:${key}`)) {\n            value = value.replace(new RegExp(`:${key}\\\\*`, 'g'), `:${key}--ESCAPED_PARAM_ASTERISKS`).replace(new RegExp(`:${key}\\\\?`, 'g'), `:${key}--ESCAPED_PARAM_QUESTION`).replace(new RegExp(`:${key}\\\\+`, 'g'), `:${key}--ESCAPED_PARAM_PLUS`).replace(new RegExp(`:${key}(?!\\\\w)`, 'g'), `--ESCAPED_PARAM_COLON${key}`);\n        }\n    }\n    value = value.replace(/(:|\\*|\\?|\\+|\\(|\\)|\\{|\\})/g, '\\\\$1').replace(/--ESCAPED_PARAM_PLUS/g, '+').replace(/--ESCAPED_PARAM_COLON/g, ':').replace(/--ESCAPED_PARAM_QUESTION/g, '?').replace(/--ESCAPED_PARAM_ASTERISKS/g, '*');\n    // the value needs to start with a forward-slash to be compiled\n    // correctly\n    return (0, _pathToRegexp).compile(`/${value}`, {\n        validate: false\n    })(params).slice(1);\n}\nfunction prepareDestination(args) {\n    const query = Object.assign({}, args.query);\n    delete query.__nextLocale;\n    delete query.__nextDefaultLocale;\n    let escapedDestination = args.destination;\n    for (const param of Object.keys({\n        ...args.params,\n        ...query\n    })){\n        escapedDestination = escapeSegment(escapedDestination, param);\n    }\n    const parsedDestination = (0, _parseUrl).parseUrl(escapedDestination);\n    const destQuery = parsedDestination.query;\n    const destPath = unescapeSegments(`${parsedDestination.pathname}${parsedDestination.hash || ''}`);\n    const destHostname = unescapeSegments(parsedDestination.hostname || '');\n    const destPathParamKeys = [];\n    const destHostnameParamKeys = [];\n    (0, _pathToRegexp).pathToRegexp(destPath, destPathParamKeys);\n    (0, _pathToRegexp).pathToRegexp(destHostname, destHostnameParamKeys);\n    const destParams = [];\n    destPathParamKeys.forEach((key)=>destParams.push(key.name)\n    );\n    destHostnameParamKeys.forEach((key)=>destParams.push(key.name)\n    );\n    const destPathCompiler = (0, _pathToRegexp).compile(destPath, // we don't validate while compiling the destination since we should\n    // have already validated before we got to this point and validating\n    // breaks compiling destinations with named pattern params from the source\n    // e.g. /something:hello(.*) -> /another/:hello is broken with validation\n    // since compile validation is meant for reversing and not for inserting\n    // params from a separate path-regex into another\n    {\n        validate: false\n    });\n    const destHostnameCompiler = (0, _pathToRegexp).compile(destHostname, {\n        validate: false\n    });\n    // update any params in query values\n    for (const [key1, strOrArray] of Object.entries(destQuery)){\n        // the value needs to start with a forward-slash to be compiled\n        // correctly\n        if (Array.isArray(strOrArray)) {\n            destQuery[key1] = strOrArray.map((value)=>compileNonPath(unescapeSegments(value), args.params)\n            );\n        } else {\n            destQuery[key1] = compileNonPath(unescapeSegments(strOrArray), args.params);\n        }\n    }\n    // add path params to query if it's not a redirect and not\n    // already defined in destination query or path\n    let paramKeys = Object.keys(args.params).filter((name)=>name !== 'nextInternalLocale'\n    );\n    if (args.appendParamsToQuery && !paramKeys.some((key)=>destParams.includes(key)\n    )) {\n        for (const key of paramKeys){\n            if (!(key in destQuery)) {\n                destQuery[key] = args.params[key];\n            }\n        }\n    }\n    let newUrl;\n    try {\n        newUrl = destPathCompiler(args.params);\n        const [pathname, hash] = newUrl.split('#');\n        parsedDestination.hostname = destHostnameCompiler(args.params);\n        parsedDestination.pathname = pathname;\n        parsedDestination.hash = `${hash ? '#' : ''}${hash || ''}`;\n        delete parsedDestination.search;\n    } catch (err) {\n        if (err.message.match(/Expected .*? to not repeat, but got an array/)) {\n            throw new Error(`To use a multi-match in the destination you must add \\`*\\` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match`);\n        }\n        throw err;\n    }\n    // Query merge order lowest priority to highest\n    // 1. initial URL query values\n    // 2. path segment values\n    // 3. destination specified query values\n    parsedDestination.query = {\n        ...query,\n        ...parsedDestination.query\n    };\n    return {\n        newUrl,\n        parsedDestination\n    };\n}\n/**\n * Ensure only a-zA-Z are used for param names for proper interpolating\n * with path-to-regexp\n */ function getSafeParamName(paramName) {\n    let newParamName = '';\n    for(let i = 0; i < paramName.length; i++){\n        const charCode = paramName.charCodeAt(i);\n        if (charCode > 64 && charCode < 91 || charCode > 96 && charCode < 123 // a-z\n        ) {\n            newParamName += paramName[i];\n        }\n    }\n    return newParamName;\n}\nfunction escapeSegment(str, segmentName) {\n    return str.replace(new RegExp(`:${(0, _escapeRegexp).escapeStringRegexp(segmentName)}`, 'g'), `__ESC_COLON_${segmentName}`);\n}\nfunction unescapeSegments(str) {\n    return str.replace(/__ESC_COLON_/gi, ':');\n}\n\n//# sourceMappingURL=prepare-destination.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.searchParamsToUrlQuery = searchParamsToUrlQuery;\nexports.urlQueryToSearchParams = urlQueryToSearchParams;\nexports.assign = assign;\nfunction searchParamsToUrlQuery(searchParams) {\n    const query = {};\n    searchParams.forEach((value, key)=>{\n        if (typeof query[key] === 'undefined') {\n            query[key] = value;\n        } else if (Array.isArray(query[key])) {\n            query[key].push(value);\n        } else {\n            query[key] = [\n                query[key],\n                value\n            ];\n        }\n    });\n    return query;\n}\nfunction stringifyUrlQueryParam(param) {\n    if (typeof param === 'string' || typeof param === 'number' && !isNaN(param) || typeof param === 'boolean') {\n        return String(param);\n    } else {\n        return '';\n    }\n}\nfunction urlQueryToSearchParams(urlQuery) {\n    const result = new URLSearchParams();\n    Object.entries(urlQuery).forEach(([key, value])=>{\n        if (Array.isArray(value)) {\n            value.forEach((item)=>result.append(key, stringifyUrlQueryParam(item))\n            );\n        } else {\n            result.set(key, stringifyUrlQueryParam(value));\n        }\n    });\n    return result;\n}\nfunction assign(target, ...searchParamsList) {\n    searchParamsList.forEach((searchParams)=>{\n        Array.from(searchParams.keys()).forEach((key)=>target.delete(key)\n        );\n        searchParams.forEach((value, key)=>target.append(key, value)\n        );\n    });\n    return target;\n}\n\n//# sourceMappingURL=querystring.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = resolveRewrites;\nvar _pathMatch = _interopRequireDefault(require(\"./path-match\"));\nvar _prepareDestination = require(\"./prepare-destination\");\nvar _normalizeTrailingSlash = require(\"../../../../client/normalize-trailing-slash\");\nvar _normalizeLocalePath = require(\"../../i18n/normalize-locale-path\");\nvar _parseRelativeUrl = require(\"./parse-relative-url\");\nvar _router = require(\"../router\");\nfunction resolveRewrites(asPath, pages, rewrites, query, resolveHref, locales) {\n    let matchedPage = false;\n    let externalDest = false;\n    let parsedAs = (0, _parseRelativeUrl).parseRelativeUrl(asPath);\n    let fsPathname = (0, _normalizeTrailingSlash).removePathTrailingSlash((0, _normalizeLocalePath).normalizeLocalePath((0, _router).delBasePath(parsedAs.pathname), locales).pathname);\n    let resolvedHref;\n    const handleRewrite = (rewrite)=>{\n        const matcher = customRouteMatcher(rewrite.source);\n        let params = matcher(parsedAs.pathname);\n        if (rewrite.has && params) {\n            const hasParams = (0, _prepareDestination).matchHas({\n                headers: {\n                    host: document.location.hostname\n                },\n                cookies: document.cookie.split('; ').reduce((acc, item)=>{\n                    const [key, ...value] = item.split('=');\n                    acc[key] = value.join('=');\n                    return acc;\n                }, {})\n            }, rewrite.has, parsedAs.query);\n            if (hasParams) {\n                Object.assign(params, hasParams);\n            } else {\n                params = false;\n            }\n        }\n        if (params) {\n            if (!rewrite.destination) {\n                // this is a proxied rewrite which isn't handled on the client\n                externalDest = true;\n                return true;\n            }\n            const destRes = (0, _prepareDestination).prepareDestination({\n                appendParamsToQuery: true,\n                destination: rewrite.destination,\n                params: params,\n                query: query\n            });\n            parsedAs = destRes.parsedDestination;\n            asPath = destRes.newUrl;\n            Object.assign(query, destRes.parsedDestination.query);\n            fsPathname = (0, _normalizeTrailingSlash).removePathTrailingSlash((0, _normalizeLocalePath).normalizeLocalePath((0, _router).delBasePath(asPath), locales).pathname);\n            if (pages.includes(fsPathname)) {\n                // check if we now match a page as this means we are done\n                // resolving the rewrites\n                matchedPage = true;\n                resolvedHref = fsPathname;\n                return true;\n            }\n            // check if we match a dynamic-route, if so we break the rewrites chain\n            resolvedHref = resolveHref(fsPathname);\n            if (resolvedHref !== asPath && pages.includes(resolvedHref)) {\n                matchedPage = true;\n                return true;\n            }\n        }\n    };\n    let finished = false;\n    for(let i = 0; i < rewrites.beforeFiles.length; i++){\n        // we don't end after match in beforeFiles to allow\n        // continuing through all beforeFiles rewrites\n        finished = handleRewrite(rewrites.beforeFiles[i]) || false;\n    }\n    matchedPage = pages.includes(fsPathname);\n    if (!matchedPage) {\n        if (!finished) {\n            for(let i = 0; i < rewrites.afterFiles.length; i++){\n                if (handleRewrite(rewrites.afterFiles[i])) {\n                    finished = true;\n                    break;\n                }\n            }\n        }\n        // check dynamic route before processing fallback rewrites\n        if (!finished) {\n            resolvedHref = resolveHref(fsPathname);\n            matchedPage = pages.includes(resolvedHref);\n            finished = matchedPage;\n        }\n        if (!finished) {\n            for(let i = 0; i < rewrites.fallback.length; i++){\n                if (handleRewrite(rewrites.fallback[i])) {\n                    finished = true;\n                    break;\n                }\n            }\n        }\n    }\n    return {\n        asPath,\n        parsedAs,\n        matchedPage,\n        resolvedHref,\n        externalDest\n    };\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\nconst customRouteMatcher = (0, _pathMatch).default(true);\n\n//# sourceMappingURL=resolve-rewrites.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getRouteMatcher = getRouteMatcher;\nvar _utils = require(\"../../utils\");\nfunction getRouteMatcher(routeRegex) {\n    const { re , groups  } = routeRegex;\n    return (pathname)=>{\n        const routeMatch = re.exec(pathname);\n        if (!routeMatch) {\n            return false;\n        }\n        const decode = (param)=>{\n            try {\n                return decodeURIComponent(param);\n            } catch (_) {\n                throw new _utils.DecodeError('failed to decode param');\n            }\n        };\n        const params = {};\n        Object.keys(groups).forEach((slugName)=>{\n            const g = groups[slugName];\n            const m = routeMatch[g.pos];\n            if (m !== undefined) {\n                params[slugName] = ~m.indexOf('/') ? m.split('/').map((entry)=>decode(entry)\n                ) : g.repeat ? [\n                    decode(m)\n                ] : decode(m);\n            }\n        });\n        return params;\n    };\n}\n\n//# sourceMappingURL=route-matcher.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getParametrizedRoute = getParametrizedRoute;\nexports.getRouteRegex = getRouteRegex;\nvar _escapeRegexp = require(\"../../escape-regexp\");\nfunction parseParameter(param) {\n    const optional = param.startsWith('[') && param.endsWith(']');\n    if (optional) {\n        param = param.slice(1, -1);\n    }\n    const repeat = param.startsWith('...');\n    if (repeat) {\n        param = param.slice(3);\n    }\n    return {\n        key: param,\n        repeat,\n        optional\n    };\n}\nfunction getParametrizedRoute(route) {\n    const segments = (route.replace(/\\/$/, '') || '/').slice(1).split('/');\n    const groups = {};\n    let groupIndex = 1;\n    const parameterizedRoute = segments.map((segment)=>{\n        if (segment.startsWith('[') && segment.endsWith(']')) {\n            const { key , optional , repeat  } = parseParameter(segment.slice(1, -1));\n            groups[key] = {\n                pos: groupIndex++,\n                repeat,\n                optional\n            };\n            return repeat ? optional ? '(?:/(.+?))?' : '/(.+?)' : '/([^/]+?)';\n        } else {\n            return `/${(0, _escapeRegexp).escapeStringRegexp(segment)}`;\n        }\n    }).join('');\n    // dead code eliminate for browser since it's only needed\n    // while generating routes-manifest\n    if (typeof window === 'undefined') {\n        let routeKeyCharCode = 97;\n        let routeKeyCharLength = 1;\n        // builds a minimal routeKey using only a-z and minimal number of characters\n        const getSafeRouteKey = ()=>{\n            let routeKey = '';\n            for(let i = 0; i < routeKeyCharLength; i++){\n                routeKey += String.fromCharCode(routeKeyCharCode);\n                routeKeyCharCode++;\n                if (routeKeyCharCode > 122) {\n                    routeKeyCharLength++;\n                    routeKeyCharCode = 97;\n                }\n            }\n            return routeKey;\n        };\n        const routeKeys = {};\n        let namedParameterizedRoute = segments.map((segment)=>{\n            if (segment.startsWith('[') && segment.endsWith(']')) {\n                const { key , optional , repeat  } = parseParameter(segment.slice(1, -1));\n                // replace any non-word characters since they can break\n                // the named regex\n                let cleanedKey = key.replace(/\\W/g, '');\n                let invalidKey = false;\n                // check if the key is still invalid and fallback to using a known\n                // safe key\n                if (cleanedKey.length === 0 || cleanedKey.length > 30) {\n                    invalidKey = true;\n                }\n                if (!isNaN(parseInt(cleanedKey.slice(0, 1)))) {\n                    invalidKey = true;\n                }\n                if (invalidKey) {\n                    cleanedKey = getSafeRouteKey();\n                }\n                routeKeys[cleanedKey] = key;\n                return repeat ? optional ? `(?:/(?<${cleanedKey}>.+?))?` : `/(?<${cleanedKey}>.+?)` : `/(?<${cleanedKey}>[^/]+?)`;\n            } else {\n                return `/${(0, _escapeRegexp).escapeStringRegexp(segment)}`;\n            }\n        }).join('');\n        return {\n            parameterizedRoute,\n            namedParameterizedRoute,\n            groups,\n            routeKeys\n        };\n    }\n    return {\n        parameterizedRoute,\n        groups\n    };\n}\nfunction getRouteRegex(normalizedRoute) {\n    const result = getParametrizedRoute(normalizedRoute);\n    if ('routeKeys' in result) {\n        return {\n            re: new RegExp(`^${result.parameterizedRoute}(?:/)?$`),\n            groups: result.groups,\n            routeKeys: result.routeKeys,\n            namedRegex: `^${result.namedParameterizedRoute}(?:/)?$`\n        };\n    }\n    return {\n        re: new RegExp(`^${result.parameterizedRoute}(?:/)?$`),\n        groups: result.groups\n    };\n}\n\n//# sourceMappingURL=route-regex.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getSortedRoutes = getSortedRoutes;\nclass UrlNode {\n    insert(urlPath) {\n        this._insert(urlPath.split('/').filter(Boolean), [], false);\n    }\n    smoosh() {\n        return this._smoosh();\n    }\n    _smoosh(prefix = '/') {\n        const childrenPaths = [\n            ...this.children.keys()\n        ].sort();\n        if (this.slugName !== null) {\n            childrenPaths.splice(childrenPaths.indexOf('[]'), 1);\n        }\n        if (this.restSlugName !== null) {\n            childrenPaths.splice(childrenPaths.indexOf('[...]'), 1);\n        }\n        if (this.optionalRestSlugName !== null) {\n            childrenPaths.splice(childrenPaths.indexOf('[[...]]'), 1);\n        }\n        const routes = childrenPaths.map((c)=>this.children.get(c)._smoosh(`${prefix}${c}/`)\n        ).reduce((prev, curr)=>[\n                ...prev,\n                ...curr\n            ]\n        , []);\n        if (this.slugName !== null) {\n            routes.push(...this.children.get('[]')._smoosh(`${prefix}[${this.slugName}]/`));\n        }\n        if (!this.placeholder) {\n            const r = prefix === '/' ? '/' : prefix.slice(0, -1);\n            if (this.optionalRestSlugName != null) {\n                throw new Error(`You cannot define a route with the same specificity as a optional catch-all route (\"${r}\" and \"${r}[[...${this.optionalRestSlugName}]]\").`);\n            }\n            routes.unshift(r);\n        }\n        if (this.restSlugName !== null) {\n            routes.push(...this.children.get('[...]')._smoosh(`${prefix}[...${this.restSlugName}]/`));\n        }\n        if (this.optionalRestSlugName !== null) {\n            routes.push(...this.children.get('[[...]]')._smoosh(`${prefix}[[...${this.optionalRestSlugName}]]/`));\n        }\n        return routes;\n    }\n    _insert(urlPaths, slugNames, isCatchAll) {\n        if (urlPaths.length === 0) {\n            this.placeholder = false;\n            return;\n        }\n        if (isCatchAll) {\n            throw new Error(`Catch-all must be the last part of the URL.`);\n        }\n        // The next segment in the urlPaths list\n        let nextSegment = urlPaths[0];\n        // Check if the segment matches `[something]`\n        if (nextSegment.startsWith('[') && nextSegment.endsWith(']')) {\n            // Strip `[` and `]`, leaving only `something`\n            let segmentName = nextSegment.slice(1, -1);\n            let isOptional = false;\n            if (segmentName.startsWith('[') && segmentName.endsWith(']')) {\n                // Strip optional `[` and `]`, leaving only `something`\n                segmentName = segmentName.slice(1, -1);\n                isOptional = true;\n            }\n            if (segmentName.startsWith('...')) {\n                // Strip `...`, leaving only `something`\n                segmentName = segmentName.substring(3);\n                isCatchAll = true;\n            }\n            if (segmentName.startsWith('[') || segmentName.endsWith(']')) {\n                throw new Error(`Segment names may not start or end with extra brackets ('${segmentName}').`);\n            }\n            if (segmentName.startsWith('.')) {\n                throw new Error(`Segment names may not start with erroneous periods ('${segmentName}').`);\n            }\n            function handleSlug(previousSlug, nextSlug) {\n                if (previousSlug !== null) {\n                    // If the specific segment already has a slug but the slug is not `something`\n                    // This prevents collisions like:\n                    // pages/[post]/index.js\n                    // pages/[id]/index.js\n                    // Because currently multiple dynamic params on the same segment level are not supported\n                    if (previousSlug !== nextSlug) {\n                        // TODO: This error seems to be confusing for users, needs an error link, the description can be based on above comment.\n                        throw new Error(`You cannot use different slug names for the same dynamic path ('${previousSlug}' !== '${nextSlug}').`);\n                    }\n                }\n                slugNames.forEach((slug)=>{\n                    if (slug === nextSlug) {\n                        throw new Error(`You cannot have the same slug name \"${nextSlug}\" repeat within a single dynamic path`);\n                    }\n                    if (slug.replace(/\\W/g, '') === nextSegment.replace(/\\W/g, '')) {\n                        throw new Error(`You cannot have the slug names \"${slug}\" and \"${nextSlug}\" differ only by non-word symbols within a single dynamic path`);\n                    }\n                });\n                slugNames.push(nextSlug);\n            }\n            if (isCatchAll) {\n                if (isOptional) {\n                    if (this.restSlugName != null) {\n                        throw new Error(`You cannot use both an required and optional catch-all route at the same level (\"[...${this.restSlugName}]\" and \"${urlPaths[0]}\" ).`);\n                    }\n                    handleSlug(this.optionalRestSlugName, segmentName);\n                    // slugName is kept as it can only be one particular slugName\n                    this.optionalRestSlugName = segmentName;\n                    // nextSegment is overwritten to [[...]] so that it can later be sorted specifically\n                    nextSegment = '[[...]]';\n                } else {\n                    if (this.optionalRestSlugName != null) {\n                        throw new Error(`You cannot use both an optional and required catch-all route at the same level (\"[[...${this.optionalRestSlugName}]]\" and \"${urlPaths[0]}\").`);\n                    }\n                    handleSlug(this.restSlugName, segmentName);\n                    // slugName is kept as it can only be one particular slugName\n                    this.restSlugName = segmentName;\n                    // nextSegment is overwritten to [...] so that it can later be sorted specifically\n                    nextSegment = '[...]';\n                }\n            } else {\n                if (isOptional) {\n                    throw new Error(`Optional route parameters are not yet supported (\"${urlPaths[0]}\").`);\n                }\n                handleSlug(this.slugName, segmentName);\n                // slugName is kept as it can only be one particular slugName\n                this.slugName = segmentName;\n                // nextSegment is overwritten to [] so that it can later be sorted specifically\n                nextSegment = '[]';\n            }\n        }\n        // If this UrlNode doesn't have the nextSegment yet we create a new child UrlNode\n        if (!this.children.has(nextSegment)) {\n            this.children.set(nextSegment, new UrlNode());\n        }\n        this.children.get(nextSegment)._insert(urlPaths.slice(1), slugNames, isCatchAll);\n    }\n    constructor(){\n        this.placeholder = true;\n        this.children = new Map();\n        this.slugName = null;\n        this.restSlugName = null;\n        this.optionalRestSlugName = null;\n    }\n}\nfunction getSortedRoutes(normalizedPages) {\n    // First the UrlNode is created, and every UrlNode can have only 1 dynamic segment\n    // Eg you can't have pages/[post]/abc.js and pages/[hello]/something-else.js\n    // Only 1 dynamic segment per nesting level\n    // So in the case that is test/integration/dynamic-routing it'll be this:\n    // pages/[post]/comments.js\n    // pages/blog/[post]/comment/[id].js\n    // Both are fine because `pages/[post]` and `pages/blog` are on the same level\n    // So in this case `UrlNode` created here has `this.slugName === 'post'`\n    // And since your PR passed through `slugName` as an array basically it'd including it in too many possibilities\n    // Instead what has to be passed through is the upwards path's dynamic names\n    const root = new UrlNode();\n    // Here the `root` gets injected multiple paths, and insert will break them up into sublevels\n    normalizedPages.forEach((pagePath)=>root.insert(pagePath)\n    );\n    // Smoosh will then sort those sublevels up to the point where you get the correct route definition priority\n    return root.smoosh();\n}\n\n//# sourceMappingURL=sorted-routes.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.execOnce = execOnce;\nexports.getLocationOrigin = getLocationOrigin;\nexports.getURL = getURL;\nexports.getDisplayName = getDisplayName;\nexports.isResSent = isResSent;\nexports.normalizeRepeatedSlashes = normalizeRepeatedSlashes;\nexports.loadGetInitialProps = loadGetInitialProps;\nexports.ST = exports.SP = exports.warnOnce = void 0;\nfunction execOnce(fn) {\n    let used = false;\n    let result;\n    return (...args)=>{\n        if (!used) {\n            used = true;\n            result = fn(...args);\n        }\n        return result;\n    };\n}\nfunction getLocationOrigin() {\n    const { protocol , hostname , port  } = window.location;\n    return `${protocol}//${hostname}${port ? ':' + port : ''}`;\n}\nfunction getURL() {\n    const { href  } = window.location;\n    const origin = getLocationOrigin();\n    return href.substring(origin.length);\n}\nfunction getDisplayName(Component) {\n    return typeof Component === 'string' ? Component : Component.displayName || Component.name || 'Unknown';\n}\nfunction isResSent(res) {\n    return res.finished || res.headersSent;\n}\nfunction normalizeRepeatedSlashes(url) {\n    const urlParts = url.split('?');\n    const urlNoQuery = urlParts[0];\n    return urlNoQuery// first we replace any non-encoded backslashes with forward\n    // then normalize repeated forward slashes\n    .replace(/\\\\/g, '/').replace(/\\/\\/+/g, '/') + (urlParts[1] ? `?${urlParts.slice(1).join('?')}` : '');\n}\nasync function loadGetInitialProps(App, ctx) {\n    if (process.env.NODE_ENV !== 'production') {\n        var ref;\n        if ((ref = App.prototype) === null || ref === void 0 ? void 0 : ref.getInitialProps) {\n            const message = `\"${getDisplayName(App)}.getInitialProps()\" is defined as an instance method - visit https://nextjs.org/docs/messages/get-initial-props-as-an-instance-method for more information.`;\n            throw new Error(message);\n        }\n    }\n    // when called from _app `ctx` is nested in `ctx`\n    const res = ctx.res || ctx.ctx && ctx.ctx.res;\n    if (!App.getInitialProps) {\n        if (ctx.ctx && ctx.Component) {\n            // @ts-ignore pageProps default\n            return {\n                pageProps: await loadGetInitialProps(ctx.Component, ctx.ctx)\n            };\n        }\n        return {};\n    }\n    const props = await App.getInitialProps(ctx);\n    if (res && isResSent(res)) {\n        return props;\n    }\n    if (!props) {\n        const message = `\"${getDisplayName(App)}.getInitialProps()\" should resolve to an object. But found \"${props}\" instead.`;\n        throw new Error(message);\n    }\n    if (process.env.NODE_ENV !== 'production') {\n        if (Object.keys(props).length === 0 && !ctx.ctx) {\n            console.warn(`${getDisplayName(App)} returned an empty object from \\`getInitialProps\\`. This de-optimizes and prevents automatic static optimization. https://nextjs.org/docs/messages/empty-object-getInitialProps`);\n        }\n    }\n    return props;\n}\nlet warnOnce = (_)=>{};\nexports.warnOnce = warnOnce;\nif (process.env.NODE_ENV !== 'production') {\n    const warnings = new Set();\n    exports.warnOnce = warnOnce = (msg)=>{\n        if (!warnings.has(msg)) {\n            console.warn(msg);\n        }\n        warnings.add(msg);\n    };\n}\nconst SP = typeof performance !== 'undefined';\nexports.SP = SP;\nconst ST = SP && typeof performance.mark === 'function' && typeof performance.measure === 'function';\nexports.ST = ST;\nclass DecodeError extends Error {\n}\nexports.DecodeError = DecodeError;\n\n//# sourceMappingURL=utils.js.map","module.exports = require('./dist/client/router')\n","/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\r\n */\r\nconst CONSTANTS = {\r\n    /**\r\n     * @define {boolean} Whether this is the client Node.js SDK.\r\n     */\r\n    NODE_CLIENT: false,\r\n    /**\r\n     * @define {boolean} Whether this is the Admin Node.js SDK.\r\n     */\r\n    NODE_ADMIN: false,\r\n    /**\r\n     * Firebase SDK Version\r\n     */\r\n    SDK_VERSION: '${JSCORE_VERSION}'\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Throws an error if the provided assertion is falsy\r\n */\r\nconst assert = function (assertion, message) {\r\n    if (!assertion) {\r\n        throw assertionError(message);\r\n    }\r\n};\r\n/**\r\n * Returns an Error object suitable for throwing.\r\n */\r\nconst assertionError = function (message) {\r\n    return new Error('Firebase Database (' +\r\n        CONSTANTS.SDK_VERSION +\r\n        ') INTERNAL ASSERT FAILED: ' +\r\n        message);\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst stringToByteArray$1 = function (str) {\r\n    // TODO(user): Use native implementations if/when available\r\n    const out = [];\r\n    let p = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        let c = str.charCodeAt(i);\r\n        if (c < 128) {\r\n            out[p++] = c;\r\n        }\r\n        else if (c < 2048) {\r\n            out[p++] = (c >> 6) | 192;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else if ((c & 0xfc00) === 0xd800 &&\r\n            i + 1 < str.length &&\r\n            (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00) {\r\n            // Surrogate Pair\r\n            c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\r\n            out[p++] = (c >> 18) | 240;\r\n            out[p++] = ((c >> 12) & 63) | 128;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else {\r\n            out[p++] = (c >> 12) | 224;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n    }\r\n    return out;\r\n};\r\n/**\r\n * Turns an array of numbers into the string given by the concatenation of the\r\n * characters to which the numbers correspond.\r\n * @param bytes Array of numbers representing characters.\r\n * @return Stringification of the array.\r\n */\r\nconst byteArrayToString = function (bytes) {\r\n    // TODO(user): Use native implementations if/when available\r\n    const out = [];\r\n    let pos = 0, c = 0;\r\n    while (pos < bytes.length) {\r\n        const c1 = bytes[pos++];\r\n        if (c1 < 128) {\r\n            out[c++] = String.fromCharCode(c1);\r\n        }\r\n        else if (c1 > 191 && c1 < 224) {\r\n            const c2 = bytes[pos++];\r\n            out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\r\n        }\r\n        else if (c1 > 239 && c1 < 365) {\r\n            // Surrogate Pair\r\n            const c2 = bytes[pos++];\r\n            const c3 = bytes[pos++];\r\n            const c4 = bytes[pos++];\r\n            const u = (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\r\n                0x10000;\r\n            out[c++] = String.fromCharCode(0xd800 + (u >> 10));\r\n            out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\r\n        }\r\n        else {\r\n            const c2 = bytes[pos++];\r\n            const c3 = bytes[pos++];\r\n            out[c++] = String.fromCharCode(((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n        }\r\n    }\r\n    return out.join('');\r\n};\r\n// We define it as an object literal instead of a class because a class compiled down to es5 can't\r\n// be treeshaked. https://github.com/rollup/rollup/issues/1691\r\n// Static lookup maps, lazily populated by init_()\r\nconst base64 = {\r\n    /**\r\n     * Maps bytes to characters.\r\n     */\r\n    byteToCharMap_: null,\r\n    /**\r\n     * Maps characters to bytes.\r\n     */\r\n    charToByteMap_: null,\r\n    /**\r\n     * Maps bytes to websafe characters.\r\n     * @private\r\n     */\r\n    byteToCharMapWebSafe_: null,\r\n    /**\r\n     * Maps websafe characters to bytes.\r\n     * @private\r\n     */\r\n    charToByteMapWebSafe_: null,\r\n    /**\r\n     * Our default alphabet, shared between\r\n     * ENCODED_VALS and ENCODED_VALS_WEBSAFE\r\n     */\r\n    ENCODED_VALS_BASE: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\r\n    /**\r\n     * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\r\n     */\r\n    get ENCODED_VALS() {\r\n        return this.ENCODED_VALS_BASE + '+/=';\r\n    },\r\n    /**\r\n     * Our websafe alphabet.\r\n     */\r\n    get ENCODED_VALS_WEBSAFE() {\r\n        return this.ENCODED_VALS_BASE + '-_.';\r\n    },\r\n    /**\r\n     * Whether this browser supports the atob and btoa functions. This extension\r\n     * started at Mozilla but is now implemented by many browsers. We use the\r\n     * ASSUME_* variables to avoid pulling in the full useragent detection library\r\n     * but still allowing the standard per-browser compilations.\r\n     *\r\n     */\r\n    HAS_NATIVE_SUPPORT: typeof atob === 'function',\r\n    /**\r\n     * Base64-encode an array of bytes.\r\n     *\r\n     * @param input An array of bytes (numbers with\r\n     *     value in [0, 255]) to encode.\r\n     * @param webSafe Boolean indicating we should use the\r\n     *     alternative alphabet.\r\n     * @return The base64 encoded string.\r\n     */\r\n    encodeByteArray(input, webSafe) {\r\n        if (!Array.isArray(input)) {\r\n            throw Error('encodeByteArray takes an array as a parameter');\r\n        }\r\n        this.init_();\r\n        const byteToCharMap = webSafe\r\n            ? this.byteToCharMapWebSafe_\r\n            : this.byteToCharMap_;\r\n        const output = [];\r\n        for (let i = 0; i < input.length; i += 3) {\r\n            const byte1 = input[i];\r\n            const haveByte2 = i + 1 < input.length;\r\n            const byte2 = haveByte2 ? input[i + 1] : 0;\r\n            const haveByte3 = i + 2 < input.length;\r\n            const byte3 = haveByte3 ? input[i + 2] : 0;\r\n            const outByte1 = byte1 >> 2;\r\n            const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\r\n            let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\r\n            let outByte4 = byte3 & 0x3f;\r\n            if (!haveByte3) {\r\n                outByte4 = 64;\r\n                if (!haveByte2) {\r\n                    outByte3 = 64;\r\n                }\r\n            }\r\n            output.push(byteToCharMap[outByte1], byteToCharMap[outByte2], byteToCharMap[outByte3], byteToCharMap[outByte4]);\r\n        }\r\n        return output.join('');\r\n    },\r\n    /**\r\n     * Base64-encode a string.\r\n     *\r\n     * @param input A string to encode.\r\n     * @param webSafe If true, we should use the\r\n     *     alternative alphabet.\r\n     * @return The base64 encoded string.\r\n     */\r\n    encodeString(input, webSafe) {\r\n        // Shortcut for Mozilla browsers that implement\r\n        // a native base64 encoder in the form of \"btoa/atob\"\r\n        if (this.HAS_NATIVE_SUPPORT && !webSafe) {\r\n            return btoa(input);\r\n        }\r\n        return this.encodeByteArray(stringToByteArray$1(input), webSafe);\r\n    },\r\n    /**\r\n     * Base64-decode a string.\r\n     *\r\n     * @param input to decode.\r\n     * @param webSafe True if we should use the\r\n     *     alternative alphabet.\r\n     * @return string representing the decoded value.\r\n     */\r\n    decodeString(input, webSafe) {\r\n        // Shortcut for Mozilla browsers that implement\r\n        // a native base64 encoder in the form of \"btoa/atob\"\r\n        if (this.HAS_NATIVE_SUPPORT && !webSafe) {\r\n            return atob(input);\r\n        }\r\n        return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\r\n    },\r\n    /**\r\n     * Base64-decode a string.\r\n     *\r\n     * In base-64 decoding, groups of four characters are converted into three\r\n     * bytes.  If the encoder did not apply padding, the input length may not\r\n     * be a multiple of 4.\r\n     *\r\n     * In this case, the last group will have fewer than 4 characters, and\r\n     * padding will be inferred.  If the group has one or two characters, it decodes\r\n     * to one byte.  If the group has three characters, it decodes to two bytes.\r\n     *\r\n     * @param input Input to decode.\r\n     * @param webSafe True if we should use the web-safe alphabet.\r\n     * @return bytes representing the decoded value.\r\n     */\r\n    decodeStringToByteArray(input, webSafe) {\r\n        this.init_();\r\n        const charToByteMap = webSafe\r\n            ? this.charToByteMapWebSafe_\r\n            : this.charToByteMap_;\r\n        const output = [];\r\n        for (let i = 0; i < input.length;) {\r\n            const byte1 = charToByteMap[input.charAt(i++)];\r\n            const haveByte2 = i < input.length;\r\n            const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\r\n            ++i;\r\n            const haveByte3 = i < input.length;\r\n            const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\r\n            ++i;\r\n            const haveByte4 = i < input.length;\r\n            const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\r\n            ++i;\r\n            if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\r\n                throw new DecodeBase64StringError();\r\n            }\r\n            const outByte1 = (byte1 << 2) | (byte2 >> 4);\r\n            output.push(outByte1);\r\n            if (byte3 !== 64) {\r\n                const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\r\n                output.push(outByte2);\r\n                if (byte4 !== 64) {\r\n                    const outByte3 = ((byte3 << 6) & 0xc0) | byte4;\r\n                    output.push(outByte3);\r\n                }\r\n            }\r\n        }\r\n        return output;\r\n    },\r\n    /**\r\n     * Lazy static initialization function. Called before\r\n     * accessing any of the static map variables.\r\n     * @private\r\n     */\r\n    init_() {\r\n        if (!this.byteToCharMap_) {\r\n            this.byteToCharMap_ = {};\r\n            this.charToByteMap_ = {};\r\n            this.byteToCharMapWebSafe_ = {};\r\n            this.charToByteMapWebSafe_ = {};\r\n            // We want quick mappings back and forth, so we precompute two maps.\r\n            for (let i = 0; i < this.ENCODED_VALS.length; i++) {\r\n                this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\r\n                this.charToByteMap_[this.byteToCharMap_[i]] = i;\r\n                this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\r\n                this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\r\n                // Be forgiving when decoding and correctly decode both encodings.\r\n                if (i >= this.ENCODED_VALS_BASE.length) {\r\n                    this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\r\n                    this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n/**\r\n * An error encountered while decoding base64 string.\r\n */\r\nclass DecodeBase64StringError extends Error {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = 'DecodeBase64StringError';\r\n    }\r\n}\r\n/**\r\n * URL-safe base64 encoding\r\n */\r\nconst base64Encode = function (str) {\r\n    const utf8Bytes = stringToByteArray$1(str);\r\n    return base64.encodeByteArray(utf8Bytes, true);\r\n};\r\n/**\r\n * URL-safe base64 encoding (without \".\" padding in the end).\r\n * e.g. Used in JSON Web Token (JWT) parts.\r\n */\r\nconst base64urlEncodeWithoutPadding = function (str) {\r\n    // Use base64url encoding and remove padding in the end (dot characters).\r\n    return base64Encode(str).replace(/\\./g, '');\r\n};\r\n/**\r\n * URL-safe base64 decoding\r\n *\r\n * NOTE: DO NOT use the global atob() function - it does NOT support the\r\n * base64Url variant encoding.\r\n *\r\n * @param str To be decoded\r\n * @return Decoded result, if possible\r\n */\r\nconst base64Decode = function (str) {\r\n    try {\r\n        return base64.decodeString(str, true);\r\n    }\r\n    catch (e) {\r\n        console.error('base64Decode failed: ', e);\r\n    }\r\n    return null;\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Do a deep-copy of basic JavaScript Objects or Arrays.\r\n */\r\nfunction deepCopy(value) {\r\n    return deepExtend(undefined, value);\r\n}\r\n/**\r\n * Copy properties from source to target (recursively allows extension\r\n * of Objects and Arrays).  Scalar values in the target are over-written.\r\n * If target is undefined, an object of the appropriate type will be created\r\n * (and returned).\r\n *\r\n * We recursively copy all child properties of plain Objects in the source- so\r\n * that namespace- like dictionaries are merged.\r\n *\r\n * Note that the target can be a function, in which case the properties in\r\n * the source Object are copied onto it as static properties of the Function.\r\n *\r\n * Note: we don't merge __proto__ to prevent prototype pollution\r\n */\r\nfunction deepExtend(target, source) {\r\n    if (!(source instanceof Object)) {\r\n        return source;\r\n    }\r\n    switch (source.constructor) {\r\n        case Date:\r\n            // Treat Dates like scalars; if the target date object had any child\r\n            // properties - they will be lost!\r\n            const dateValue = source;\r\n            return new Date(dateValue.getTime());\r\n        case Object:\r\n            if (target === undefined) {\r\n                target = {};\r\n            }\r\n            break;\r\n        case Array:\r\n            // Always copy the array source and overwrite the target.\r\n            target = [];\r\n            break;\r\n        default:\r\n            // Not a plain Object - treat it as a scalar.\r\n            return source;\r\n    }\r\n    for (const prop in source) {\r\n        // use isValidKey to guard against prototype pollution. See https://snyk.io/vuln/SNYK-JS-LODASH-450202\r\n        if (!source.hasOwnProperty(prop) || !isValidKey(prop)) {\r\n            continue;\r\n        }\r\n        target[prop] = deepExtend(target[prop], source[prop]);\r\n    }\r\n    return target;\r\n}\r\nfunction isValidKey(key) {\r\n    return key !== '__proto__';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2022 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Polyfill for `globalThis` object.\r\n * @returns the `globalThis` object for the given environment.\r\n * @public\r\n */\r\nfunction getGlobal() {\r\n    if (typeof self !== 'undefined') {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined') {\r\n        return window;\r\n    }\r\n    if (typeof global !== 'undefined') {\r\n        return global;\r\n    }\r\n    throw new Error('Unable to locate global object.');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2022 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst getDefaultsFromGlobal = () => getGlobal().__FIREBASE_DEFAULTS__;\r\n/**\r\n * Attempt to read defaults from a JSON string provided to\r\n * process(.)env(.)__FIREBASE_DEFAULTS__ or a JSON file whose path is in\r\n * process(.)env(.)__FIREBASE_DEFAULTS_PATH__\r\n * The dots are in parens because certain compilers (Vite?) cannot\r\n * handle seeing that variable in comments.\r\n * See https://github.com/firebase/firebase-js-sdk/issues/6838\r\n */\r\nconst getDefaultsFromEnvVariable = () => {\r\n    if (typeof process === 'undefined' || typeof process.env === 'undefined') {\r\n        return;\r\n    }\r\n    const defaultsJsonString = process.env.__FIREBASE_DEFAULTS__;\r\n    if (defaultsJsonString) {\r\n        return JSON.parse(defaultsJsonString);\r\n    }\r\n};\r\nconst getDefaultsFromCookie = () => {\r\n    if (typeof document === 'undefined') {\r\n        return;\r\n    }\r\n    let match;\r\n    try {\r\n        match = document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/);\r\n    }\r\n    catch (e) {\r\n        // Some environments such as Angular Universal SSR have a\r\n        // `document` object but error on accessing `document.cookie`.\r\n        return;\r\n    }\r\n    const decoded = match && base64Decode(match[1]);\r\n    return decoded && JSON.parse(decoded);\r\n};\r\n/**\r\n * Get the __FIREBASE_DEFAULTS__ object. It checks in order:\r\n * (1) if such an object exists as a property of `globalThis`\r\n * (2) if such an object was provided on a shell environment variable\r\n * (3) if such an object exists in a cookie\r\n * @public\r\n */\r\nconst getDefaults = () => {\r\n    try {\r\n        return (getDefaultsFromGlobal() ||\r\n            getDefaultsFromEnvVariable() ||\r\n            getDefaultsFromCookie());\r\n    }\r\n    catch (e) {\r\n        /**\r\n         * Catch-all for being unable to get __FIREBASE_DEFAULTS__ due\r\n         * to any environment case we have not accounted for. Log to\r\n         * info instead of swallowing so we can find these unknown cases\r\n         * and add paths for them if needed.\r\n         */\r\n        console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);\r\n        return;\r\n    }\r\n};\r\n/**\r\n * Returns emulator host stored in the __FIREBASE_DEFAULTS__ object\r\n * for the given product.\r\n * @returns a URL host formatted like `127.0.0.1:9999` or `[::1]:4000` if available\r\n * @public\r\n */\r\nconst getDefaultEmulatorHost = (productName) => { var _a, _b; return (_b = (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a.emulatorHosts) === null || _b === void 0 ? void 0 : _b[productName]; };\r\n/**\r\n * Returns emulator hostname and port stored in the __FIREBASE_DEFAULTS__ object\r\n * for the given product.\r\n * @returns a pair of hostname and port like `[\"::1\", 4000]` if available\r\n * @public\r\n */\r\nconst getDefaultEmulatorHostnameAndPort = (productName) => {\r\n    const host = getDefaultEmulatorHost(productName);\r\n    if (!host) {\r\n        return undefined;\r\n    }\r\n    const separatorIndex = host.lastIndexOf(':'); // Finding the last since IPv6 addr also has colons.\r\n    if (separatorIndex <= 0 || separatorIndex + 1 === host.length) {\r\n        throw new Error(`Invalid host ${host} with no separate hostname and port!`);\r\n    }\r\n    // eslint-disable-next-line no-restricted-globals\r\n    const port = parseInt(host.substring(separatorIndex + 1), 10);\r\n    if (host[0] === '[') {\r\n        // Bracket-quoted `[ipv6addr]:port` => return \"ipv6addr\" (without brackets).\r\n        return [host.substring(1, separatorIndex - 1), port];\r\n    }\r\n    else {\r\n        return [host.substring(0, separatorIndex), port];\r\n    }\r\n};\r\n/**\r\n * Returns Firebase app config stored in the __FIREBASE_DEFAULTS__ object.\r\n * @public\r\n */\r\nconst getDefaultAppConfig = () => { var _a; return (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a.config; };\r\n/**\r\n * Returns an experimental setting on the __FIREBASE_DEFAULTS__ object (properties\r\n * prefixed by \"_\")\r\n * @public\r\n */\r\nconst getExperimentalSetting = (name) => { var _a; return (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a[`_${name}`]; };\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass Deferred {\r\n    constructor() {\r\n        this.reject = () => { };\r\n        this.resolve = () => { };\r\n        this.promise = new Promise((resolve, reject) => {\r\n            this.resolve = resolve;\r\n            this.reject = reject;\r\n        });\r\n    }\r\n    /**\r\n     * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\r\n     * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\r\n     * and returns a node-style callback which will resolve or reject the Deferred's promise.\r\n     */\r\n    wrapCallback(callback) {\r\n        return (error, value) => {\r\n            if (error) {\r\n                this.reject(error);\r\n            }\r\n            else {\r\n                this.resolve(value);\r\n            }\r\n            if (typeof callback === 'function') {\r\n                // Attaching noop handler just in case developer wasn't expecting\r\n                // promises\r\n                this.promise.catch(() => { });\r\n                // Some of our callbacks don't expect a value and our own tests\r\n                // assert that the parameter length is 1\r\n                if (callback.length === 1) {\r\n                    callback(error);\r\n                }\r\n                else {\r\n                    callback(error, value);\r\n                }\r\n            }\r\n        };\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction createMockUserToken(token, projectId) {\r\n    if (token.uid) {\r\n        throw new Error('The \"uid\" field is no longer supported by mockUserToken. Please use \"sub\" instead for Firebase Auth User ID.');\r\n    }\r\n    // Unsecured JWTs use \"none\" as the algorithm.\r\n    const header = {\r\n        alg: 'none',\r\n        type: 'JWT'\r\n    };\r\n    const project = projectId || 'demo-project';\r\n    const iat = token.iat || 0;\r\n    const sub = token.sub || token.user_id;\r\n    if (!sub) {\r\n        throw new Error(\"mockUserToken must contain 'sub' or 'user_id' field!\");\r\n    }\r\n    const payload = Object.assign({ \r\n        // Set all required fields to decent defaults\r\n        iss: `https://securetoken.google.com/${project}`, aud: project, iat, exp: iat + 3600, auth_time: iat, sub, user_id: sub, firebase: {\r\n            sign_in_provider: 'custom',\r\n            identities: {}\r\n        } }, token);\r\n    // Unsecured JWTs use the empty string as a signature.\r\n    const signature = '';\r\n    return [\r\n        base64urlEncodeWithoutPadding(JSON.stringify(header)),\r\n        base64urlEncodeWithoutPadding(JSON.stringify(payload)),\r\n        signature\r\n    ].join('.');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns navigator.userAgent string or '' if it's not defined.\r\n * @return user agent string\r\n */\r\nfunction getUA() {\r\n    if (typeof navigator !== 'undefined' &&\r\n        typeof navigator['userAgent'] === 'string') {\r\n        return navigator['userAgent'];\r\n    }\r\n    else {\r\n        return '';\r\n    }\r\n}\r\n/**\r\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\r\n *\r\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\r\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\r\n * wait for a callback.\r\n */\r\nfunction isMobileCordova() {\r\n    return (typeof window !== 'undefined' &&\r\n        // @ts-ignore Setting up an broadly applicable index signature for Window\r\n        // just to deal with this case would probably be a bad idea.\r\n        !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\r\n        /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA()));\r\n}\r\n/**\r\n * Detect Node.js.\r\n *\r\n * @return true if Node.js environment is detected or specified.\r\n */\r\n// Node detection logic from: https://github.com/iliakan/detect-node/\r\nfunction isNode() {\r\n    var _a;\r\n    const forceEnvironment = (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a.forceEnvironment;\r\n    if (forceEnvironment === 'node') {\r\n        return true;\r\n    }\r\n    else if (forceEnvironment === 'browser') {\r\n        return false;\r\n    }\r\n    try {\r\n        return (Object.prototype.toString.call(global.process) === '[object process]');\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Detect Browser Environment\r\n */\r\nfunction isBrowser() {\r\n    return typeof self === 'object' && self.self === self;\r\n}\r\nfunction isBrowserExtension() {\r\n    const runtime = typeof chrome === 'object'\r\n        ? chrome.runtime\r\n        : typeof browser === 'object'\r\n            ? browser.runtime\r\n            : undefined;\r\n    return typeof runtime === 'object' && runtime.id !== undefined;\r\n}\r\n/**\r\n * Detect React Native.\r\n *\r\n * @return true if ReactNative environment is detected.\r\n */\r\nfunction isReactNative() {\r\n    return (typeof navigator === 'object' && navigator['product'] === 'ReactNative');\r\n}\r\n/** Detects Electron apps. */\r\nfunction isElectron() {\r\n    return getUA().indexOf('Electron/') >= 0;\r\n}\r\n/** Detects Internet Explorer. */\r\nfunction isIE() {\r\n    const ua = getUA();\r\n    return ua.indexOf('MSIE ') >= 0 || ua.indexOf('Trident/') >= 0;\r\n}\r\n/** Detects Universal Windows Platform apps. */\r\nfunction isUWP() {\r\n    return getUA().indexOf('MSAppHost/') >= 0;\r\n}\r\n/**\r\n * Detect whether the current SDK build is the Node version.\r\n *\r\n * @return true if it's the Node SDK build.\r\n */\r\nfunction isNodeSdk() {\r\n    return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\r\n}\r\n/** Returns true if we are running in Safari. */\r\nfunction isSafari() {\r\n    return (!isNode() &&\r\n        !!navigator.userAgent &&\r\n        navigator.userAgent.includes('Safari') &&\r\n        !navigator.userAgent.includes('Chrome'));\r\n}\r\n/**\r\n * This method checks if indexedDB is supported by current browser/service worker context\r\n * @return true if indexedDB is supported by current browser/service worker context\r\n */\r\nfunction isIndexedDBAvailable() {\r\n    try {\r\n        return typeof indexedDB === 'object';\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * This method validates browser/sw context for indexedDB by opening a dummy indexedDB database and reject\r\n * if errors occur during the database open operation.\r\n *\r\n * @throws exception if current browser/sw context can't run idb.open (ex: Safari iframe, Firefox\r\n * private browsing)\r\n */\r\nfunction validateIndexedDBOpenable() {\r\n    return new Promise((resolve, reject) => {\r\n        try {\r\n            let preExist = true;\r\n            const DB_CHECK_NAME = 'validate-browser-context-for-indexeddb-analytics-module';\r\n            const request = self.indexedDB.open(DB_CHECK_NAME);\r\n            request.onsuccess = () => {\r\n                request.result.close();\r\n                // delete database only when it doesn't pre-exist\r\n                if (!preExist) {\r\n                    self.indexedDB.deleteDatabase(DB_CHECK_NAME);\r\n                }\r\n                resolve(true);\r\n            };\r\n            request.onupgradeneeded = () => {\r\n                preExist = false;\r\n            };\r\n            request.onerror = () => {\r\n                var _a;\r\n                reject(((_a = request.error) === null || _a === void 0 ? void 0 : _a.message) || '');\r\n            };\r\n        }\r\n        catch (error) {\r\n            reject(error);\r\n        }\r\n    });\r\n}\r\n/**\r\n *\r\n * This method checks whether cookie is enabled within current browser\r\n * @return true if cookie is enabled within current browser\r\n */\r\nfunction areCookiesEnabled() {\r\n    if (typeof navigator === 'undefined' || !navigator.cookieEnabled) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Standardized Firebase Error.\r\n *\r\n * Usage:\r\n *\r\n *   // Typescript string literals for type-safe codes\r\n *   type Err =\r\n *     'unknown' |\r\n *     'object-not-found'\r\n *     ;\r\n *\r\n *   // Closure enum for type-safe error codes\r\n *   // at-enum {string}\r\n *   var Err = {\r\n *     UNKNOWN: 'unknown',\r\n *     OBJECT_NOT_FOUND: 'object-not-found',\r\n *   }\r\n *\r\n *   let errors: Map<Err, string> = {\r\n *     'generic-error': \"Unknown error\",\r\n *     'file-not-found': \"Could not find file: {$file}\",\r\n *   };\r\n *\r\n *   // Type-safe function - must pass a valid error code as param.\r\n *   let error = new ErrorFactory<Err>('service', 'Service', errors);\r\n *\r\n *   ...\r\n *   throw error.create(Err.GENERIC);\r\n *   ...\r\n *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});\r\n *   ...\r\n *   // Service: Could not file file: foo.txt (service/file-not-found).\r\n *\r\n *   catch (e) {\r\n *     assert(e.message === \"Could not find file: foo.txt.\");\r\n *     if ((e as FirebaseError)?.code === 'service/file-not-found') {\r\n *       console.log(\"Could not read file: \" + e['file']);\r\n *     }\r\n *   }\r\n */\r\nconst ERROR_NAME = 'FirebaseError';\r\n// Based on code from:\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\r\nclass FirebaseError extends Error {\r\n    constructor(\r\n    /** The error code for this error. */\r\n    code, message, \r\n    /** Custom data for this error. */\r\n    customData) {\r\n        super(message);\r\n        this.code = code;\r\n        this.customData = customData;\r\n        /** The custom name for all FirebaseErrors. */\r\n        this.name = ERROR_NAME;\r\n        // Fix For ES5\r\n        // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\r\n        Object.setPrototypeOf(this, FirebaseError.prototype);\r\n        // Maintains proper stack trace for where our error was thrown.\r\n        // Only available on V8.\r\n        if (Error.captureStackTrace) {\r\n            Error.captureStackTrace(this, ErrorFactory.prototype.create);\r\n        }\r\n    }\r\n}\r\nclass ErrorFactory {\r\n    constructor(service, serviceName, errors) {\r\n        this.service = service;\r\n        this.serviceName = serviceName;\r\n        this.errors = errors;\r\n    }\r\n    create(code, ...data) {\r\n        const customData = data[0] || {};\r\n        const fullCode = `${this.service}/${code}`;\r\n        const template = this.errors[code];\r\n        const message = template ? replaceTemplate(template, customData) : 'Error';\r\n        // Service Name: Error message (service/code).\r\n        const fullMessage = `${this.serviceName}: ${message} (${fullCode}).`;\r\n        const error = new FirebaseError(fullCode, fullMessage, customData);\r\n        return error;\r\n    }\r\n}\r\nfunction replaceTemplate(template, data) {\r\n    return template.replace(PATTERN, (_, key) => {\r\n        const value = data[key];\r\n        return value != null ? String(value) : `<${key}?>`;\r\n    });\r\n}\r\nconst PATTERN = /\\{\\$([^}]+)}/g;\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Evaluates a JSON string into a javascript object.\r\n *\r\n * @param {string} str A string containing JSON.\r\n * @return {*} The javascript object representing the specified JSON.\r\n */\r\nfunction jsonEval(str) {\r\n    return JSON.parse(str);\r\n}\r\n/**\r\n * Returns JSON representing a javascript object.\r\n * @param {*} data Javascript object to be stringified.\r\n * @return {string} The JSON contents of the object.\r\n */\r\nfunction stringify(data) {\r\n    return JSON.stringify(data);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Decodes a Firebase auth. token into constituent parts.\r\n *\r\n * Notes:\r\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst decode = function (token) {\r\n    let header = {}, claims = {}, data = {}, signature = '';\r\n    try {\r\n        const parts = token.split('.');\r\n        header = jsonEval(base64Decode(parts[0]) || '');\r\n        claims = jsonEval(base64Decode(parts[1]) || '');\r\n        signature = parts[2];\r\n        data = claims['d'] || {};\r\n        delete claims['d'];\r\n    }\r\n    catch (e) { }\r\n    return {\r\n        header,\r\n        claims,\r\n        data,\r\n        signature\r\n    };\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\r\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst isValidTimestamp = function (token) {\r\n    const claims = decode(token).claims;\r\n    const now = Math.floor(new Date().getTime() / 1000);\r\n    let validSince = 0, validUntil = 0;\r\n    if (typeof claims === 'object') {\r\n        if (claims.hasOwnProperty('nbf')) {\r\n            validSince = claims['nbf'];\r\n        }\r\n        else if (claims.hasOwnProperty('iat')) {\r\n            validSince = claims['iat'];\r\n        }\r\n        if (claims.hasOwnProperty('exp')) {\r\n            validUntil = claims['exp'];\r\n        }\r\n        else {\r\n            // token will expire after 24h by default\r\n            validUntil = validSince + 86400;\r\n        }\r\n    }\r\n    return (!!now &&\r\n        !!validSince &&\r\n        !!validUntil &&\r\n        now >= validSince &&\r\n        now <= validUntil);\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\r\n *\r\n * Notes:\r\n * - May return null if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst issuedAtTime = function (token) {\r\n    const claims = decode(token).claims;\r\n    if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {\r\n        return claims['iat'];\r\n    }\r\n    return null;\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst isValidFormat = function (token) {\r\n    const decoded = decode(token), claims = decoded.claims;\r\n    return !!claims && typeof claims === 'object' && claims.hasOwnProperty('iat');\r\n};\r\n/**\r\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst isAdmin = function (token) {\r\n    const claims = decode(token).claims;\r\n    return typeof claims === 'object' && claims['admin'] === true;\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction contains(obj, key) {\r\n    return Object.prototype.hasOwnProperty.call(obj, key);\r\n}\r\nfunction safeGet(obj, key) {\r\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n        return obj[key];\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nfunction isEmpty(obj) {\r\n    for (const key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction map(obj, fn, contextObj) {\r\n    const res = {};\r\n    for (const key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            res[key] = fn.call(contextObj, obj[key], key, obj);\r\n        }\r\n    }\r\n    return res;\r\n}\r\n/**\r\n * Deep equal two objects. Support Arrays and Objects.\r\n */\r\nfunction deepEqual(a, b) {\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    const aKeys = Object.keys(a);\r\n    const bKeys = Object.keys(b);\r\n    for (const k of aKeys) {\r\n        if (!bKeys.includes(k)) {\r\n            return false;\r\n        }\r\n        const aProp = a[k];\r\n        const bProp = b[k];\r\n        if (isObject(aProp) && isObject(bProp)) {\r\n            if (!deepEqual(aProp, bProp)) {\r\n                return false;\r\n            }\r\n        }\r\n        else if (aProp !== bProp) {\r\n            return false;\r\n        }\r\n    }\r\n    for (const k of bKeys) {\r\n        if (!aKeys.includes(k)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction isObject(thing) {\r\n    return thing !== null && typeof thing === 'object';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2022 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Rejects if the given promise doesn't resolve in timeInMS milliseconds.\r\n * @internal\r\n */\r\nfunction promiseWithTimeout(promise, timeInMS = 2000) {\r\n    const deferredPromise = new Deferred();\r\n    setTimeout(() => deferredPromise.reject('timeout!'), timeInMS);\r\n    promise.then(deferredPromise.resolve, deferredPromise.reject);\r\n    return deferredPromise.promise;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a\r\n * params object (e.g. {arg: 'val', arg2: 'val2'})\r\n * Note: You must prepend it with ? when adding it to a URL.\r\n */\r\nfunction querystring(querystringParams) {\r\n    const params = [];\r\n    for (const [key, value] of Object.entries(querystringParams)) {\r\n        if (Array.isArray(value)) {\r\n            value.forEach(arrayVal => {\r\n                params.push(encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal));\r\n            });\r\n        }\r\n        else {\r\n            params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\r\n        }\r\n    }\r\n    return params.length ? '&' + params.join('&') : '';\r\n}\r\n/**\r\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object\r\n * (e.g. {arg: 'val', arg2: 'val2'})\r\n */\r\nfunction querystringDecode(querystring) {\r\n    const obj = {};\r\n    const tokens = querystring.replace(/^\\?/, '').split('&');\r\n    tokens.forEach(token => {\r\n        if (token) {\r\n            const [key, value] = token.split('=');\r\n            obj[decodeURIComponent(key)] = decodeURIComponent(value);\r\n        }\r\n    });\r\n    return obj;\r\n}\r\n/**\r\n * Extract the query string part of a URL, including the leading question mark (if present).\r\n */\r\nfunction extractQuerystring(url) {\r\n    const queryStart = url.indexOf('?');\r\n    if (!queryStart) {\r\n        return '';\r\n    }\r\n    const fragmentStart = url.indexOf('#', queryStart);\r\n    return url.substring(queryStart, fragmentStart > 0 ? fragmentStart : undefined);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview SHA-1 cryptographic hash.\r\n * Variable names follow the notation in FIPS PUB 180-3:\r\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\r\n *\r\n * Usage:\r\n *   var sha1 = new sha1();\r\n *   sha1.update(bytes);\r\n *   var hash = sha1.digest();\r\n *\r\n * Performance:\r\n *   Chrome 23:   ~400 Mbit/s\r\n *   Firefox 16:  ~250 Mbit/s\r\n *\r\n */\r\n/**\r\n * SHA-1 cryptographic hash constructor.\r\n *\r\n * The properties declared here are discussed in the above algorithm document.\r\n * @constructor\r\n * @final\r\n * @struct\r\n */\r\nclass Sha1 {\r\n    constructor() {\r\n        /**\r\n         * Holds the previous values of accumulated variables a-e in the compress_\r\n         * function.\r\n         * @private\r\n         */\r\n        this.chain_ = [];\r\n        /**\r\n         * A buffer holding the partially computed hash result.\r\n         * @private\r\n         */\r\n        this.buf_ = [];\r\n        /**\r\n         * An array of 80 bytes, each a part of the message to be hashed.  Referred to\r\n         * as the message schedule in the docs.\r\n         * @private\r\n         */\r\n        this.W_ = [];\r\n        /**\r\n         * Contains data needed to pad messages less than 64 bytes.\r\n         * @private\r\n         */\r\n        this.pad_ = [];\r\n        /**\r\n         * @private {number}\r\n         */\r\n        this.inbuf_ = 0;\r\n        /**\r\n         * @private {number}\r\n         */\r\n        this.total_ = 0;\r\n        this.blockSize = 512 / 8;\r\n        this.pad_[0] = 128;\r\n        for (let i = 1; i < this.blockSize; ++i) {\r\n            this.pad_[i] = 0;\r\n        }\r\n        this.reset();\r\n    }\r\n    reset() {\r\n        this.chain_[0] = 0x67452301;\r\n        this.chain_[1] = 0xefcdab89;\r\n        this.chain_[2] = 0x98badcfe;\r\n        this.chain_[3] = 0x10325476;\r\n        this.chain_[4] = 0xc3d2e1f0;\r\n        this.inbuf_ = 0;\r\n        this.total_ = 0;\r\n    }\r\n    /**\r\n     * Internal compress helper function.\r\n     * @param buf Block to compress.\r\n     * @param offset Offset of the block in the buffer.\r\n     * @private\r\n     */\r\n    compress_(buf, offset) {\r\n        if (!offset) {\r\n            offset = 0;\r\n        }\r\n        const W = this.W_;\r\n        // get 16 big endian words\r\n        if (typeof buf === 'string') {\r\n            for (let i = 0; i < 16; i++) {\r\n                // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\r\n                // have a bug that turns the post-increment ++ operator into pre-increment\r\n                // during JIT compilation.  We have code that depends heavily on SHA-1 for\r\n                // correctness and which is affected by this bug, so I've removed all uses\r\n                // of post-increment ++ in which the result value is used.  We can revert\r\n                // this change once the Safari bug\r\n                // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\r\n                // most clients have been updated.\r\n                W[i] =\r\n                    (buf.charCodeAt(offset) << 24) |\r\n                        (buf.charCodeAt(offset + 1) << 16) |\r\n                        (buf.charCodeAt(offset + 2) << 8) |\r\n                        buf.charCodeAt(offset + 3);\r\n                offset += 4;\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0; i < 16; i++) {\r\n                W[i] =\r\n                    (buf[offset] << 24) |\r\n                        (buf[offset + 1] << 16) |\r\n                        (buf[offset + 2] << 8) |\r\n                        buf[offset + 3];\r\n                offset += 4;\r\n            }\r\n        }\r\n        // expand to 80 words\r\n        for (let i = 16; i < 80; i++) {\r\n            const t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\r\n            W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;\r\n        }\r\n        let a = this.chain_[0];\r\n        let b = this.chain_[1];\r\n        let c = this.chain_[2];\r\n        let d = this.chain_[3];\r\n        let e = this.chain_[4];\r\n        let f, k;\r\n        // TODO(user): Try to unroll this loop to speed up the computation.\r\n        for (let i = 0; i < 80; i++) {\r\n            if (i < 40) {\r\n                if (i < 20) {\r\n                    f = d ^ (b & (c ^ d));\r\n                    k = 0x5a827999;\r\n                }\r\n                else {\r\n                    f = b ^ c ^ d;\r\n                    k = 0x6ed9eba1;\r\n                }\r\n            }\r\n            else {\r\n                if (i < 60) {\r\n                    f = (b & c) | (d & (b | c));\r\n                    k = 0x8f1bbcdc;\r\n                }\r\n                else {\r\n                    f = b ^ c ^ d;\r\n                    k = 0xca62c1d6;\r\n                }\r\n            }\r\n            const t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;\r\n            e = d;\r\n            d = c;\r\n            c = ((b << 30) | (b >>> 2)) & 0xffffffff;\r\n            b = a;\r\n            a = t;\r\n        }\r\n        this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;\r\n        this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;\r\n        this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;\r\n        this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;\r\n        this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;\r\n    }\r\n    update(bytes, length) {\r\n        // TODO(johnlenz): tighten the function signature and remove this check\r\n        if (bytes == null) {\r\n            return;\r\n        }\r\n        if (length === undefined) {\r\n            length = bytes.length;\r\n        }\r\n        const lengthMinusBlock = length - this.blockSize;\r\n        let n = 0;\r\n        // Using local instead of member variables gives ~5% speedup on Firefox 16.\r\n        const buf = this.buf_;\r\n        let inbuf = this.inbuf_;\r\n        // The outer while loop should execute at most twice.\r\n        while (n < length) {\r\n            // When we have no data in the block to top up, we can directly process the\r\n            // input buffer (assuming it contains sufficient data). This gives ~25%\r\n            // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\r\n            // the data is provided in large chunks (or in multiples of 64 bytes).\r\n            if (inbuf === 0) {\r\n                while (n <= lengthMinusBlock) {\r\n                    this.compress_(bytes, n);\r\n                    n += this.blockSize;\r\n                }\r\n            }\r\n            if (typeof bytes === 'string') {\r\n                while (n < length) {\r\n                    buf[inbuf] = bytes.charCodeAt(n);\r\n                    ++inbuf;\r\n                    ++n;\r\n                    if (inbuf === this.blockSize) {\r\n                        this.compress_(buf);\r\n                        inbuf = 0;\r\n                        // Jump to the outer loop so we use the full-block optimization.\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                while (n < length) {\r\n                    buf[inbuf] = bytes[n];\r\n                    ++inbuf;\r\n                    ++n;\r\n                    if (inbuf === this.blockSize) {\r\n                        this.compress_(buf);\r\n                        inbuf = 0;\r\n                        // Jump to the outer loop so we use the full-block optimization.\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.inbuf_ = inbuf;\r\n        this.total_ += length;\r\n    }\r\n    /** @override */\r\n    digest() {\r\n        const digest = [];\r\n        let totalBits = this.total_ * 8;\r\n        // Add pad 0x80 0x00*.\r\n        if (this.inbuf_ < 56) {\r\n            this.update(this.pad_, 56 - this.inbuf_);\r\n        }\r\n        else {\r\n            this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\r\n        }\r\n        // Add # bits.\r\n        for (let i = this.blockSize - 1; i >= 56; i--) {\r\n            this.buf_[i] = totalBits & 255;\r\n            totalBits /= 256; // Don't use bit-shifting here!\r\n        }\r\n        this.compress_(this.buf_);\r\n        let n = 0;\r\n        for (let i = 0; i < 5; i++) {\r\n            for (let j = 24; j >= 0; j -= 8) {\r\n                digest[n] = (this.chain_[i] >> j) & 255;\r\n                ++n;\r\n            }\r\n        }\r\n        return digest;\r\n    }\r\n}\n\n/**\r\n * Helper to make a Subscribe function (just like Promise helps make a\r\n * Thenable).\r\n *\r\n * @param executor Function which can make calls to a single Observer\r\n *     as a proxy.\r\n * @param onNoObservers Callback when count of Observers goes to zero.\r\n */\r\nfunction createSubscribe(executor, onNoObservers) {\r\n    const proxy = new ObserverProxy(executor, onNoObservers);\r\n    return proxy.subscribe.bind(proxy);\r\n}\r\n/**\r\n * Implement fan-out for any number of Observers attached via a subscribe\r\n * function.\r\n */\r\nclass ObserverProxy {\r\n    /**\r\n     * @param executor Function which can make calls to a single Observer\r\n     *     as a proxy.\r\n     * @param onNoObservers Callback when count of Observers goes to zero.\r\n     */\r\n    constructor(executor, onNoObservers) {\r\n        this.observers = [];\r\n        this.unsubscribes = [];\r\n        this.observerCount = 0;\r\n        // Micro-task scheduling by calling task.then().\r\n        this.task = Promise.resolve();\r\n        this.finalized = false;\r\n        this.onNoObservers = onNoObservers;\r\n        // Call the executor asynchronously so subscribers that are called\r\n        // synchronously after the creation of the subscribe function\r\n        // can still receive the very first value generated in the executor.\r\n        this.task\r\n            .then(() => {\r\n            executor(this);\r\n        })\r\n            .catch(e => {\r\n            this.error(e);\r\n        });\r\n    }\r\n    next(value) {\r\n        this.forEachObserver((observer) => {\r\n            observer.next(value);\r\n        });\r\n    }\r\n    error(error) {\r\n        this.forEachObserver((observer) => {\r\n            observer.error(error);\r\n        });\r\n        this.close(error);\r\n    }\r\n    complete() {\r\n        this.forEachObserver((observer) => {\r\n            observer.complete();\r\n        });\r\n        this.close();\r\n    }\r\n    /**\r\n     * Subscribe function that can be used to add an Observer to the fan-out list.\r\n     *\r\n     * - We require that no event is sent to a subscriber sychronously to their\r\n     *   call to subscribe().\r\n     */\r\n    subscribe(nextOrObserver, error, complete) {\r\n        let observer;\r\n        if (nextOrObserver === undefined &&\r\n            error === undefined &&\r\n            complete === undefined) {\r\n            throw new Error('Missing Observer.');\r\n        }\r\n        // Assemble an Observer object when passed as callback functions.\r\n        if (implementsAnyMethods(nextOrObserver, [\r\n            'next',\r\n            'error',\r\n            'complete'\r\n        ])) {\r\n            observer = nextOrObserver;\r\n        }\r\n        else {\r\n            observer = {\r\n                next: nextOrObserver,\r\n                error,\r\n                complete\r\n            };\r\n        }\r\n        if (observer.next === undefined) {\r\n            observer.next = noop;\r\n        }\r\n        if (observer.error === undefined) {\r\n            observer.error = noop;\r\n        }\r\n        if (observer.complete === undefined) {\r\n            observer.complete = noop;\r\n        }\r\n        const unsub = this.unsubscribeOne.bind(this, this.observers.length);\r\n        // Attempt to subscribe to a terminated Observable - we\r\n        // just respond to the Observer with the final error or complete\r\n        // event.\r\n        if (this.finalized) {\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            this.task.then(() => {\r\n                try {\r\n                    if (this.finalError) {\r\n                        observer.error(this.finalError);\r\n                    }\r\n                    else {\r\n                        observer.complete();\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // nothing\r\n                }\r\n                return;\r\n            });\r\n        }\r\n        this.observers.push(observer);\r\n        return unsub;\r\n    }\r\n    // Unsubscribe is synchronous - we guarantee that no events are sent to\r\n    // any unsubscribed Observer.\r\n    unsubscribeOne(i) {\r\n        if (this.observers === undefined || this.observers[i] === undefined) {\r\n            return;\r\n        }\r\n        delete this.observers[i];\r\n        this.observerCount -= 1;\r\n        if (this.observerCount === 0 && this.onNoObservers !== undefined) {\r\n            this.onNoObservers(this);\r\n        }\r\n    }\r\n    forEachObserver(fn) {\r\n        if (this.finalized) {\r\n            // Already closed by previous event....just eat the additional values.\r\n            return;\r\n        }\r\n        // Since sendOne calls asynchronously - there is no chance that\r\n        // this.observers will become undefined.\r\n        for (let i = 0; i < this.observers.length; i++) {\r\n            this.sendOne(i, fn);\r\n        }\r\n    }\r\n    // Call the Observer via one of it's callback function. We are careful to\r\n    // confirm that the observe has not been unsubscribed since this asynchronous\r\n    // function had been queued.\r\n    sendOne(i, fn) {\r\n        // Execute the callback asynchronously\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this.task.then(() => {\r\n            if (this.observers !== undefined && this.observers[i] !== undefined) {\r\n                try {\r\n                    fn(this.observers[i]);\r\n                }\r\n                catch (e) {\r\n                    // Ignore exceptions raised in Observers or missing methods of an\r\n                    // Observer.\r\n                    // Log error to console. b/31404806\r\n                    if (typeof console !== 'undefined' && console.error) {\r\n                        console.error(e);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    close(err) {\r\n        if (this.finalized) {\r\n            return;\r\n        }\r\n        this.finalized = true;\r\n        if (err !== undefined) {\r\n            this.finalError = err;\r\n        }\r\n        // Proxy is no longer needed - garbage collect references\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this.task.then(() => {\r\n            this.observers = undefined;\r\n            this.onNoObservers = undefined;\r\n        });\r\n    }\r\n}\r\n/** Turn synchronous function into one called asynchronously. */\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nfunction async(fn, onError) {\r\n    return (...args) => {\r\n        Promise.resolve(true)\r\n            .then(() => {\r\n            fn(...args);\r\n        })\r\n            .catch((error) => {\r\n            if (onError) {\r\n                onError(error);\r\n            }\r\n        });\r\n    };\r\n}\r\n/**\r\n * Return true if the object passed in implements any of the named methods.\r\n */\r\nfunction implementsAnyMethods(obj, methods) {\r\n    if (typeof obj !== 'object' || obj === null) {\r\n        return false;\r\n    }\r\n    for (const method of methods) {\r\n        if (method in obj && typeof obj[method] === 'function') {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction noop() {\r\n    // do nothing\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Check to make sure the appropriate number of arguments are provided for a public function.\r\n * Throws an error if it fails.\r\n *\r\n * @param fnName The function name\r\n * @param minCount The minimum number of arguments to allow for the function call\r\n * @param maxCount The maximum number of argument to allow for the function call\r\n * @param argCount The actual number of arguments provided.\r\n */\r\nconst validateArgCount = function (fnName, minCount, maxCount, argCount) {\r\n    let argError;\r\n    if (argCount < minCount) {\r\n        argError = 'at least ' + minCount;\r\n    }\r\n    else if (argCount > maxCount) {\r\n        argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\r\n    }\r\n    if (argError) {\r\n        const error = fnName +\r\n            ' failed: Was called with ' +\r\n            argCount +\r\n            (argCount === 1 ? ' argument.' : ' arguments.') +\r\n            ' Expects ' +\r\n            argError +\r\n            '.';\r\n        throw new Error(error);\r\n    }\r\n};\r\n/**\r\n * Generates a string to prefix an error message about failed argument validation\r\n *\r\n * @param fnName The function name\r\n * @param argName The name of the argument\r\n * @return The prefix to add to the error thrown for validation.\r\n */\r\nfunction errorPrefix(fnName, argName) {\r\n    return `${fnName} failed: ${argName} argument `;\r\n}\r\n/**\r\n * @param fnName\r\n * @param argumentNumber\r\n * @param namespace\r\n * @param optional\r\n */\r\nfunction validateNamespace(fnName, namespace, optional) {\r\n    if (optional && !namespace) {\r\n        return;\r\n    }\r\n    if (typeof namespace !== 'string') {\r\n        //TODO: I should do more validation here. We only allow certain chars in namespaces.\r\n        throw new Error(errorPrefix(fnName, 'namespace') + 'must be a valid firebase namespace.');\r\n    }\r\n}\r\nfunction validateCallback(fnName, argumentName, \r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\ncallback, optional) {\r\n    if (optional && !callback) {\r\n        return;\r\n    }\r\n    if (typeof callback !== 'function') {\r\n        throw new Error(errorPrefix(fnName, argumentName) + 'must be a valid function.');\r\n    }\r\n}\r\nfunction validateContextObject(fnName, argumentName, context, optional) {\r\n    if (optional && !context) {\r\n        return;\r\n    }\r\n    if (typeof context !== 'object' || context === null) {\r\n        throw new Error(errorPrefix(fnName, argumentName) + 'must be a valid context object.');\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\r\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\r\n// so it's been modified.\r\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\r\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\r\n// use 2 characters in Javascript.  All 4-byte UTF-8 characters begin with a first\r\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\r\n// pair).\r\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\r\n/**\r\n * @param {string} str\r\n * @return {Array}\r\n */\r\nconst stringToByteArray = function (str) {\r\n    const out = [];\r\n    let p = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        let c = str.charCodeAt(i);\r\n        // Is this the lead surrogate in a surrogate pair?\r\n        if (c >= 0xd800 && c <= 0xdbff) {\r\n            const high = c - 0xd800; // the high 10 bits.\r\n            i++;\r\n            assert(i < str.length, 'Surrogate pair missing trail surrogate.');\r\n            const low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\r\n            c = 0x10000 + (high << 10) + low;\r\n        }\r\n        if (c < 128) {\r\n            out[p++] = c;\r\n        }\r\n        else if (c < 2048) {\r\n            out[p++] = (c >> 6) | 192;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else if (c < 65536) {\r\n            out[p++] = (c >> 12) | 224;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else {\r\n            out[p++] = (c >> 18) | 240;\r\n            out[p++] = ((c >> 12) & 63) | 128;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n    }\r\n    return out;\r\n};\r\n/**\r\n * Calculate length without actually converting; useful for doing cheaper validation.\r\n * @param {string} str\r\n * @return {number}\r\n */\r\nconst stringLength = function (str) {\r\n    let p = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        const c = str.charCodeAt(i);\r\n        if (c < 128) {\r\n            p++;\r\n        }\r\n        else if (c < 2048) {\r\n            p += 2;\r\n        }\r\n        else if (c >= 0xd800 && c <= 0xdbff) {\r\n            // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\r\n            p += 4;\r\n            i++; // skip trail surrogate.\r\n        }\r\n        else {\r\n            p += 3;\r\n        }\r\n    }\r\n    return p;\r\n};\n\n/**\r\n * @license\r\n * Copyright 2022 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Copied from https://stackoverflow.com/a/2117523\r\n * Generates a new uuid.\r\n * @public\r\n */\r\nconst uuidv4 = function () {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n        const r = (Math.random() * 16) | 0, v = c === 'x' ? r : (r & 0x3) | 0x8;\r\n        return v.toString(16);\r\n    });\r\n};\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The amount of milliseconds to exponentially increase.\r\n */\r\nconst DEFAULT_INTERVAL_MILLIS = 1000;\r\n/**\r\n * The factor to backoff by.\r\n * Should be a number greater than 1.\r\n */\r\nconst DEFAULT_BACKOFF_FACTOR = 2;\r\n/**\r\n * The maximum milliseconds to increase to.\r\n *\r\n * <p>Visible for testing\r\n */\r\nconst MAX_VALUE_MILLIS = 4 * 60 * 60 * 1000; // Four hours, like iOS and Android.\r\n/**\r\n * The percentage of backoff time to randomize by.\r\n * See\r\n * http://go/safe-client-behavior#step-1-determine-the-appropriate-retry-interval-to-handle-spike-traffic\r\n * for context.\r\n *\r\n * <p>Visible for testing\r\n */\r\nconst RANDOM_FACTOR = 0.5;\r\n/**\r\n * Based on the backoff method from\r\n * https://github.com/google/closure-library/blob/master/closure/goog/math/exponentialbackoff.js.\r\n * Extracted here so we don't need to pass metadata and a stateful ExponentialBackoff object around.\r\n */\r\nfunction calculateBackoffMillis(backoffCount, intervalMillis = DEFAULT_INTERVAL_MILLIS, backoffFactor = DEFAULT_BACKOFF_FACTOR) {\r\n    // Calculates an exponentially increasing value.\r\n    // Deviation: calculates value from count and a constant interval, so we only need to save value\r\n    // and count to restore state.\r\n    const currBaseValue = intervalMillis * Math.pow(backoffFactor, backoffCount);\r\n    // A random \"fuzz\" to avoid waves of retries.\r\n    // Deviation: randomFactor is required.\r\n    const randomWait = Math.round(\r\n    // A fraction of the backoff value to add/subtract.\r\n    // Deviation: changes multiplication order to improve readability.\r\n    RANDOM_FACTOR *\r\n        currBaseValue *\r\n        // A random float (rounded to int by Math.round above) in the range [-1, 1]. Determines\r\n        // if we add or subtract.\r\n        (Math.random() - 0.5) *\r\n        2);\r\n    // Limits backoff to max to avoid effectively permanent backoff.\r\n    return Math.min(MAX_VALUE_MILLIS, currBaseValue + randomWait);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provide English ordinal letters after a number\r\n */\r\nfunction ordinal(i) {\r\n    if (!Number.isFinite(i)) {\r\n        return `${i}`;\r\n    }\r\n    return i + indicator(i);\r\n}\r\nfunction indicator(i) {\r\n    i = Math.abs(i);\r\n    const cent = i % 100;\r\n    if (cent >= 10 && cent <= 20) {\r\n        return 'th';\r\n    }\r\n    const dec = i % 10;\r\n    if (dec === 1) {\r\n        return 'st';\r\n    }\r\n    if (dec === 2) {\r\n        return 'nd';\r\n    }\r\n    if (dec === 3) {\r\n        return 'rd';\r\n    }\r\n    return 'th';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getModularInstance(service) {\r\n    if (service && service._delegate) {\r\n        return service._delegate;\r\n    }\r\n    else {\r\n        return service;\r\n    }\r\n}\n\nexport { CONSTANTS, DecodeBase64StringError, Deferred, ErrorFactory, FirebaseError, MAX_VALUE_MILLIS, RANDOM_FACTOR, Sha1, areCookiesEnabled, assert, assertionError, async, base64, base64Decode, base64Encode, base64urlEncodeWithoutPadding, calculateBackoffMillis, contains, createMockUserToken, createSubscribe, decode, deepCopy, deepEqual, deepExtend, errorPrefix, extractQuerystring, getDefaultAppConfig, getDefaultEmulatorHost, getDefaultEmulatorHostnameAndPort, getDefaults, getExperimentalSetting, getGlobal, getModularInstance, getUA, isAdmin, isBrowser, isBrowserExtension, isElectron, isEmpty, isIE, isIndexedDBAvailable, isMobileCordova, isNode, isNodeSdk, isReactNative, isSafari, isUWP, isValidFormat, isValidTimestamp, issuedAtTime, jsonEval, map, ordinal, promiseWithTimeout, querystring, querystringDecode, safeGet, stringLength, stringToByteArray, stringify, uuidv4, validateArgCount, validateCallback, validateContextObject, validateIndexedDBOpenable, validateNamespace };\n//# sourceMappingURL=index.esm2017.js.map\n","import { Deferred } from '@firebase/util';\n\n/**\r\n * Component for service name T, e.g. `auth`, `auth-internal`\r\n */\r\nclass Component {\r\n    /**\r\n     *\r\n     * @param name The public service name, e.g. app, auth, firestore, database\r\n     * @param instanceFactory Service factory responsible for creating the public interface\r\n     * @param type whether the service provided by the component is public or private\r\n     */\r\n    constructor(name, instanceFactory, type) {\r\n        this.name = name;\r\n        this.instanceFactory = instanceFactory;\r\n        this.type = type;\r\n        this.multipleInstances = false;\r\n        /**\r\n         * Properties to be added to the service namespace\r\n         */\r\n        this.serviceProps = {};\r\n        this.instantiationMode = \"LAZY\" /* InstantiationMode.LAZY */;\r\n        this.onInstanceCreated = null;\r\n    }\r\n    setInstantiationMode(mode) {\r\n        this.instantiationMode = mode;\r\n        return this;\r\n    }\r\n    setMultipleInstances(multipleInstances) {\r\n        this.multipleInstances = multipleInstances;\r\n        return this;\r\n    }\r\n    setServiceProps(props) {\r\n        this.serviceProps = props;\r\n        return this;\r\n    }\r\n    setInstanceCreatedCallback(callback) {\r\n        this.onInstanceCreated = callback;\r\n        return this;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst DEFAULT_ENTRY_NAME = '[DEFAULT]';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provider for instance for service name T, e.g. 'auth', 'auth-internal'\r\n * NameServiceMapping[T] is an alias for the type of the instance\r\n */\r\nclass Provider {\r\n    constructor(name, container) {\r\n        this.name = name;\r\n        this.container = container;\r\n        this.component = null;\r\n        this.instances = new Map();\r\n        this.instancesDeferred = new Map();\r\n        this.instancesOptions = new Map();\r\n        this.onInitCallbacks = new Map();\r\n    }\r\n    /**\r\n     * @param identifier A provider can provide mulitple instances of a service\r\n     * if this.component.multipleInstances is true.\r\n     */\r\n    get(identifier) {\r\n        // if multipleInstances is not supported, use the default name\r\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\r\n        if (!this.instancesDeferred.has(normalizedIdentifier)) {\r\n            const deferred = new Deferred();\r\n            this.instancesDeferred.set(normalizedIdentifier, deferred);\r\n            if (this.isInitialized(normalizedIdentifier) ||\r\n                this.shouldAutoInitialize()) {\r\n                // initialize the service if it can be auto-initialized\r\n                try {\r\n                    const instance = this.getOrInitializeService({\r\n                        instanceIdentifier: normalizedIdentifier\r\n                    });\r\n                    if (instance) {\r\n                        deferred.resolve(instance);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // when the instance factory throws an exception during get(), it should not cause\r\n                    // a fatal error. We just return the unresolved promise in this case.\r\n                }\r\n            }\r\n        }\r\n        return this.instancesDeferred.get(normalizedIdentifier).promise;\r\n    }\r\n    getImmediate(options) {\r\n        var _a;\r\n        // if multipleInstances is not supported, use the default name\r\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(options === null || options === void 0 ? void 0 : options.identifier);\r\n        const optional = (_a = options === null || options === void 0 ? void 0 : options.optional) !== null && _a !== void 0 ? _a : false;\r\n        if (this.isInitialized(normalizedIdentifier) ||\r\n            this.shouldAutoInitialize()) {\r\n            try {\r\n                return this.getOrInitializeService({\r\n                    instanceIdentifier: normalizedIdentifier\r\n                });\r\n            }\r\n            catch (e) {\r\n                if (optional) {\r\n                    return null;\r\n                }\r\n                else {\r\n                    throw e;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // In case a component is not initialized and should/can not be auto-initialized at the moment, return null if the optional flag is set, or throw\r\n            if (optional) {\r\n                return null;\r\n            }\r\n            else {\r\n                throw Error(`Service ${this.name} is not available`);\r\n            }\r\n        }\r\n    }\r\n    getComponent() {\r\n        return this.component;\r\n    }\r\n    setComponent(component) {\r\n        if (component.name !== this.name) {\r\n            throw Error(`Mismatching Component ${component.name} for Provider ${this.name}.`);\r\n        }\r\n        if (this.component) {\r\n            throw Error(`Component for ${this.name} has already been provided`);\r\n        }\r\n        this.component = component;\r\n        // return early without attempting to initialize the component if the component requires explicit initialization (calling `Provider.initialize()`)\r\n        if (!this.shouldAutoInitialize()) {\r\n            return;\r\n        }\r\n        // if the service is eager, initialize the default instance\r\n        if (isComponentEager(component)) {\r\n            try {\r\n                this.getOrInitializeService({ instanceIdentifier: DEFAULT_ENTRY_NAME });\r\n            }\r\n            catch (e) {\r\n                // when the instance factory for an eager Component throws an exception during the eager\r\n                // initialization, it should not cause a fatal error.\r\n                // TODO: Investigate if we need to make it configurable, because some component may want to cause\r\n                // a fatal error in this case?\r\n            }\r\n        }\r\n        // Create service instances for the pending promises and resolve them\r\n        // NOTE: if this.multipleInstances is false, only the default instance will be created\r\n        // and all promises with resolve with it regardless of the identifier.\r\n        for (const [instanceIdentifier, instanceDeferred] of this.instancesDeferred.entries()) {\r\n            const normalizedIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);\r\n            try {\r\n                // `getOrInitializeService()` should always return a valid instance since a component is guaranteed. use ! to make typescript happy.\r\n                const instance = this.getOrInitializeService({\r\n                    instanceIdentifier: normalizedIdentifier\r\n                });\r\n                instanceDeferred.resolve(instance);\r\n            }\r\n            catch (e) {\r\n                // when the instance factory throws an exception, it should not cause\r\n                // a fatal error. We just leave the promise unresolved.\r\n            }\r\n        }\r\n    }\r\n    clearInstance(identifier = DEFAULT_ENTRY_NAME) {\r\n        this.instancesDeferred.delete(identifier);\r\n        this.instancesOptions.delete(identifier);\r\n        this.instances.delete(identifier);\r\n    }\r\n    // app.delete() will call this method on every provider to delete the services\r\n    // TODO: should we mark the provider as deleted?\r\n    async delete() {\r\n        const services = Array.from(this.instances.values());\r\n        await Promise.all([\r\n            ...services\r\n                .filter(service => 'INTERNAL' in service) // legacy services\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                .map(service => service.INTERNAL.delete()),\r\n            ...services\r\n                .filter(service => '_delete' in service) // modularized services\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                .map(service => service._delete())\r\n        ]);\r\n    }\r\n    isComponentSet() {\r\n        return this.component != null;\r\n    }\r\n    isInitialized(identifier = DEFAULT_ENTRY_NAME) {\r\n        return this.instances.has(identifier);\r\n    }\r\n    getOptions(identifier = DEFAULT_ENTRY_NAME) {\r\n        return this.instancesOptions.get(identifier) || {};\r\n    }\r\n    initialize(opts = {}) {\r\n        const { options = {} } = opts;\r\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(opts.instanceIdentifier);\r\n        if (this.isInitialized(normalizedIdentifier)) {\r\n            throw Error(`${this.name}(${normalizedIdentifier}) has already been initialized`);\r\n        }\r\n        if (!this.isComponentSet()) {\r\n            throw Error(`Component ${this.name} has not been registered yet`);\r\n        }\r\n        const instance = this.getOrInitializeService({\r\n            instanceIdentifier: normalizedIdentifier,\r\n            options\r\n        });\r\n        // resolve any pending promise waiting for the service instance\r\n        for (const [instanceIdentifier, instanceDeferred] of this.instancesDeferred.entries()) {\r\n            const normalizedDeferredIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);\r\n            if (normalizedIdentifier === normalizedDeferredIdentifier) {\r\n                instanceDeferred.resolve(instance);\r\n            }\r\n        }\r\n        return instance;\r\n    }\r\n    /**\r\n     *\r\n     * @param callback - a function that will be invoked  after the provider has been initialized by calling provider.initialize().\r\n     * The function is invoked SYNCHRONOUSLY, so it should not execute any longrunning tasks in order to not block the program.\r\n     *\r\n     * @param identifier An optional instance identifier\r\n     * @returns a function to unregister the callback\r\n     */\r\n    onInit(callback, identifier) {\r\n        var _a;\r\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\r\n        const existingCallbacks = (_a = this.onInitCallbacks.get(normalizedIdentifier)) !== null && _a !== void 0 ? _a : new Set();\r\n        existingCallbacks.add(callback);\r\n        this.onInitCallbacks.set(normalizedIdentifier, existingCallbacks);\r\n        const existingInstance = this.instances.get(normalizedIdentifier);\r\n        if (existingInstance) {\r\n            callback(existingInstance, normalizedIdentifier);\r\n        }\r\n        return () => {\r\n            existingCallbacks.delete(callback);\r\n        };\r\n    }\r\n    /**\r\n     * Invoke onInit callbacks synchronously\r\n     * @param instance the service instance`\r\n     */\r\n    invokeOnInitCallbacks(instance, identifier) {\r\n        const callbacks = this.onInitCallbacks.get(identifier);\r\n        if (!callbacks) {\r\n            return;\r\n        }\r\n        for (const callback of callbacks) {\r\n            try {\r\n                callback(instance, identifier);\r\n            }\r\n            catch (_a) {\r\n                // ignore errors in the onInit callback\r\n            }\r\n        }\r\n    }\r\n    getOrInitializeService({ instanceIdentifier, options = {} }) {\r\n        let instance = this.instances.get(instanceIdentifier);\r\n        if (!instance && this.component) {\r\n            instance = this.component.instanceFactory(this.container, {\r\n                instanceIdentifier: normalizeIdentifierForFactory(instanceIdentifier),\r\n                options\r\n            });\r\n            this.instances.set(instanceIdentifier, instance);\r\n            this.instancesOptions.set(instanceIdentifier, options);\r\n            /**\r\n             * Invoke onInit listeners.\r\n             * Note this.component.onInstanceCreated is different, which is used by the component creator,\r\n             * while onInit listeners are registered by consumers of the provider.\r\n             */\r\n            this.invokeOnInitCallbacks(instance, instanceIdentifier);\r\n            /**\r\n             * Order is important\r\n             * onInstanceCreated() should be called after this.instances.set(instanceIdentifier, instance); which\r\n             * makes `isInitialized()` return true.\r\n             */\r\n            if (this.component.onInstanceCreated) {\r\n                try {\r\n                    this.component.onInstanceCreated(this.container, instanceIdentifier, instance);\r\n                }\r\n                catch (_a) {\r\n                    // ignore errors in the onInstanceCreatedCallback\r\n                }\r\n            }\r\n        }\r\n        return instance || null;\r\n    }\r\n    normalizeInstanceIdentifier(identifier = DEFAULT_ENTRY_NAME) {\r\n        if (this.component) {\r\n            return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME;\r\n        }\r\n        else {\r\n            return identifier; // assume multiple instances are supported before the component is provided.\r\n        }\r\n    }\r\n    shouldAutoInitialize() {\r\n        return (!!this.component &&\r\n            this.component.instantiationMode !== \"EXPLICIT\" /* InstantiationMode.EXPLICIT */);\r\n    }\r\n}\r\n// undefined should be passed to the service factory for the default instance\r\nfunction normalizeIdentifierForFactory(identifier) {\r\n    return identifier === DEFAULT_ENTRY_NAME ? undefined : identifier;\r\n}\r\nfunction isComponentEager(component) {\r\n    return component.instantiationMode === \"EAGER\" /* InstantiationMode.EAGER */;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`\r\n */\r\nclass ComponentContainer {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.providers = new Map();\r\n    }\r\n    /**\r\n     *\r\n     * @param component Component being added\r\n     * @param overwrite When a component with the same name has already been registered,\r\n     * if overwrite is true: overwrite the existing component with the new component and create a new\r\n     * provider with the new component. It can be useful in tests where you want to use different mocks\r\n     * for different tests.\r\n     * if overwrite is false: throw an exception\r\n     */\r\n    addComponent(component) {\r\n        const provider = this.getProvider(component.name);\r\n        if (provider.isComponentSet()) {\r\n            throw new Error(`Component ${component.name} has already been registered with ${this.name}`);\r\n        }\r\n        provider.setComponent(component);\r\n    }\r\n    addOrOverwriteComponent(component) {\r\n        const provider = this.getProvider(component.name);\r\n        if (provider.isComponentSet()) {\r\n            // delete the existing provider from the container, so we can register the new component\r\n            this.providers.delete(component.name);\r\n        }\r\n        this.addComponent(component);\r\n    }\r\n    /**\r\n     * getProvider provides a type safe interface where it can only be called with a field name\r\n     * present in NameServiceMapping interface.\r\n     *\r\n     * Firebase SDKs providing services should extend NameServiceMapping interface to register\r\n     * themselves.\r\n     */\r\n    getProvider(name) {\r\n        if (this.providers.has(name)) {\r\n            return this.providers.get(name);\r\n        }\r\n        // create a Provider for a service that hasn't registered with Firebase\r\n        const provider = new Provider(name, this);\r\n        this.providers.set(name, provider);\r\n        return provider;\r\n    }\r\n    getProviders() {\r\n        return Array.from(this.providers.values());\r\n    }\r\n}\n\nexport { Component, ComponentContainer, Provider };\n//# sourceMappingURL=index.esm2017.js.map\n","/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A container for all of the Logger instances\r\n */\r\nconst instances = [];\r\n/**\r\n * The JS SDK supports 5 log levels and also allows a user the ability to\r\n * silence the logs altogether.\r\n *\r\n * The order is a follows:\r\n * DEBUG < VERBOSE < INFO < WARN < ERROR\r\n *\r\n * All of the log types above the current log level will be captured (i.e. if\r\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\r\n * `VERBOSE` logs will not)\r\n */\r\nvar LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\r\n    LogLevel[LogLevel[\"VERBOSE\"] = 1] = \"VERBOSE\";\r\n    LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\r\n    LogLevel[LogLevel[\"WARN\"] = 3] = \"WARN\";\r\n    LogLevel[LogLevel[\"ERROR\"] = 4] = \"ERROR\";\r\n    LogLevel[LogLevel[\"SILENT\"] = 5] = \"SILENT\";\r\n})(LogLevel || (LogLevel = {}));\r\nconst levelStringToEnum = {\r\n    'debug': LogLevel.DEBUG,\r\n    'verbose': LogLevel.VERBOSE,\r\n    'info': LogLevel.INFO,\r\n    'warn': LogLevel.WARN,\r\n    'error': LogLevel.ERROR,\r\n    'silent': LogLevel.SILENT\r\n};\r\n/**\r\n * The default log level\r\n */\r\nconst defaultLogLevel = LogLevel.INFO;\r\n/**\r\n * By default, `console.debug` is not displayed in the developer console (in\r\n * chrome). To avoid forcing users to have to opt-in to these logs twice\r\n * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\r\n * logs to the `console.log` function.\r\n */\r\nconst ConsoleMethod = {\r\n    [LogLevel.DEBUG]: 'log',\r\n    [LogLevel.VERBOSE]: 'log',\r\n    [LogLevel.INFO]: 'info',\r\n    [LogLevel.WARN]: 'warn',\r\n    [LogLevel.ERROR]: 'error'\r\n};\r\n/**\r\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\r\n * messages on to their corresponding console counterparts (if the log method\r\n * is supported by the current log level)\r\n */\r\nconst defaultLogHandler = (instance, logType, ...args) => {\r\n    if (logType < instance.logLevel) {\r\n        return;\r\n    }\r\n    const now = new Date().toISOString();\r\n    const method = ConsoleMethod[logType];\r\n    if (method) {\r\n        console[method](`[${now}]  ${instance.name}:`, ...args);\r\n    }\r\n    else {\r\n        throw new Error(`Attempted to log a message with an invalid logType (value: ${logType})`);\r\n    }\r\n};\r\nclass Logger {\r\n    /**\r\n     * Gives you an instance of a Logger to capture messages according to\r\n     * Firebase's logging scheme.\r\n     *\r\n     * @param name The name that the logs will be associated with\r\n     */\r\n    constructor(name) {\r\n        this.name = name;\r\n        /**\r\n         * The log level of the given Logger instance.\r\n         */\r\n        this._logLevel = defaultLogLevel;\r\n        /**\r\n         * The main (internal) log handler for the Logger instance.\r\n         * Can be set to a new function in internal package code but not by user.\r\n         */\r\n        this._logHandler = defaultLogHandler;\r\n        /**\r\n         * The optional, additional, user-defined log handler for the Logger instance.\r\n         */\r\n        this._userLogHandler = null;\r\n        /**\r\n         * Capture the current instance for later use\r\n         */\r\n        instances.push(this);\r\n    }\r\n    get logLevel() {\r\n        return this._logLevel;\r\n    }\r\n    set logLevel(val) {\r\n        if (!(val in LogLevel)) {\r\n            throw new TypeError(`Invalid value \"${val}\" assigned to \\`logLevel\\``);\r\n        }\r\n        this._logLevel = val;\r\n    }\r\n    // Workaround for setter/getter having to be the same type.\r\n    setLogLevel(val) {\r\n        this._logLevel = typeof val === 'string' ? levelStringToEnum[val] : val;\r\n    }\r\n    get logHandler() {\r\n        return this._logHandler;\r\n    }\r\n    set logHandler(val) {\r\n        if (typeof val !== 'function') {\r\n            throw new TypeError('Value assigned to `logHandler` must be a function');\r\n        }\r\n        this._logHandler = val;\r\n    }\r\n    get userLogHandler() {\r\n        return this._userLogHandler;\r\n    }\r\n    set userLogHandler(val) {\r\n        this._userLogHandler = val;\r\n    }\r\n    /**\r\n     * The functions below are all based on the `console` interface\r\n     */\r\n    debug(...args) {\r\n        this._userLogHandler && this._userLogHandler(this, LogLevel.DEBUG, ...args);\r\n        this._logHandler(this, LogLevel.DEBUG, ...args);\r\n    }\r\n    log(...args) {\r\n        this._userLogHandler &&\r\n            this._userLogHandler(this, LogLevel.VERBOSE, ...args);\r\n        this._logHandler(this, LogLevel.VERBOSE, ...args);\r\n    }\r\n    info(...args) {\r\n        this._userLogHandler && this._userLogHandler(this, LogLevel.INFO, ...args);\r\n        this._logHandler(this, LogLevel.INFO, ...args);\r\n    }\r\n    warn(...args) {\r\n        this._userLogHandler && this._userLogHandler(this, LogLevel.WARN, ...args);\r\n        this._logHandler(this, LogLevel.WARN, ...args);\r\n    }\r\n    error(...args) {\r\n        this._userLogHandler && this._userLogHandler(this, LogLevel.ERROR, ...args);\r\n        this._logHandler(this, LogLevel.ERROR, ...args);\r\n    }\r\n}\r\nfunction setLogLevel(level) {\r\n    instances.forEach(inst => {\r\n        inst.setLogLevel(level);\r\n    });\r\n}\r\nfunction setUserLogHandler(logCallback, options) {\r\n    for (const instance of instances) {\r\n        let customLogLevel = null;\r\n        if (options && options.level) {\r\n            customLogLevel = levelStringToEnum[options.level];\r\n        }\r\n        if (logCallback === null) {\r\n            instance.userLogHandler = null;\r\n        }\r\n        else {\r\n            instance.userLogHandler = (instance, level, ...args) => {\r\n                const message = args\r\n                    .map(arg => {\r\n                    if (arg == null) {\r\n                        return null;\r\n                    }\r\n                    else if (typeof arg === 'string') {\r\n                        return arg;\r\n                    }\r\n                    else if (typeof arg === 'number' || typeof arg === 'boolean') {\r\n                        return arg.toString();\r\n                    }\r\n                    else if (arg instanceof Error) {\r\n                        return arg.message;\r\n                    }\r\n                    else {\r\n                        try {\r\n                            return JSON.stringify(arg);\r\n                        }\r\n                        catch (ignored) {\r\n                            return null;\r\n                        }\r\n                    }\r\n                })\r\n                    .filter(arg => arg)\r\n                    .join(' ');\r\n                if (level >= (customLogLevel !== null && customLogLevel !== void 0 ? customLogLevel : instance.logLevel)) {\r\n                    logCallback({\r\n                        level: LogLevel[level].toLowerCase(),\r\n                        message,\r\n                        args,\r\n                        type: instance.name\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    }\r\n}\n\nexport { LogLevel, Logger, setLogLevel, setUserLogHandler };\n//# sourceMappingURL=index.esm2017.js.map\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","import { Component, ComponentContainer } from '@firebase/component';\nimport { Logger, setUserLogHandler, setLogLevel as setLogLevel$1 } from '@firebase/logger';\nimport { ErrorFactory, getDefaultAppConfig, deepEqual, FirebaseError, base64urlEncodeWithoutPadding, isIndexedDBAvailable, validateIndexedDBOpenable } from '@firebase/util';\nexport { FirebaseError } from '@firebase/util';\nimport { openDB } from 'idb';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass PlatformLoggerServiceImpl {\r\n    constructor(container) {\r\n        this.container = container;\r\n    }\r\n    // In initial implementation, this will be called by installations on\r\n    // auth token refresh, and installations will send this string.\r\n    getPlatformInfoString() {\r\n        const providers = this.container.getProviders();\r\n        // Loop through providers and get library/version pairs from any that are\r\n        // version components.\r\n        return providers\r\n            .map(provider => {\r\n            if (isVersionServiceProvider(provider)) {\r\n                const service = provider.getImmediate();\r\n                return `${service.library}/${service.version}`;\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        })\r\n            .filter(logString => logString)\r\n            .join(' ');\r\n    }\r\n}\r\n/**\r\n *\r\n * @param provider check if this provider provides a VersionService\r\n *\r\n * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\r\n * provides VersionService. The provider is not necessarily a 'app-version'\r\n * provider.\r\n */\r\nfunction isVersionServiceProvider(provider) {\r\n    const component = provider.getComponent();\r\n    return (component === null || component === void 0 ? void 0 : component.type) === \"VERSION\" /* ComponentType.VERSION */;\r\n}\n\nconst name$o = \"@firebase/app\";\nconst version$1 = \"0.9.29\";\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst logger = new Logger('@firebase/app');\n\nconst name$n = \"@firebase/app-compat\";\n\nconst name$m = \"@firebase/analytics-compat\";\n\nconst name$l = \"@firebase/analytics\";\n\nconst name$k = \"@firebase/app-check-compat\";\n\nconst name$j = \"@firebase/app-check\";\n\nconst name$i = \"@firebase/auth\";\n\nconst name$h = \"@firebase/auth-compat\";\n\nconst name$g = \"@firebase/database\";\n\nconst name$f = \"@firebase/database-compat\";\n\nconst name$e = \"@firebase/functions\";\n\nconst name$d = \"@firebase/functions-compat\";\n\nconst name$c = \"@firebase/installations\";\n\nconst name$b = \"@firebase/installations-compat\";\n\nconst name$a = \"@firebase/messaging\";\n\nconst name$9 = \"@firebase/messaging-compat\";\n\nconst name$8 = \"@firebase/performance\";\n\nconst name$7 = \"@firebase/performance-compat\";\n\nconst name$6 = \"@firebase/remote-config\";\n\nconst name$5 = \"@firebase/remote-config-compat\";\n\nconst name$4 = \"@firebase/storage\";\n\nconst name$3 = \"@firebase/storage-compat\";\n\nconst name$2 = \"@firebase/firestore\";\n\nconst name$1 = \"@firebase/firestore-compat\";\n\nconst name = \"firebase\";\nconst version = \"10.9.0\";\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The default app name\r\n *\r\n * @internal\r\n */\r\nconst DEFAULT_ENTRY_NAME = '[DEFAULT]';\r\nconst PLATFORM_LOG_STRING = {\r\n    [name$o]: 'fire-core',\r\n    [name$n]: 'fire-core-compat',\r\n    [name$l]: 'fire-analytics',\r\n    [name$m]: 'fire-analytics-compat',\r\n    [name$j]: 'fire-app-check',\r\n    [name$k]: 'fire-app-check-compat',\r\n    [name$i]: 'fire-auth',\r\n    [name$h]: 'fire-auth-compat',\r\n    [name$g]: 'fire-rtdb',\r\n    [name$f]: 'fire-rtdb-compat',\r\n    [name$e]: 'fire-fn',\r\n    [name$d]: 'fire-fn-compat',\r\n    [name$c]: 'fire-iid',\r\n    [name$b]: 'fire-iid-compat',\r\n    [name$a]: 'fire-fcm',\r\n    [name$9]: 'fire-fcm-compat',\r\n    [name$8]: 'fire-perf',\r\n    [name$7]: 'fire-perf-compat',\r\n    [name$6]: 'fire-rc',\r\n    [name$5]: 'fire-rc-compat',\r\n    [name$4]: 'fire-gcs',\r\n    [name$3]: 'fire-gcs-compat',\r\n    [name$2]: 'fire-fst',\r\n    [name$1]: 'fire-fst-compat',\r\n    'fire-js': 'fire-js',\r\n    [name]: 'fire-js-all'\r\n};\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @internal\r\n */\r\nconst _apps = new Map();\r\n/**\r\n * Registered components.\r\n *\r\n * @internal\r\n */\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nconst _components = new Map();\r\n/**\r\n * @param component - the component being added to this app's container\r\n *\r\n * @internal\r\n */\r\nfunction _addComponent(app, component) {\r\n    try {\r\n        app.container.addComponent(component);\r\n    }\r\n    catch (e) {\r\n        logger.debug(`Component ${component.name} failed to register with FirebaseApp ${app.name}`, e);\r\n    }\r\n}\r\n/**\r\n *\r\n * @internal\r\n */\r\nfunction _addOrOverwriteComponent(app, component) {\r\n    app.container.addOrOverwriteComponent(component);\r\n}\r\n/**\r\n *\r\n * @param component - the component to register\r\n * @returns whether or not the component is registered successfully\r\n *\r\n * @internal\r\n */\r\nfunction _registerComponent(component) {\r\n    const componentName = component.name;\r\n    if (_components.has(componentName)) {\r\n        logger.debug(`There were multiple attempts to register component ${componentName}.`);\r\n        return false;\r\n    }\r\n    _components.set(componentName, component);\r\n    // add the component to existing app instances\r\n    for (const app of _apps.values()) {\r\n        _addComponent(app, component);\r\n    }\r\n    return true;\r\n}\r\n/**\r\n *\r\n * @param app - FirebaseApp instance\r\n * @param name - service name\r\n *\r\n * @returns the provider for the service with the matching name\r\n *\r\n * @internal\r\n */\r\nfunction _getProvider(app, name) {\r\n    const heartbeatController = app.container\r\n        .getProvider('heartbeat')\r\n        .getImmediate({ optional: true });\r\n    if (heartbeatController) {\r\n        void heartbeatController.triggerHeartbeat();\r\n    }\r\n    return app.container.getProvider(name);\r\n}\r\n/**\r\n *\r\n * @param app - FirebaseApp instance\r\n * @param name - service name\r\n * @param instanceIdentifier - service instance identifier in case the service supports multiple instances\r\n *\r\n * @internal\r\n */\r\nfunction _removeServiceInstance(app, name, instanceIdentifier = DEFAULT_ENTRY_NAME) {\r\n    _getProvider(app, name).clearInstance(instanceIdentifier);\r\n}\r\n/**\r\n * Test only\r\n *\r\n * @internal\r\n */\r\nfunction _clearComponents() {\r\n    _components.clear();\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst ERRORS = {\r\n    [\"no-app\" /* AppError.NO_APP */]: \"No Firebase App '{$appName}' has been created - \" +\r\n        'call initializeApp() first',\r\n    [\"bad-app-name\" /* AppError.BAD_APP_NAME */]: \"Illegal App name: '{$appName}\",\r\n    [\"duplicate-app\" /* AppError.DUPLICATE_APP */]: \"Firebase App named '{$appName}' already exists with different options or config\",\r\n    [\"app-deleted\" /* AppError.APP_DELETED */]: \"Firebase App named '{$appName}' already deleted\",\r\n    [\"no-options\" /* AppError.NO_OPTIONS */]: 'Need to provide options, when not being deployed to hosting via source.',\r\n    [\"invalid-app-argument\" /* AppError.INVALID_APP_ARGUMENT */]: 'firebase.{$appName}() takes either no argument or a ' +\r\n        'Firebase App instance.',\r\n    [\"invalid-log-argument\" /* AppError.INVALID_LOG_ARGUMENT */]: 'First argument to `onLog` must be null or a function.',\r\n    [\"idb-open\" /* AppError.IDB_OPEN */]: 'Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.',\r\n    [\"idb-get\" /* AppError.IDB_GET */]: 'Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.',\r\n    [\"idb-set\" /* AppError.IDB_WRITE */]: 'Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.',\r\n    [\"idb-delete\" /* AppError.IDB_DELETE */]: 'Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.'\r\n};\r\nconst ERROR_FACTORY = new ErrorFactory('app', 'Firebase', ERRORS);\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass FirebaseAppImpl {\r\n    constructor(options, config, container) {\r\n        this._isDeleted = false;\r\n        this._options = Object.assign({}, options);\r\n        this._config = Object.assign({}, config);\r\n        this._name = config.name;\r\n        this._automaticDataCollectionEnabled =\r\n            config.automaticDataCollectionEnabled;\r\n        this._container = container;\r\n        this.container.addComponent(new Component('app', () => this, \"PUBLIC\" /* ComponentType.PUBLIC */));\r\n    }\r\n    get automaticDataCollectionEnabled() {\r\n        this.checkDestroyed();\r\n        return this._automaticDataCollectionEnabled;\r\n    }\r\n    set automaticDataCollectionEnabled(val) {\r\n        this.checkDestroyed();\r\n        this._automaticDataCollectionEnabled = val;\r\n    }\r\n    get name() {\r\n        this.checkDestroyed();\r\n        return this._name;\r\n    }\r\n    get options() {\r\n        this.checkDestroyed();\r\n        return this._options;\r\n    }\r\n    get config() {\r\n        this.checkDestroyed();\r\n        return this._config;\r\n    }\r\n    get container() {\r\n        return this._container;\r\n    }\r\n    get isDeleted() {\r\n        return this._isDeleted;\r\n    }\r\n    set isDeleted(val) {\r\n        this._isDeleted = val;\r\n    }\r\n    /**\r\n     * This function will throw an Error if the App has already been deleted -\r\n     * use before performing API actions on the App.\r\n     */\r\n    checkDestroyed() {\r\n        if (this.isDeleted) {\r\n            throw ERROR_FACTORY.create(\"app-deleted\" /* AppError.APP_DELETED */, { appName: this._name });\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The current SDK version.\r\n *\r\n * @public\r\n */\r\nconst SDK_VERSION = version;\r\nfunction initializeApp(_options, rawConfig = {}) {\r\n    let options = _options;\r\n    if (typeof rawConfig !== 'object') {\r\n        const name = rawConfig;\r\n        rawConfig = { name };\r\n    }\r\n    const config = Object.assign({ name: DEFAULT_ENTRY_NAME, automaticDataCollectionEnabled: false }, rawConfig);\r\n    const name = config.name;\r\n    if (typeof name !== 'string' || !name) {\r\n        throw ERROR_FACTORY.create(\"bad-app-name\" /* AppError.BAD_APP_NAME */, {\r\n            appName: String(name)\r\n        });\r\n    }\r\n    options || (options = getDefaultAppConfig());\r\n    if (!options) {\r\n        throw ERROR_FACTORY.create(\"no-options\" /* AppError.NO_OPTIONS */);\r\n    }\r\n    const existingApp = _apps.get(name);\r\n    if (existingApp) {\r\n        // return the existing app if options and config deep equal the ones in the existing app.\r\n        if (deepEqual(options, existingApp.options) &&\r\n            deepEqual(config, existingApp.config)) {\r\n            return existingApp;\r\n        }\r\n        else {\r\n            throw ERROR_FACTORY.create(\"duplicate-app\" /* AppError.DUPLICATE_APP */, { appName: name });\r\n        }\r\n    }\r\n    const container = new ComponentContainer(name);\r\n    for (const component of _components.values()) {\r\n        container.addComponent(component);\r\n    }\r\n    const newApp = new FirebaseAppImpl(options, config, container);\r\n    _apps.set(name, newApp);\r\n    return newApp;\r\n}\r\n/**\r\n * Retrieves a {@link @firebase/app#FirebaseApp} instance.\r\n *\r\n * When called with no arguments, the default app is returned. When an app name\r\n * is provided, the app corresponding to that name is returned.\r\n *\r\n * An exception is thrown if the app being retrieved has not yet been\r\n * initialized.\r\n *\r\n * @example\r\n * ```javascript\r\n * // Return the default app\r\n * const app = getApp();\r\n * ```\r\n *\r\n * @example\r\n * ```javascript\r\n * // Return a named app\r\n * const otherApp = getApp(\"otherApp\");\r\n * ```\r\n *\r\n * @param name - Optional name of the app to return. If no name is\r\n *   provided, the default is `\"[DEFAULT]\"`.\r\n *\r\n * @returns The app corresponding to the provided app name.\r\n *   If no app name is provided, the default app is returned.\r\n *\r\n * @public\r\n */\r\nfunction getApp(name = DEFAULT_ENTRY_NAME) {\r\n    const app = _apps.get(name);\r\n    if (!app && name === DEFAULT_ENTRY_NAME && getDefaultAppConfig()) {\r\n        return initializeApp();\r\n    }\r\n    if (!app) {\r\n        throw ERROR_FACTORY.create(\"no-app\" /* AppError.NO_APP */, { appName: name });\r\n    }\r\n    return app;\r\n}\r\n/**\r\n * A (read-only) array of all initialized apps.\r\n * @public\r\n */\r\nfunction getApps() {\r\n    return Array.from(_apps.values());\r\n}\r\n/**\r\n * Renders this app unusable and frees the resources of all associated\r\n * services.\r\n *\r\n * @example\r\n * ```javascript\r\n * deleteApp(app)\r\n *   .then(function() {\r\n *     console.log(\"App deleted successfully\");\r\n *   })\r\n *   .catch(function(error) {\r\n *     console.log(\"Error deleting app:\", error);\r\n *   });\r\n * ```\r\n *\r\n * @public\r\n */\r\nasync function deleteApp(app) {\r\n    const name = app.name;\r\n    if (_apps.has(name)) {\r\n        _apps.delete(name);\r\n        await Promise.all(app.container\r\n            .getProviders()\r\n            .map(provider => provider.delete()));\r\n        app.isDeleted = true;\r\n    }\r\n}\r\n/**\r\n * Registers a library's name and version for platform logging purposes.\r\n * @param library - Name of 1p or 3p library (e.g. firestore, angularfire)\r\n * @param version - Current version of that library.\r\n * @param variant - Bundle variant, e.g., node, rn, etc.\r\n *\r\n * @public\r\n */\r\nfunction registerVersion(libraryKeyOrName, version, variant) {\r\n    var _a;\r\n    // TODO: We can use this check to whitelist strings when/if we set up\r\n    // a good whitelist system.\r\n    let library = (_a = PLATFORM_LOG_STRING[libraryKeyOrName]) !== null && _a !== void 0 ? _a : libraryKeyOrName;\r\n    if (variant) {\r\n        library += `-${variant}`;\r\n    }\r\n    const libraryMismatch = library.match(/\\s|\\//);\r\n    const versionMismatch = version.match(/\\s|\\//);\r\n    if (libraryMismatch || versionMismatch) {\r\n        const warning = [\r\n            `Unable to register library \"${library}\" with version \"${version}\":`\r\n        ];\r\n        if (libraryMismatch) {\r\n            warning.push(`library name \"${library}\" contains illegal characters (whitespace or \"/\")`);\r\n        }\r\n        if (libraryMismatch && versionMismatch) {\r\n            warning.push('and');\r\n        }\r\n        if (versionMismatch) {\r\n            warning.push(`version name \"${version}\" contains illegal characters (whitespace or \"/\")`);\r\n        }\r\n        logger.warn(warning.join(' '));\r\n        return;\r\n    }\r\n    _registerComponent(new Component(`${library}-version`, () => ({ library, version }), \"VERSION\" /* ComponentType.VERSION */));\r\n}\r\n/**\r\n * Sets log handler for all Firebase SDKs.\r\n * @param logCallback - An optional custom log handler that executes user code whenever\r\n * the Firebase SDK makes a logging call.\r\n *\r\n * @public\r\n */\r\nfunction onLog(logCallback, options) {\r\n    if (logCallback !== null && typeof logCallback !== 'function') {\r\n        throw ERROR_FACTORY.create(\"invalid-log-argument\" /* AppError.INVALID_LOG_ARGUMENT */);\r\n    }\r\n    setUserLogHandler(logCallback, options);\r\n}\r\n/**\r\n * Sets log level for all Firebase SDKs.\r\n *\r\n * All of the log types above the current log level are captured (i.e. if\r\n * you set the log level to `info`, errors are logged, but `debug` and\r\n * `verbose` logs are not).\r\n *\r\n * @public\r\n */\r\nfunction setLogLevel(logLevel) {\r\n    setLogLevel$1(logLevel);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst DB_NAME = 'firebase-heartbeat-database';\r\nconst DB_VERSION = 1;\r\nconst STORE_NAME = 'firebase-heartbeat-store';\r\nlet dbPromise = null;\r\nfunction getDbPromise() {\r\n    if (!dbPromise) {\r\n        dbPromise = openDB(DB_NAME, DB_VERSION, {\r\n            upgrade: (db, oldVersion) => {\r\n                // We don't use 'break' in this switch statement, the fall-through\r\n                // behavior is what we want, because if there are multiple versions between\r\n                // the old version and the current version, we want ALL the migrations\r\n                // that correspond to those versions to run, not only the last one.\r\n                // eslint-disable-next-line default-case\r\n                switch (oldVersion) {\r\n                    case 0:\r\n                        try {\r\n                            db.createObjectStore(STORE_NAME);\r\n                        }\r\n                        catch (e) {\r\n                            // Safari/iOS browsers throw occasional exceptions on\r\n                            // db.createObjectStore() that may be a bug. Avoid blocking\r\n                            // the rest of the app functionality.\r\n                            console.warn(e);\r\n                        }\r\n                }\r\n            }\r\n        }).catch(e => {\r\n            throw ERROR_FACTORY.create(\"idb-open\" /* AppError.IDB_OPEN */, {\r\n                originalErrorMessage: e.message\r\n            });\r\n        });\r\n    }\r\n    return dbPromise;\r\n}\r\nasync function readHeartbeatsFromIndexedDB(app) {\r\n    try {\r\n        const db = await getDbPromise();\r\n        const tx = db.transaction(STORE_NAME);\r\n        const result = await tx.objectStore(STORE_NAME).get(computeKey(app));\r\n        // We already have the value but tx.done can throw,\r\n        // so we need to await it here to catch errors\r\n        await tx.done;\r\n        return result;\r\n    }\r\n    catch (e) {\r\n        if (e instanceof FirebaseError) {\r\n            logger.warn(e.message);\r\n        }\r\n        else {\r\n            const idbGetError = ERROR_FACTORY.create(\"idb-get\" /* AppError.IDB_GET */, {\r\n                originalErrorMessage: e === null || e === void 0 ? void 0 : e.message\r\n            });\r\n            logger.warn(idbGetError.message);\r\n        }\r\n    }\r\n}\r\nasync function writeHeartbeatsToIndexedDB(app, heartbeatObject) {\r\n    try {\r\n        const db = await getDbPromise();\r\n        const tx = db.transaction(STORE_NAME, 'readwrite');\r\n        const objectStore = tx.objectStore(STORE_NAME);\r\n        await objectStore.put(heartbeatObject, computeKey(app));\r\n        await tx.done;\r\n    }\r\n    catch (e) {\r\n        if (e instanceof FirebaseError) {\r\n            logger.warn(e.message);\r\n        }\r\n        else {\r\n            const idbGetError = ERROR_FACTORY.create(\"idb-set\" /* AppError.IDB_WRITE */, {\r\n                originalErrorMessage: e === null || e === void 0 ? void 0 : e.message\r\n            });\r\n            logger.warn(idbGetError.message);\r\n        }\r\n    }\r\n}\r\nfunction computeKey(app) {\r\n    return `${app.name}!${app.options.appId}`;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst MAX_HEADER_BYTES = 1024;\r\n// 30 days\r\nconst STORED_HEARTBEAT_RETENTION_MAX_MILLIS = 30 * 24 * 60 * 60 * 1000;\r\nclass HeartbeatServiceImpl {\r\n    constructor(container) {\r\n        this.container = container;\r\n        /**\r\n         * In-memory cache for heartbeats, used by getHeartbeatsHeader() to generate\r\n         * the header string.\r\n         * Stores one record per date. This will be consolidated into the standard\r\n         * format of one record per user agent string before being sent as a header.\r\n         * Populated from indexedDB when the controller is instantiated and should\r\n         * be kept in sync with indexedDB.\r\n         * Leave public for easier testing.\r\n         */\r\n        this._heartbeatsCache = null;\r\n        const app = this.container.getProvider('app').getImmediate();\r\n        this._storage = new HeartbeatStorageImpl(app);\r\n        this._heartbeatsCachePromise = this._storage.read().then(result => {\r\n            this._heartbeatsCache = result;\r\n            return result;\r\n        });\r\n    }\r\n    /**\r\n     * Called to report a heartbeat. The function will generate\r\n     * a HeartbeatsByUserAgent object, update heartbeatsCache, and persist it\r\n     * to IndexedDB.\r\n     * Note that we only store one heartbeat per day. So if a heartbeat for today is\r\n     * already logged, subsequent calls to this function in the same day will be ignored.\r\n     */\r\n    async triggerHeartbeat() {\r\n        var _a, _b;\r\n        const platformLogger = this.container\r\n            .getProvider('platform-logger')\r\n            .getImmediate();\r\n        // This is the \"Firebase user agent\" string from the platform logger\r\n        // service, not the browser user agent.\r\n        const agent = platformLogger.getPlatformInfoString();\r\n        const date = getUTCDateString();\r\n        if (((_a = this._heartbeatsCache) === null || _a === void 0 ? void 0 : _a.heartbeats) == null) {\r\n            this._heartbeatsCache = await this._heartbeatsCachePromise;\r\n            // If we failed to construct a heartbeats cache, then return immediately.\r\n            if (((_b = this._heartbeatsCache) === null || _b === void 0 ? void 0 : _b.heartbeats) == null) {\r\n                return;\r\n            }\r\n        }\r\n        // Do not store a heartbeat if one is already stored for this day\r\n        // or if a header has already been sent today.\r\n        if (this._heartbeatsCache.lastSentHeartbeatDate === date ||\r\n            this._heartbeatsCache.heartbeats.some(singleDateHeartbeat => singleDateHeartbeat.date === date)) {\r\n            return;\r\n        }\r\n        else {\r\n            // There is no entry for this date. Create one.\r\n            this._heartbeatsCache.heartbeats.push({ date, agent });\r\n        }\r\n        // Remove entries older than 30 days.\r\n        this._heartbeatsCache.heartbeats = this._heartbeatsCache.heartbeats.filter(singleDateHeartbeat => {\r\n            const hbTimestamp = new Date(singleDateHeartbeat.date).valueOf();\r\n            const now = Date.now();\r\n            return now - hbTimestamp <= STORED_HEARTBEAT_RETENTION_MAX_MILLIS;\r\n        });\r\n        return this._storage.overwrite(this._heartbeatsCache);\r\n    }\r\n    /**\r\n     * Returns a base64 encoded string which can be attached to the heartbeat-specific header directly.\r\n     * It also clears all heartbeats from memory as well as in IndexedDB.\r\n     *\r\n     * NOTE: Consuming product SDKs should not send the header if this method\r\n     * returns an empty string.\r\n     */\r\n    async getHeartbeatsHeader() {\r\n        var _a;\r\n        if (this._heartbeatsCache === null) {\r\n            await this._heartbeatsCachePromise;\r\n        }\r\n        // If it's still null or the array is empty, there is no data to send.\r\n        if (((_a = this._heartbeatsCache) === null || _a === void 0 ? void 0 : _a.heartbeats) == null ||\r\n            this._heartbeatsCache.heartbeats.length === 0) {\r\n            return '';\r\n        }\r\n        const date = getUTCDateString();\r\n        // Extract as many heartbeats from the cache as will fit under the size limit.\r\n        const { heartbeatsToSend, unsentEntries } = extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats);\r\n        const headerString = base64urlEncodeWithoutPadding(JSON.stringify({ version: 2, heartbeats: heartbeatsToSend }));\r\n        // Store last sent date to prevent another being logged/sent for the same day.\r\n        this._heartbeatsCache.lastSentHeartbeatDate = date;\r\n        if (unsentEntries.length > 0) {\r\n            // Store any unsent entries if they exist.\r\n            this._heartbeatsCache.heartbeats = unsentEntries;\r\n            // This seems more likely than emptying the array (below) to lead to some odd state\r\n            // since the cache isn't empty and this will be called again on the next request,\r\n            // and is probably safest if we await it.\r\n            await this._storage.overwrite(this._heartbeatsCache);\r\n        }\r\n        else {\r\n            this._heartbeatsCache.heartbeats = [];\r\n            // Do not wait for this, to reduce latency.\r\n            void this._storage.overwrite(this._heartbeatsCache);\r\n        }\r\n        return headerString;\r\n    }\r\n}\r\nfunction getUTCDateString() {\r\n    const today = new Date();\r\n    // Returns date format 'YYYY-MM-DD'\r\n    return today.toISOString().substring(0, 10);\r\n}\r\nfunction extractHeartbeatsForHeader(heartbeatsCache, maxSize = MAX_HEADER_BYTES) {\r\n    // Heartbeats grouped by user agent in the standard format to be sent in\r\n    // the header.\r\n    const heartbeatsToSend = [];\r\n    // Single date format heartbeats that are not sent.\r\n    let unsentEntries = heartbeatsCache.slice();\r\n    for (const singleDateHeartbeat of heartbeatsCache) {\r\n        // Look for an existing entry with the same user agent.\r\n        const heartbeatEntry = heartbeatsToSend.find(hb => hb.agent === singleDateHeartbeat.agent);\r\n        if (!heartbeatEntry) {\r\n            // If no entry for this user agent exists, create one.\r\n            heartbeatsToSend.push({\r\n                agent: singleDateHeartbeat.agent,\r\n                dates: [singleDateHeartbeat.date]\r\n            });\r\n            if (countBytes(heartbeatsToSend) > maxSize) {\r\n                // If the header would exceed max size, remove the added heartbeat\r\n                // entry and stop adding to the header.\r\n                heartbeatsToSend.pop();\r\n                break;\r\n            }\r\n        }\r\n        else {\r\n            heartbeatEntry.dates.push(singleDateHeartbeat.date);\r\n            // If the header would exceed max size, remove the added date\r\n            // and stop adding to the header.\r\n            if (countBytes(heartbeatsToSend) > maxSize) {\r\n                heartbeatEntry.dates.pop();\r\n                break;\r\n            }\r\n        }\r\n        // Pop unsent entry from queue. (Skipped if adding the entry exceeded\r\n        // quota and the loop breaks early.)\r\n        unsentEntries = unsentEntries.slice(1);\r\n    }\r\n    return {\r\n        heartbeatsToSend,\r\n        unsentEntries\r\n    };\r\n}\r\nclass HeartbeatStorageImpl {\r\n    constructor(app) {\r\n        this.app = app;\r\n        this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck();\r\n    }\r\n    async runIndexedDBEnvironmentCheck() {\r\n        if (!isIndexedDBAvailable()) {\r\n            return false;\r\n        }\r\n        else {\r\n            return validateIndexedDBOpenable()\r\n                .then(() => true)\r\n                .catch(() => false);\r\n        }\r\n    }\r\n    /**\r\n     * Read all heartbeats.\r\n     */\r\n    async read() {\r\n        const canUseIndexedDB = await this._canUseIndexedDBPromise;\r\n        if (!canUseIndexedDB) {\r\n            return { heartbeats: [] };\r\n        }\r\n        else {\r\n            const idbHeartbeatObject = await readHeartbeatsFromIndexedDB(this.app);\r\n            if (idbHeartbeatObject === null || idbHeartbeatObject === void 0 ? void 0 : idbHeartbeatObject.heartbeats) {\r\n                return idbHeartbeatObject;\r\n            }\r\n            else {\r\n                return { heartbeats: [] };\r\n            }\r\n        }\r\n    }\r\n    // overwrite the storage with the provided heartbeats\r\n    async overwrite(heartbeatsObject) {\r\n        var _a;\r\n        const canUseIndexedDB = await this._canUseIndexedDBPromise;\r\n        if (!canUseIndexedDB) {\r\n            return;\r\n        }\r\n        else {\r\n            const existingHeartbeatsObject = await this.read();\r\n            return writeHeartbeatsToIndexedDB(this.app, {\r\n                lastSentHeartbeatDate: (_a = heartbeatsObject.lastSentHeartbeatDate) !== null && _a !== void 0 ? _a : existingHeartbeatsObject.lastSentHeartbeatDate,\r\n                heartbeats: heartbeatsObject.heartbeats\r\n            });\r\n        }\r\n    }\r\n    // add heartbeats\r\n    async add(heartbeatsObject) {\r\n        var _a;\r\n        const canUseIndexedDB = await this._canUseIndexedDBPromise;\r\n        if (!canUseIndexedDB) {\r\n            return;\r\n        }\r\n        else {\r\n            const existingHeartbeatsObject = await this.read();\r\n            return writeHeartbeatsToIndexedDB(this.app, {\r\n                lastSentHeartbeatDate: (_a = heartbeatsObject.lastSentHeartbeatDate) !== null && _a !== void 0 ? _a : existingHeartbeatsObject.lastSentHeartbeatDate,\r\n                heartbeats: [\r\n                    ...existingHeartbeatsObject.heartbeats,\r\n                    ...heartbeatsObject.heartbeats\r\n                ]\r\n            });\r\n        }\r\n    }\r\n}\r\n/**\r\n * Calculate bytes of a HeartbeatsByUserAgent array after being wrapped\r\n * in a platform logging header JSON object, stringified, and converted\r\n * to base 64.\r\n */\r\nfunction countBytes(heartbeatsCache) {\r\n    // base64 has a restricted set of characters, all of which should be 1 byte.\r\n    return base64urlEncodeWithoutPadding(\r\n    // heartbeatsCache wrapper properties\r\n    JSON.stringify({ version: 2, heartbeats: heartbeatsCache })).length;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction registerCoreComponents(variant) {\r\n    _registerComponent(new Component('platform-logger', container => new PlatformLoggerServiceImpl(container), \"PRIVATE\" /* ComponentType.PRIVATE */));\r\n    _registerComponent(new Component('heartbeat', container => new HeartbeatServiceImpl(container), \"PRIVATE\" /* ComponentType.PRIVATE */));\r\n    // Register `app` package.\r\n    registerVersion(name$o, version$1, variant);\r\n    // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\r\n    registerVersion(name$o, version$1, 'esm2017');\r\n    // Register platform SDK identifier (no version).\r\n    registerVersion('fire-js', '');\r\n}\n\n/**\r\n * Firebase App\r\n *\r\n * @remarks This package coordinates the communication between the different Firebase components\r\n * @packageDocumentation\r\n */\r\nregisterCoreComponents('');\n\nexport { SDK_VERSION, DEFAULT_ENTRY_NAME as _DEFAULT_ENTRY_NAME, _addComponent, _addOrOverwriteComponent, _apps, _clearComponents, _components, _getProvider, _registerComponent, _removeServiceInstance, deleteApp, getApp, getApps, initializeApp, onLog, registerVersion, setLogLevel };\n//# sourceMappingURL=index.esm2017.js.map\n","import { Deferred } from '@firebase/util';\n\n/**\r\n * Component for service name T, e.g. `auth`, `auth-internal`\r\n */\r\nclass Component {\r\n    /**\r\n     *\r\n     * @param name The public service name, e.g. app, auth, firestore, database\r\n     * @param instanceFactory Service factory responsible for creating the public interface\r\n     * @param type whether the service provided by the component is public or private\r\n     */\r\n    constructor(name, instanceFactory, type) {\r\n        this.name = name;\r\n        this.instanceFactory = instanceFactory;\r\n        this.type = type;\r\n        this.multipleInstances = false;\r\n        /**\r\n         * Properties to be added to the service namespace\r\n         */\r\n        this.serviceProps = {};\r\n        this.instantiationMode = \"LAZY\" /* InstantiationMode.LAZY */;\r\n        this.onInstanceCreated = null;\r\n    }\r\n    setInstantiationMode(mode) {\r\n        this.instantiationMode = mode;\r\n        return this;\r\n    }\r\n    setMultipleInstances(multipleInstances) {\r\n        this.multipleInstances = multipleInstances;\r\n        return this;\r\n    }\r\n    setServiceProps(props) {\r\n        this.serviceProps = props;\r\n        return this;\r\n    }\r\n    setInstanceCreatedCallback(callback) {\r\n        this.onInstanceCreated = callback;\r\n        return this;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst DEFAULT_ENTRY_NAME = '[DEFAULT]';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provider for instance for service name T, e.g. 'auth', 'auth-internal'\r\n * NameServiceMapping[T] is an alias for the type of the instance\r\n */\r\nclass Provider {\r\n    constructor(name, container) {\r\n        this.name = name;\r\n        this.container = container;\r\n        this.component = null;\r\n        this.instances = new Map();\r\n        this.instancesDeferred = new Map();\r\n        this.instancesOptions = new Map();\r\n        this.onInitCallbacks = new Map();\r\n    }\r\n    /**\r\n     * @param identifier A provider can provide mulitple instances of a service\r\n     * if this.component.multipleInstances is true.\r\n     */\r\n    get(identifier) {\r\n        // if multipleInstances is not supported, use the default name\r\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\r\n        if (!this.instancesDeferred.has(normalizedIdentifier)) {\r\n            const deferred = new Deferred();\r\n            this.instancesDeferred.set(normalizedIdentifier, deferred);\r\n            if (this.isInitialized(normalizedIdentifier) ||\r\n                this.shouldAutoInitialize()) {\r\n                // initialize the service if it can be auto-initialized\r\n                try {\r\n                    const instance = this.getOrInitializeService({\r\n                        instanceIdentifier: normalizedIdentifier\r\n                    });\r\n                    if (instance) {\r\n                        deferred.resolve(instance);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // when the instance factory throws an exception during get(), it should not cause\r\n                    // a fatal error. We just return the unresolved promise in this case.\r\n                }\r\n            }\r\n        }\r\n        return this.instancesDeferred.get(normalizedIdentifier).promise;\r\n    }\r\n    getImmediate(options) {\r\n        var _a;\r\n        // if multipleInstances is not supported, use the default name\r\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(options === null || options === void 0 ? void 0 : options.identifier);\r\n        const optional = (_a = options === null || options === void 0 ? void 0 : options.optional) !== null && _a !== void 0 ? _a : false;\r\n        if (this.isInitialized(normalizedIdentifier) ||\r\n            this.shouldAutoInitialize()) {\r\n            try {\r\n                return this.getOrInitializeService({\r\n                    instanceIdentifier: normalizedIdentifier\r\n                });\r\n            }\r\n            catch (e) {\r\n                if (optional) {\r\n                    return null;\r\n                }\r\n                else {\r\n                    throw e;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // In case a component is not initialized and should/can not be auto-initialized at the moment, return null if the optional flag is set, or throw\r\n            if (optional) {\r\n                return null;\r\n            }\r\n            else {\r\n                throw Error(`Service ${this.name} is not available`);\r\n            }\r\n        }\r\n    }\r\n    getComponent() {\r\n        return this.component;\r\n    }\r\n    setComponent(component) {\r\n        if (component.name !== this.name) {\r\n            throw Error(`Mismatching Component ${component.name} for Provider ${this.name}.`);\r\n        }\r\n        if (this.component) {\r\n            throw Error(`Component for ${this.name} has already been provided`);\r\n        }\r\n        this.component = component;\r\n        // return early without attempting to initialize the component if the component requires explicit initialization (calling `Provider.initialize()`)\r\n        if (!this.shouldAutoInitialize()) {\r\n            return;\r\n        }\r\n        // if the service is eager, initialize the default instance\r\n        if (isComponentEager(component)) {\r\n            try {\r\n                this.getOrInitializeService({ instanceIdentifier: DEFAULT_ENTRY_NAME });\r\n            }\r\n            catch (e) {\r\n                // when the instance factory for an eager Component throws an exception during the eager\r\n                // initialization, it should not cause a fatal error.\r\n                // TODO: Investigate if we need to make it configurable, because some component may want to cause\r\n                // a fatal error in this case?\r\n            }\r\n        }\r\n        // Create service instances for the pending promises and resolve them\r\n        // NOTE: if this.multipleInstances is false, only the default instance will be created\r\n        // and all promises with resolve with it regardless of the identifier.\r\n        for (const [instanceIdentifier, instanceDeferred] of this.instancesDeferred.entries()) {\r\n            const normalizedIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);\r\n            try {\r\n                // `getOrInitializeService()` should always return a valid instance since a component is guaranteed. use ! to make typescript happy.\r\n                const instance = this.getOrInitializeService({\r\n                    instanceIdentifier: normalizedIdentifier\r\n                });\r\n                instanceDeferred.resolve(instance);\r\n            }\r\n            catch (e) {\r\n                // when the instance factory throws an exception, it should not cause\r\n                // a fatal error. We just leave the promise unresolved.\r\n            }\r\n        }\r\n    }\r\n    clearInstance(identifier = DEFAULT_ENTRY_NAME) {\r\n        this.instancesDeferred.delete(identifier);\r\n        this.instancesOptions.delete(identifier);\r\n        this.instances.delete(identifier);\r\n    }\r\n    // app.delete() will call this method on every provider to delete the services\r\n    // TODO: should we mark the provider as deleted?\r\n    async delete() {\r\n        const services = Array.from(this.instances.values());\r\n        await Promise.all([\r\n            ...services\r\n                .filter(service => 'INTERNAL' in service) // legacy services\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                .map(service => service.INTERNAL.delete()),\r\n            ...services\r\n                .filter(service => '_delete' in service) // modularized services\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                .map(service => service._delete())\r\n        ]);\r\n    }\r\n    isComponentSet() {\r\n        return this.component != null;\r\n    }\r\n    isInitialized(identifier = DEFAULT_ENTRY_NAME) {\r\n        return this.instances.has(identifier);\r\n    }\r\n    getOptions(identifier = DEFAULT_ENTRY_NAME) {\r\n        return this.instancesOptions.get(identifier) || {};\r\n    }\r\n    initialize(opts = {}) {\r\n        const { options = {} } = opts;\r\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(opts.instanceIdentifier);\r\n        if (this.isInitialized(normalizedIdentifier)) {\r\n            throw Error(`${this.name}(${normalizedIdentifier}) has already been initialized`);\r\n        }\r\n        if (!this.isComponentSet()) {\r\n            throw Error(`Component ${this.name} has not been registered yet`);\r\n        }\r\n        const instance = this.getOrInitializeService({\r\n            instanceIdentifier: normalizedIdentifier,\r\n            options\r\n        });\r\n        // resolve any pending promise waiting for the service instance\r\n        for (const [instanceIdentifier, instanceDeferred] of this.instancesDeferred.entries()) {\r\n            const normalizedDeferredIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);\r\n            if (normalizedIdentifier === normalizedDeferredIdentifier) {\r\n                instanceDeferred.resolve(instance);\r\n            }\r\n        }\r\n        return instance;\r\n    }\r\n    /**\r\n     *\r\n     * @param callback - a function that will be invoked  after the provider has been initialized by calling provider.initialize().\r\n     * The function is invoked SYNCHRONOUSLY, so it should not execute any longrunning tasks in order to not block the program.\r\n     *\r\n     * @param identifier An optional instance identifier\r\n     * @returns a function to unregister the callback\r\n     */\r\n    onInit(callback, identifier) {\r\n        var _a;\r\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\r\n        const existingCallbacks = (_a = this.onInitCallbacks.get(normalizedIdentifier)) !== null && _a !== void 0 ? _a : new Set();\r\n        existingCallbacks.add(callback);\r\n        this.onInitCallbacks.set(normalizedIdentifier, existingCallbacks);\r\n        const existingInstance = this.instances.get(normalizedIdentifier);\r\n        if (existingInstance) {\r\n            callback(existingInstance, normalizedIdentifier);\r\n        }\r\n        return () => {\r\n            existingCallbacks.delete(callback);\r\n        };\r\n    }\r\n    /**\r\n     * Invoke onInit callbacks synchronously\r\n     * @param instance the service instance`\r\n     */\r\n    invokeOnInitCallbacks(instance, identifier) {\r\n        const callbacks = this.onInitCallbacks.get(identifier);\r\n        if (!callbacks) {\r\n            return;\r\n        }\r\n        for (const callback of callbacks) {\r\n            try {\r\n                callback(instance, identifier);\r\n            }\r\n            catch (_a) {\r\n                // ignore errors in the onInit callback\r\n            }\r\n        }\r\n    }\r\n    getOrInitializeService({ instanceIdentifier, options = {} }) {\r\n        let instance = this.instances.get(instanceIdentifier);\r\n        if (!instance && this.component) {\r\n            instance = this.component.instanceFactory(this.container, {\r\n                instanceIdentifier: normalizeIdentifierForFactory(instanceIdentifier),\r\n                options\r\n            });\r\n            this.instances.set(instanceIdentifier, instance);\r\n            this.instancesOptions.set(instanceIdentifier, options);\r\n            /**\r\n             * Invoke onInit listeners.\r\n             * Note this.component.onInstanceCreated is different, which is used by the component creator,\r\n             * while onInit listeners are registered by consumers of the provider.\r\n             */\r\n            this.invokeOnInitCallbacks(instance, instanceIdentifier);\r\n            /**\r\n             * Order is important\r\n             * onInstanceCreated() should be called after this.instances.set(instanceIdentifier, instance); which\r\n             * makes `isInitialized()` return true.\r\n             */\r\n            if (this.component.onInstanceCreated) {\r\n                try {\r\n                    this.component.onInstanceCreated(this.container, instanceIdentifier, instance);\r\n                }\r\n                catch (_a) {\r\n                    // ignore errors in the onInstanceCreatedCallback\r\n                }\r\n            }\r\n        }\r\n        return instance || null;\r\n    }\r\n    normalizeInstanceIdentifier(identifier = DEFAULT_ENTRY_NAME) {\r\n        if (this.component) {\r\n            return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME;\r\n        }\r\n        else {\r\n            return identifier; // assume multiple instances are supported before the component is provided.\r\n        }\r\n    }\r\n    shouldAutoInitialize() {\r\n        return (!!this.component &&\r\n            this.component.instantiationMode !== \"EXPLICIT\" /* InstantiationMode.EXPLICIT */);\r\n    }\r\n}\r\n// undefined should be passed to the service factory for the default instance\r\nfunction normalizeIdentifierForFactory(identifier) {\r\n    return identifier === DEFAULT_ENTRY_NAME ? undefined : identifier;\r\n}\r\nfunction isComponentEager(component) {\r\n    return component.instantiationMode === \"EAGER\" /* InstantiationMode.EAGER */;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`\r\n */\r\nclass ComponentContainer {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.providers = new Map();\r\n    }\r\n    /**\r\n     *\r\n     * @param component Component being added\r\n     * @param overwrite When a component with the same name has already been registered,\r\n     * if overwrite is true: overwrite the existing component with the new component and create a new\r\n     * provider with the new component. It can be useful in tests where you want to use different mocks\r\n     * for different tests.\r\n     * if overwrite is false: throw an exception\r\n     */\r\n    addComponent(component) {\r\n        const provider = this.getProvider(component.name);\r\n        if (provider.isComponentSet()) {\r\n            throw new Error(`Component ${component.name} has already been registered with ${this.name}`);\r\n        }\r\n        provider.setComponent(component);\r\n    }\r\n    addOrOverwriteComponent(component) {\r\n        const provider = this.getProvider(component.name);\r\n        if (provider.isComponentSet()) {\r\n            // delete the existing provider from the container, so we can register the new component\r\n            this.providers.delete(component.name);\r\n        }\r\n        this.addComponent(component);\r\n    }\r\n    /**\r\n     * getProvider provides a type safe interface where it can only be called with a field name\r\n     * present in NameServiceMapping interface.\r\n     *\r\n     * Firebase SDKs providing services should extend NameServiceMapping interface to register\r\n     * themselves.\r\n     */\r\n    getProvider(name) {\r\n        if (this.providers.has(name)) {\r\n            return this.providers.get(name);\r\n        }\r\n        // create a Provider for a service that hasn't registered with Firebase\r\n        const provider = new Provider(name, this);\r\n        this.providers.set(name, provider);\r\n        return provider;\r\n    }\r\n    getProviders() {\r\n        return Array.from(this.providers.values());\r\n    }\r\n}\n\nexport { Component, ComponentContainer, Provider };\n//# sourceMappingURL=index.esm2017.js.map\n","/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A container for all of the Logger instances\r\n */\r\nconst instances = [];\r\n/**\r\n * The JS SDK supports 5 log levels and also allows a user the ability to\r\n * silence the logs altogether.\r\n *\r\n * The order is a follows:\r\n * DEBUG < VERBOSE < INFO < WARN < ERROR\r\n *\r\n * All of the log types above the current log level will be captured (i.e. if\r\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\r\n * `VERBOSE` logs will not)\r\n */\r\nvar LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\r\n    LogLevel[LogLevel[\"VERBOSE\"] = 1] = \"VERBOSE\";\r\n    LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\r\n    LogLevel[LogLevel[\"WARN\"] = 3] = \"WARN\";\r\n    LogLevel[LogLevel[\"ERROR\"] = 4] = \"ERROR\";\r\n    LogLevel[LogLevel[\"SILENT\"] = 5] = \"SILENT\";\r\n})(LogLevel || (LogLevel = {}));\r\nconst levelStringToEnum = {\r\n    'debug': LogLevel.DEBUG,\r\n    'verbose': LogLevel.VERBOSE,\r\n    'info': LogLevel.INFO,\r\n    'warn': LogLevel.WARN,\r\n    'error': LogLevel.ERROR,\r\n    'silent': LogLevel.SILENT\r\n};\r\n/**\r\n * The default log level\r\n */\r\nconst defaultLogLevel = LogLevel.INFO;\r\n/**\r\n * By default, `console.debug` is not displayed in the developer console (in\r\n * chrome). To avoid forcing users to have to opt-in to these logs twice\r\n * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\r\n * logs to the `console.log` function.\r\n */\r\nconst ConsoleMethod = {\r\n    [LogLevel.DEBUG]: 'log',\r\n    [LogLevel.VERBOSE]: 'log',\r\n    [LogLevel.INFO]: 'info',\r\n    [LogLevel.WARN]: 'warn',\r\n    [LogLevel.ERROR]: 'error'\r\n};\r\n/**\r\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\r\n * messages on to their corresponding console counterparts (if the log method\r\n * is supported by the current log level)\r\n */\r\nconst defaultLogHandler = (instance, logType, ...args) => {\r\n    if (logType < instance.logLevel) {\r\n        return;\r\n    }\r\n    const now = new Date().toISOString();\r\n    const method = ConsoleMethod[logType];\r\n    if (method) {\r\n        console[method](`[${now}]  ${instance.name}:`, ...args);\r\n    }\r\n    else {\r\n        throw new Error(`Attempted to log a message with an invalid logType (value: ${logType})`);\r\n    }\r\n};\r\nclass Logger {\r\n    /**\r\n     * Gives you an instance of a Logger to capture messages according to\r\n     * Firebase's logging scheme.\r\n     *\r\n     * @param name The name that the logs will be associated with\r\n     */\r\n    constructor(name) {\r\n        this.name = name;\r\n        /**\r\n         * The log level of the given Logger instance.\r\n         */\r\n        this._logLevel = defaultLogLevel;\r\n        /**\r\n         * The main (internal) log handler for the Logger instance.\r\n         * Can be set to a new function in internal package code but not by user.\r\n         */\r\n        this._logHandler = defaultLogHandler;\r\n        /**\r\n         * The optional, additional, user-defined log handler for the Logger instance.\r\n         */\r\n        this._userLogHandler = null;\r\n        /**\r\n         * Capture the current instance for later use\r\n         */\r\n        instances.push(this);\r\n    }\r\n    get logLevel() {\r\n        return this._logLevel;\r\n    }\r\n    set logLevel(val) {\r\n        if (!(val in LogLevel)) {\r\n            throw new TypeError(`Invalid value \"${val}\" assigned to \\`logLevel\\``);\r\n        }\r\n        this._logLevel = val;\r\n    }\r\n    // Workaround for setter/getter having to be the same type.\r\n    setLogLevel(val) {\r\n        this._logLevel = typeof val === 'string' ? levelStringToEnum[val] : val;\r\n    }\r\n    get logHandler() {\r\n        return this._logHandler;\r\n    }\r\n    set logHandler(val) {\r\n        if (typeof val !== 'function') {\r\n            throw new TypeError('Value assigned to `logHandler` must be a function');\r\n        }\r\n        this._logHandler = val;\r\n    }\r\n    get userLogHandler() {\r\n        return this._userLogHandler;\r\n    }\r\n    set userLogHandler(val) {\r\n        this._userLogHandler = val;\r\n    }\r\n    /**\r\n     * The functions below are all based on the `console` interface\r\n     */\r\n    debug(...args) {\r\n        this._userLogHandler && this._userLogHandler(this, LogLevel.DEBUG, ...args);\r\n        this._logHandler(this, LogLevel.DEBUG, ...args);\r\n    }\r\n    log(...args) {\r\n        this._userLogHandler &&\r\n            this._userLogHandler(this, LogLevel.VERBOSE, ...args);\r\n        this._logHandler(this, LogLevel.VERBOSE, ...args);\r\n    }\r\n    info(...args) {\r\n        this._userLogHandler && this._userLogHandler(this, LogLevel.INFO, ...args);\r\n        this._logHandler(this, LogLevel.INFO, ...args);\r\n    }\r\n    warn(...args) {\r\n        this._userLogHandler && this._userLogHandler(this, LogLevel.WARN, ...args);\r\n        this._logHandler(this, LogLevel.WARN, ...args);\r\n    }\r\n    error(...args) {\r\n        this._userLogHandler && this._userLogHandler(this, LogLevel.ERROR, ...args);\r\n        this._logHandler(this, LogLevel.ERROR, ...args);\r\n    }\r\n}\r\nfunction setLogLevel(level) {\r\n    instances.forEach(inst => {\r\n        inst.setLogLevel(level);\r\n    });\r\n}\r\nfunction setUserLogHandler(logCallback, options) {\r\n    for (const instance of instances) {\r\n        let customLogLevel = null;\r\n        if (options && options.level) {\r\n            customLogLevel = levelStringToEnum[options.level];\r\n        }\r\n        if (logCallback === null) {\r\n            instance.userLogHandler = null;\r\n        }\r\n        else {\r\n            instance.userLogHandler = (instance, level, ...args) => {\r\n                const message = args\r\n                    .map(arg => {\r\n                    if (arg == null) {\r\n                        return null;\r\n                    }\r\n                    else if (typeof arg === 'string') {\r\n                        return arg;\r\n                    }\r\n                    else if (typeof arg === 'number' || typeof arg === 'boolean') {\r\n                        return arg.toString();\r\n                    }\r\n                    else if (arg instanceof Error) {\r\n                        return arg.message;\r\n                    }\r\n                    else {\r\n                        try {\r\n                            return JSON.stringify(arg);\r\n                        }\r\n                        catch (ignored) {\r\n                            return null;\r\n                        }\r\n                    }\r\n                })\r\n                    .filter(arg => arg)\r\n                    .join(' ');\r\n                if (level >= (customLogLevel !== null && customLogLevel !== void 0 ? customLogLevel : instance.logLevel)) {\r\n                    logCallback({\r\n                        level: LogLevel[level].toLowerCase(),\r\n                        message,\r\n                        args,\r\n                        type: instance.name\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    }\r\n}\n\nexport { LogLevel, Logger, setLogLevel, setUserLogHandler };\n//# sourceMappingURL=index.esm2017.js.map\n"],"names":["CONSTANTS","NODE_CLIENT","NODE_ADMIN","SDK_VERSION","assert","assertion","message","assertionError","Error","stringToByteArray$1","str","out","p","i","length","c","charCodeAt","base64","byteToCharMap_","charToByteMap_","byteToCharMapWebSafe_","charToByteMapWebSafe_","ENCODED_VALS_BASE","ENCODED_VALS","this","ENCODED_VALS_WEBSAFE","HAS_NATIVE_SUPPORT","atob","encodeByteArray","input","webSafe","Array","isArray","init_","byteToCharMap","output","byte1","haveByte2","byte2","haveByte3","byte3","outByte1","outByte2","outByte3","outByte4","push","join","encodeString","btoa","decodeString","bytes","pos","c1","String","fromCharCode","c2","u","c3","byteArrayToString","decodeStringToByteArray","charToByteMap","charAt","byte4","DecodeBase64StringError","constructor","super","arguments","name","base64Encode","utf8Bytes","base64urlEncodeWithoutPadding","replace","base64Decode","e","console","error","deepCopy","value","deepExtend","undefined","target","source","Object","Date","getTime","prop","hasOwnProperty","getDefaultsFromGlobal","self","window","g","getGlobal","__FIREBASE_DEFAULTS__","getDefaults","process","defaultsJsonString","JSON","parse","getDefaultsFromEnvVariable","document","match","cookie","decoded","getDefaultsFromCookie","info","getDefaultEmulatorHostnameAndPort","productName","host","_a","_b","emulatorHosts","getDefaultEmulatorHost","separatorIndex","lastIndexOf","port","parseInt","substring","Deferred","reject","resolve","promise","Promise","wrapCallback","callback","catch","createMockUserToken","token","projectId","uid","project","iat","sub","user_id","payload","assign","iss","aud","exp","auth_time","firebase","sign_in_provider","identities","stringify","alg","type","getUA","navigator","isMobileCordova","test","isReactNative","isNodeSdk","jsonEval","data","decode","header","claims","signature","parts","split","isValidFormat","isAdmin","contains","obj","key","prototype","call","safeGet","isEmpty","map","fn","contextObj","res","querystring","querystringParams","params","entries","forEach","arrayVal","encodeURIComponent","Sha1","chain_","buf_","W_","pad_","inbuf_","total_","blockSize","reset","compress_","buf","offset","W","t","f","k","a","b","d","update","lengthMinusBlock","n","inbuf","digest","totalBits","j","errorPrefix","fnName","argName","stringToByteArray","high","stringLength","getModularInstance","service","_delegate","_ref","title","children","index","currentTab","accodionClickHandler","React","className","id","onClick","child","link","href","content","Web","hosturl","setHosturl","useState","epubUrl","setEpubFile","pdfUrl","setPdfFile","setCurrentTab","tabList","setTabList","useEffect","location","contentList","role","tab","AccordionItem","Info","highSchoolMap","setHighSchoolMap","universityMap","setUniversityMap","script","createElement","src","async","body","appendChild","onload","naver","maps","Map","center","LatLng","zoom","removeChild","Marker","position","style","overflow","width","Introduce","Dekstop","app","initializeApp","databaseURL","pushFirebaseData","path","db","getDatabase","postListRef","ref","newPostRef","set","getFirebaseData","dbRef","get","then","snapshot","exists","success","val","deleteFirebaseData","database","commonIsAdmin","includes","getBase64","file","reader","FileReader","readAsDataURL","result","onerror","TraceBasic","Name","Contents","setIsAdmin","TraceList","setData","keys","values","tempData","item","marginTop","contents","date","TraceMainView","TraceIndexPage","BlogContent","image","alt","height","margin","subject","description","BlogContentList","resultData","rowItem","rowIndex","itemIndex","BlogMainView","BlogIndexPage","BlogWriteView","imgSrc","setImgSrc","setSubject","setDescription","useRouter","writeComplete","fontSize","htmlFor","onChange","rows","maxWidth","accept","files","BlogWritePage","TraceWriteView","setName","setContents","today","toLocaleString","TraceWritePage","IndexPage","profile","removePathTrailingSlash","endsWith","slice","defineProperty","exports","normalizePathTrailingSlash","__NEXT_TRAILING_SLASH","cancelIdleCallback","requestIdleCallback","bind","cb","start","now","setTimeout","didTimeout","timeRemaining","Math","max","clearTimeout","markAssetError","isAssetError","err","ASSET_LOAD_ERROR","getClientBuildManifest","getMiddlewareManifest","__MIDDLEWARE_MANIFEST","resolvePromiseWithTimeout","__MIDDLEWARE_MANIFEST_CB","MS_MAX_IDLE_DELAY","createRouteLoader","assetPrefix","entrypoints","loadedScripts","styleSheets","routes","maybeExecuteScript","prom","querySelector","crossOrigin","__NEXT_CROSS_ORIGIN","appendScript","fetchStyleSheet","fetch","ok","text","whenEntrypoint","route","withFuture","onEntrypoint","execute","component","default","old","delete","loadRoute","prefetch","getFilesForRoute","scripts","css","all","has","entrypoint","styles","finally","cn","connection","saveData","effectiveType","canPrefetch","prefetchViaDom","as","rej","selector","rel","head","_requestIdleCallback","__esModule","generator","resolver","entry","future","MSInputMethodContext","documentMode","relList","supports","hasPrefetch","Symbol","ms","cancelled","r","__BUILD_MANIFEST","__BUILD_MANIFEST_CB","manifest","allFiles","encodeURI","filter","v","enumerable","_router","_withRouter","_react","useContext","_routerContext","RouterContext","createRouter","args","singletonRouter","router","readyCallbacks","makePublicRouterInstance","scopedRouter","instance","property","urlPropertyFields","events","coreMethodFields","field","_interopRequireDefault","_isError","ready","getRouter","event","on","eventField","toUpperCase","_singletonRouter","stack","_default","ComposedComponent","WithRouterWrapper","props","getInitialProps","origGetInitialProps","options","tokens","char","count","pattern","TypeError","code","lexer","prefixes","defaultPattern","escapeString","delimiter","tryConsume","mustConsume","nextType","consumeText","prefix","indexOf","suffix","modifier","name_1","pattern_1","tokensToFunction","reFlags","flags","encode","x","validate","matches","RegExp","optional","repeat","segment","typeOfMessage","regexpToFunction","re","pathname","m","exec","create","_loop_1","sensitive","tokensToRegexp","strict","_c","end","_d","_i","tokens_1","mod","endToken","isEndDelimited","pathToRegexp","groups","regexpToRegexp","paths","arrayToRegexp","stringToRegexp","compile","isError","getProperError","_isPlainObject","isPlainObject","normalizePathSep","denormalizePagePath","page","startsWith","_utils","isDynamicRoute","escapeStringRegexp","domainItems","hostname","detectedLocale","domainItem","toLowerCase","ref1","domain","defaultLocale","locales","some","locale","normalizeLocalePath","pathnameParts","splice","getObjectClassLabel","toString","getPrototypeOf","handler","off","emit","evts","createContext","getDomainLocale","domainLocales","__NEXT_I18N_SUPPORT","_normalizeLocalePath","detectedDomain","detectDomainLocale","http","basePath","addLocale","delLocale","hasBasePath","addBasePath","delBasePath","isLocalURL","interpolateAs","resolveHref","_normalizeTrailingSlash","_routeLoader","newObj","desc","getOwnPropertyDescriptor","_interopRequireWildcard","_denormalizePagePath","_mitt","_isDynamic","_parseRelativeUrl","_querystring","_resolveRewrites","_routeMatcher","_routeRegex","_getMiddlewareRegex","_formatUrl","__NEXT_ROUTER_BASEPATH","buildCancellationError","addPathPrefix","pathNoQueryHash","pathLower","localeLower","queryIndex","hashIndex","url","locationOrigin","getLocationOrigin","resolved","URL","origin","_","asPathname","query","interpolatedRoute","dynamicRegex","getRouteRegex","dynamicGroups","dynamicMatches","getRouteMatcher","every","param","replaced","omitParmsFromQuery","filteredQuery","resolveAs","base","urlAsString","formatWithValidation","urlProtoMatch","urlAsStringNoProto","normalizedUrl","normalizeRepeatedSlashes","asPath","finalUrl","interpolatedAs","searchParams","searchParamsToUrlQuery","hash","resolvedHref","_1","stripOrigin","prepareUrlAs","resolvedAs","hrefHadOrigin","asHadOrigin","preparedUrl","preparedAs","resolveDynamicRoute","pages","cleanPathname","manualScrollRestoration","__NEXT_SCROLL_RESTORATION","history","sessionStorage","setItem","removeItem","SSG_DATA_NOT_FOUND","fetchRetry","attempts","opts","credentials","status","json","notFound","fetchNextData","dataHref","isServerRender","inflightCache","persistCache","cacheKey","Router","pathname1","query1","as1","initialProps","pageLoader","App","wrapApp","Component","subscription","isFallback","isPreview","isRsc","sdc","sdr","sde","_idx","onPopState","state","changeState","getURL","__N","forcedScroll","idx","pageXOffset","y","pageYOffset","getItem","parseRelativeUrl","isSsr","_bps","change","shallow","_shallow","components","initial","__N_SSG","__N_SSP","__N_RSC","autoExportDynamic","__NEXT_DATA__","autoExport","clc","_wrapApp","isLocaleDomain","isReady","gssp","gip","appGip","gsp","search","__NEXT_HAS_REWRITES","_shouldResolveHref","addEventListener","scrollRestoration","reload","back","method","shouldResolveHref","_h","nextState","prevLocale","parsedAs","localePathResult","didNavigate","asNoBasePath","ST","performance","mark","scroll","routeProps","_inFlightRoute","abortComponentLoad","cleanedAs","localeChange","onlyAHashChange","scrollToHash","rewrites","parsed","__rewrites","getPageList","getMiddlewareList","urlIsNew","rewritesResult","externalDest","matchedPage","effect","_preflightRequest","cache","newAs","newUrl","destination","routeRegex","routeMatch","shouldInterpolate","missingParams","ref2","routeInfo","getRouteInfo","pageProps","__N_REDIRECT","__N_REDIRECT_BASE_PATH","parsedHref","__N_PREVIEW","notFoundRoute","fetchComponent","statusCode","isValidShallowRoute","_scroll","resetScroll","documentElement","lang","err1","loadErrorFail","gipErr","routeInfoErr","handleRouteInfoError","existingRouteInfo","cachedRouteInfo","__next_rsc__","getDataHref","ssg","rsc","_getData","fresh","_getFlightData","__flight_serialized__","__flight_fresh__","beforePopState","oldUrlNoHash","oldHash","newUrlNoHash","newHash","scrollTo","idEl","getElementById","scrollIntoView","nameEl","getElementsByName","effects","_isSsg","isSsg","priority","cancel","handleCancelled","componentResult","loadPage","serialized","middleware","isSSR","getMiddlewareRegex","preflight","_getPreflightData","preflightHref","shouldCache","rewrite","fsPathname","redirect","cleanRedirect","refresh","ssr","headers","ctx","AppTree","loadGetInitialProps","formatUrl","urlObjectKeys","slashedProtocols","urlObj","auth","protocol","urlQueryToSearchParams","slashes","ext","normalizedRoute","catchAll","getParametrizedRoute","catchAllRegex","catchAllGroupedRegex","parameterizedRoute","namedRegex","routeKeys","namedParameterizedRoute","_sortedRoutes","getSortedRoutes","TEST_ROUTE","globalBase","resolvedBase","parseUrl","parsedURL","customRouteMatcherOptions","matcherOptions","customRoute","regexModifier","matcherRegex","regexSource","matcher","matchHas","req","hasItem","cookies","paramName","newParamName","charCode","getSafeParamName","groupKey","compileNonPath","prepareDestination","__nextLocale","__nextDefaultLocale","escapedDestination","segmentName","_escapeRegexp","parsedDestination","_parseUrl","destQuery","destPath","unescapeSegments","destHostname","destPathParamKeys","destHostnameParamKeys","_pathToRegexp","destParams","destPathCompiler","destHostnameCompiler","key1","strOrArray","paramKeys","appendParamsToQuery","stringifyUrlQueryParam","isNaN","urlQuery","URLSearchParams","append","searchParamsList","from","handleRewrite","customRouteMatcher","hasParams","_prepareDestination","reduce","acc","destRes","finished","beforeFiles","afterFiles","fallback","_pathMatch","decodeURIComponent","DecodeError","slugName","parseParameter","segments","groupIndex","routeKeyCharCode","routeKeyCharLength","getSafeRouteKey","routeKey","cleanedKey","invalidKey","normalizedPages","root","UrlNode","pagePath","insert","smoosh","urlPath","_insert","Boolean","_smoosh","childrenPaths","sort","restSlugName","optionalRestSlugName","prev","curr","placeholder","unshift","urlPaths","slugNames","isCatchAll","nextSegment","isOptional","handleSlug","previousSlug","nextSlug","slug","getDisplayName","displayName","isResSent","headersSent","execOnce","used","urlParts","SP","warnOnce","measure","module","getDefaultAppConfig","config","FirebaseError","customData","setPrototypeOf","captureStackTrace","ErrorFactory","serviceName","errors","fullCode","template","PATTERN","replaceTemplate","fullMessage","deepEqual","aKeys","bKeys","aProp","bProp","isObject","thing","instanceFactory","multipleInstances","serviceProps","instantiationMode","onInstanceCreated","setInstantiationMode","mode","setMultipleInstances","setServiceProps","setInstanceCreatedCallback","DEFAULT_ENTRY_NAME","Provider","container","instances","instancesDeferred","instancesOptions","onInitCallbacks","identifier","normalizedIdentifier","normalizeInstanceIdentifier","deferred","isInitialized","shouldAutoInitialize","getOrInitializeService","instanceIdentifier","getImmediate","getComponent","setComponent","isComponentEager","instanceDeferred","clearInstance","services","INTERNAL","_delete","isComponentSet","getOptions","initialize","onInit","existingCallbacks","Set","add","existingInstance","invokeOnInitCallbacks","callbacks","ComponentContainer","providers","addComponent","provider","getProvider","addOrOverwriteComponent","getProviders","LogLevel","levelStringToEnum","DEBUG","VERBOSE","INFO","WARN","ERROR","SILENT","defaultLogLevel","ConsoleMethod","defaultLogHandler","logType","logLevel","toISOString","instanceOfAny","object","constructors","idbProxyableTypes","cursorAdvanceMethods","cursorRequestMap","WeakMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","idbProxyTraps","receiver","IDBTransaction","objectStoreNames","objectStore","wrapFunction","func","IDBDatabase","transaction","IDBCursor","advance","continue","continuePrimaryKey","apply","unwrap","storeNames","tx","transformCachableValue","done","unlisten","removeEventListener","complete","DOMException","cacheDonePromiseForTransaction","IDBObjectStore","IDBIndex","Proxy","IDBRequest","request","promisifyRequest","newValue","readMethods","writeMethods","cachedMethods","getMethod","targetFuncName","useIndex","isWrite","storeName","store","shift","oldTraps","PlatformLoggerServiceImpl","getPlatformInfoString","isVersionServiceProvider","library","version","logString","name$o","version$1","logger","_logLevel","_logHandler","_userLogHandler","setLogLevel","logHandler","userLogHandler","debug","log","warn","PLATFORM_LOG_STRING","_apps","_components","_addComponent","_registerComponent","componentName","_getProvider","heartbeatController","triggerHeartbeat","ERROR_FACTORY","FirebaseAppImpl","_isDeleted","_options","_config","_name","_automaticDataCollectionEnabled","automaticDataCollectionEnabled","_container","checkDestroyed","isDeleted","appName","rawConfig","existingApp","newApp","getApp","registerVersion","libraryKeyOrName","variant","libraryMismatch","versionMismatch","warning","DB_NAME","DB_VERSION","STORE_NAME","dbPromise","getDbPromise","blocked","upgrade","blocking","terminated","indexedDB","open","openPromise","oldVersion","newVersion","openDB","createObjectStore","originalErrorMessage","writeHeartbeatsToIndexedDB","heartbeatObject","put","computeKey","idbGetError","appId","HeartbeatServiceImpl","_heartbeatsCache","_storage","HeartbeatStorageImpl","_heartbeatsCachePromise","read","agent","getUTCDateString","heartbeats","lastSentHeartbeatDate","singleDateHeartbeat","hbTimestamp","valueOf","overwrite","heartbeatsToSend","unsentEntries","heartbeatsCache","maxSize","heartbeatEntry","find","hb","dates","countBytes","pop","extractHeartbeatsForHeader","headerString","_canUseIndexedDBPromise","runIndexedDBEnvironmentCheck","isIndexedDBAvailable","preExist","DB_CHECK_NAME","onsuccess","close","deleteDatabase","onupgradeneeded","idbHeartbeatObject","readHeartbeatsFromIndexedDB","heartbeatsObject","existingHeartbeatsObject","Logger"],"sourceRoot":""}